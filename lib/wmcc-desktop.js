module.exports=function(t){function e(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=16)}([function(t,e){t.exports=require("path")},function(module,exports,__webpack_require__){"use strict";const Default=eval("require")("./language.json");let Lang,Config,User;const langRoot="../../../languages/";try{Config=eval("require")(`${langRoot}config.json`),User=eval("require")(`${langRoot}${Config.default.client}-client.json`)}catch(t){console.log("TODO: Err.System.Notification")}Lang=User instanceof Object?Object.assign({},Default,User):Default,module.exports=Lang,module.exports.args=function(t,e){Array.isArray(e)||(e=[e]);for(var n in e)t=t.replace(`{${n}}`,e[0]);return t},module.exports.auto=function(t,e,n){$(e).html($(e).html().replace(/\{\{(.*?)\}\}/g,function(e,o){return n?Lang[n][t][o]:Lang[t][o]}))},module.exports.replace=function(t,e,n){return t.replace(/\{\{(.*?)\}\}/g,function(t,o){return n?Lang[n][e][o]:Lang[e][o]})}},function(t,e){t.exports=require("electron")},function(t,e){t.exports=require("fs")},function(t,e,n){"use strict";function o(t){if(!(t instanceof Object))throw new TypeError(s.error.options_must_be_object);o._init(t)}const i=n(0),r=n(5),s=n(1).Tools.Window,{app:a,BrowserWindow:l,ipcMain:c,dialog:d,nativeImage:p,Tray:u,Menu:h}=n(2);let f,m;const g=p.createFromPath(i.join(__dirname,"../source/image/favicon.png")),y={width:900,height:600,maximizable:!1,resizable:!1,webPreferences:{devTools:!1},icon:g};o._init=function(t){m=y,t&&Object.assign(m,t)},o._start=function(){(f=new l(m)).loadURL(r.format({pathname:i.join(__dirname,"../source/html/index.htm"),protocol:"file:",slashes:!0}));const t=new u(g),e=h.buildFromTemplate([{label:"Show Application",click:function(){f.show()}},{label:"Close Application",click:function(){a.isQuiting=!0,a.quit()}}]);t.setContextMenu(e),f.on("show",function(){t.setHighlightMode("always")}),f.on("minimize",function(t){t.preventDefault(),f.hide()}),f.on("closed",function(){f=null}),c.on("window-size",function(t,e){var n=m.width,o=m.height;n>e.width&&o>e.height&&n!=e.width&&f.setSize(n-(e.width-n),o-(e.height-o))})},o.prototype.start=function(){a.on("ready",o._start),a.on("window-all-closed",function(){"darwin"!==process.platform&&a.quit()}),a.on("activate",()=>{null===f&&o._start()})},t.exports=o},function(t,e){t.exports=require("url")},function(module,exports,__webpack_require__){"use strict";function Loader(t,e){if(!(this instanceof Loader))return new Loader;this.locker=new Lock,this.element=t,this.type=e,this.events=[]}function upperFirst(t){return t[0].toUpperCase()+t.slice(1)}const{ipcRenderer:ipcRenderer}=__webpack_require__(2),Remote=__webpack_require__(2).remote,FileSystem=__webpack_require__(3),Path=__webpack_require__(0),EventBind=__webpack_require__(7),Menu=Remote.Menu,Windows=Remote.getCurrentWindow(),Langs=__webpack_require__(1),Lang=Langs.Browser.Loader,Lock=Core.utils.Lock;Loader.init=function(t){const e=new Loader(document.body,"page");t.loader=e,e.node=t,t.eventbind||(t.eventbind=new EventBind(t)),e._find()},Loader.reload=function(){location.reload()},Loader.prototype._find=function(){$(this.element).is("[page]")?(this.type="page",this._load()):$(this.element).is("[module]")&&(this.type="module",this._load());const t=this;$(this.element).children().each(function(){t.element=this,t._find()})},Loader.prototype._load=async function(){const t=this._getAttribute($(this.element)),e="page"==this.type?`page/${t.page[0]}/${t.page[1]}.htm`:`module/${t.category}/${t.module}.htm`,n=Path.join(`${__dirname}/../source/html/${e}`),o=t.tag?t.tag:this.element;if(t.active){const e=await this.locker.lock();try{const i=await this._readFile(n);return await this._render(o,i,t)}finally{e()}}},Loader.prototype._readFile=async function(t){try{return await FileSystem.readFileSync(t,"utf8")}catch(e){throw new TypeError(Langs.args(Lang.error.file_not_found,t))}},Loader.prototype._getAttribute=function(t){let e={};return $.each(t.get(0).attributes,function(){"page"==this.name?e[this.name]=this.value.split(/_(.+)/):e[this.name]=this.value}),e},Loader.prototype._render=async function _render(element,data,attr){const dom=$(data);for(let t=0;t<dom.length;++t)this.element=dom[t],$(dom[t]).is("toggle")&&(data=await this._toggle(element,dom,$(data),attr,t)),this._find(),$(dom[t]).is("include")&&this._include(element,dom[t]);data=this._replace(data,attr),$(element).html(data);const req=$(element).find("require"),tri=$(element).find("trigger");req.length&&eval("require")(req.attr("src"));const self=this;tri.length&&eval(`(async function() { ${tri.attr("script")} })();`);const el=$(element).find("print");el.length&&this._print(el)},Loader.prototype._toggle=async function(t,e,n,o,i){const r=$("<p></p>").append(e[i]),s=$(e[i]).attr("script").split("::"),a=$(e[i]).attr("on"),l=$(e[i]).attr("cls");let c=0;const d=this;await async function(){return await d.node._call(s[1],s[0])}()||(c^=1);let p=r.children("toggle").find(`[cls="${l}"]`);const u=p.eq(1^c).children("[click]");for(let e=0;e<$(p).length;++e){const n=$(p[e]).html(),i=$(n);for(let r=0;r<i.length;++r)if(this.element=i[r],$(i[r]).is("toggle")){const s=await this._toggle(t,i,$(n),o,r);$(p[e]).eq(r).html(s)}}let h;if(a){const e=a.split("::");this._event(e[0],e[1],p,function(){this.element=t,h=n.map(function(){return this.outerHTML}).get(),d._render(t,h.join("\r\n"),o)})}u&&$(t).unbind().bind("click","[click]",async function(e){if($(e.target).attr("click")){const i=$(e.target).attr("click").split("::");i&&await d.node._call(i[1],i[0]),h=n.map(function(){return this.outerHTML}).get(),d._render(t,h.join("\r\n"),o)}}),p.eq(c).remove();let f="";for(let t=0;t<e.length;t++)f+=t===i?r.html():$(e[t]).prop("outerHTML")||"";return f},Loader.prototype._include=async function(t,e){const n=this,o=Path.join(__dirname,$(e).attr("src"));!async function(){const e=await n._readFile(o);$(t).append(`<script type="text/javascript">${e}<\/script>`)}()},Loader.prototype._replace=function(t,e){return e.page?Langs.replace(t,upperFirst(e.page[1]),upperFirst(e.page[0])):Langs.replace(t,upperFirst(e.module),upperFirst(e.category))},Loader.prototype._print=async function(t){let e;for(let n=0;n<t.length;n++){const o=$(t[n]),i=o.html().split("::"),r=Object.assign({},i.slice(2));if(o.is("[on]"))await this.node._on(i[1],i[0],o);else{if(o.is("[emit]"))e=await this.node._emit(i[1],i[0]);else try{e=await this.node._call(i[1],i[0],r)}catch(t){console.log(t),e=o.html()}o.html(e)}}},Loader.prototype._event=function(t,e,n,o){this.events[t]||(this.events[t]=[]);const i=this.node[t].on(e,o);i._events[e]=i._events[e].filter((t,e,n)=>n.includes(t)==e)},ipcRenderer.send("window-size",{width:window.innerWidth,height:window.innerHeight});const SelectionText=Menu.buildFromTemplate([{label:Lang.context_menu.copy,role:"copy"},{type:"separator"},{label:Lang.context_menu.selectall,role:"selectall"}]),SelectionInput=Menu.buildFromTemplate([{label:Lang.context_menu.undo,role:"undo"},{label:Lang.context_menu.redo,role:"redo"},{type:"separator"},{label:Lang.context_menu.cut,role:"cut"},{label:Lang.context_menu.copy,role:"copy"},{label:Lang.context_menu.paste,role:"paste"},{type:"separator"},{label:Lang.context_menu.selectall,role:"selectall"}]);Windows.webContents.on("context-menu",(t,e)=>{const{isEditable:n}=e;n&&SelectionInput.popup(Windows)}),window.oncontextmenu=function(t){""!=window.getSelection()&&2===t.button&&SelectionText.popup(Windows)},document.addEventListener("keydown",function(t){t.ctrlKey&&t.shiftKey&&123===t.which?Windows.toggleDevTools():t.ctrlKey&&t.shiftKey&&116===t.which&&location.reload()}),["drop","dragover"].map(t=>{window.addEventListener(t,t=>(t.preventDefault(),!1),!1)}),module.exports=Loader},function(module,exports,__webpack_require__){"use strict";function EventBind(t){if(!(this instanceof EventBind))return new EventBind(t);this.node=t,t.eventbind=this,this.init()}function checkAddress(t,e,n){const o=$(t.target),i=o.siblings("p"),r=o.val();if(i.html("").removeClass("error"),highlightInput(o,0),"focusin"!==t.type)try{if(r){const t=Address.fromString(r);if(e&&!e.includes(t.getScriptType()))return i.html(n).addClass("error"),void highlightInput(o,1,1);highlightInput(o,1,0)}}catch(n){i.html("Invalid WMCC Address").addClass("error"),highlightInput(o,1,1)}}function isNumeric(t){return!isNaN(parseFloat(t))&&isFinite(t)}function toNumeric(t){return!!isNumeric(t)&&parseFloat(t)}function waitElement(t,e){$(t).length?e($(t)):waitElement(t,e)}function highlightInput(t,e,n){const o=["focus","error"];Array.isArray(t)||(t=[t]);for(let i=0;i<t.length;i++)switch(e){case 0:for(let e=0;e<o.length;e++)t[i].removeClass(o[e]);break;case 1:t[i].addClass(o[n])}}function swapCoin(t){t.blur(function(){let e,n;const o=t.attr("coin");switch(n=toNumeric(t.val()),o){case"wmcc":e=t.siblings('[coin="btc"]');try{n=(n=(n=new BigNum(n)).div(1e4)).toNumber()}catch(t){}break;case"btc":e=t.siblings('[coin="wmcc"]');try{n=(n=(n=new BigNum(n)).mul(1e4)).toNumber()}catch(t){}}let i=[e,e.next()];highlightInput(i,1,0),n||(n="",0===parseFloat(t.val())&&(t.val(""),i.push(t,t.next())),highlightInput(i,0)),e.val(n)})}function getSend(t){const e=t.parent().parent(),n=e.find(".address:first"),o=e.find('input[coin="wmcc"]');return!(!n.val()||!o.val()||n.hasClass("error")||o.hasClass("error"))&&{addr:n.val(),val:o.val()}}const Address=Core.primitives.Address,Util=Core.utils.util,BN=Core.crypto.BN,Calendar=eval("require")("../lib/vendor").calendar,Langs=__webpack_require__(1),{clipboard:clipboard}=__webpack_require__(2);let target={},calendar,calendars=null;BigNum.config({DECIMAL_PLACES:7});const Event=[["click","menubutton, tabbutton, menuhidden","_toggleActive"],["click",".flaticon-copy","_iconCopy"],["click",".flaticon-paste","_iconPaste"],["focus",".r_calendar","_calendar"],["mouseenter mouseleave focus blur",".r_togglePassword","_togglePassword"],["keyup change",".r_maxbuffer","_maxBuffer"],["focus",".r_maxsize","_maxSize"],["keydown change",".r_isname","_isName"],["keydown change",".r_digitdash","_digitdash"],["keydown change",".r_fixedNumber","_fixedNumber"],["click",".r_secret_insert","_insertSecret"],["click",".r_wallet_remove","_removeSecret"],["focus blur",".r_checkAddress","_checkAddress"],["focus blur",".r_checkPubKeyHashAddress","_checkPubKeyHashAddress"],["click",".r_walletManageAddress","_walletManageAddress"],["keyup change",".r_checkAmount","_checkAmount"],["click",".r_copyAddress","_copyAddress"],["click",".r_addAddress","_addAddress"],["click",".r_deleteAddress","_deleteAddress"],["click",".r_walletGetHistory","_walletGetHistory"],["click keyup",".r_expSearch","_expSearch"],["click",".r_goToExp","_goToExp"],["click",".r_goExpHome","_goExpHome"],["click",".r_getExpAdressTransactions","_getExpAdressTransactions"],["click",".r_genGotoAddress","_genGotoAddress"],["click",".r_genGotoAddresses","_genGotoAddresses"],["click keyup",".r_genSearchAddress","_genSearchAddress"],["click keyup",".r_menuLogout","_menuLogout"]];EventBind.prototype.init=function(){const t=this;for(let e in Event)$(document).on(Event[e][0],Event[e][1],function(n){t[Event[e][2]](n,this)})},EventBind.prototype.render=function(t,e,n){this.node.loader._render(t,e,n)},EventBind.prototype._toggleActive=function(t){$(t.target).attr("active")||($(t.target).attr("active",!0).siblings().removeAttr("active"),target={},this.node.loader.element=$(t.target),this.node.loader._find())},EventBind.prototype._iconCopy=function(t){let e;const n=$(t.target),o=n.attr("value"),i=n.attr("type");if(i){const t=(e="next"===i?n.next("input, textarea"):n.prev("input, textarea")).prop("disabled");$(e).prop("disabled",!1).select(),document.execCommand("copy"),t&&$(e).prop("disabled",!0)}else{const t=$("<input style='top:-9999px;position:absolute;'>");$("body").append(t),o?t.val(o).select():n.hasClass("next")?t.val(n.next().html()).select():n.hasClass("prev")&&t.val(n.prev().html()).select(),document.execCommand("copy"),t.remove()}},EventBind.prototype._iconPaste=function(t){const e=$(t.target),n=e.attr("type");n&&("next"===n?e.next("input, textarea").select():e.prev("input, textarea").select(),document.execCommand("paste"))},EventBind.prototype._calendar=function(t){if(calendars===t.target)return!1;calendars=t.target,calendar&&calendar.destroy(),$(".pika-single").remove();const e=$(t.target).attr("date")||"Jan 01 1970",n=$(t.target).attr("minDate")||"Jan 01 1900";calendar=new Calendar({field:calendars,firstDay:1,position:"top right",defaultDate:new Date(e),minDate:new Date(n),maxDate:new Date,yearRange:[1900,2020],format:"DD-MM-YYYY",disableDayFn:!0})},EventBind.prototype._togglePassword=function(t){$(t.target).is(":disabled")?"mouseenter"===t.type?$(t.target).attr("type","text"):$(t.target).attr("type","password"):"focusin"===t.type?$(t.target).attr("type","text"):"focusout"===t.type&&$(t.target).attr("type","password")},EventBind.prototype._maxBuffer=function(t){const e=$(t.target),n=target,o=e.prop("name"),i=Buffer.byteLength(e.val());if(e.val()){let r=-1!==e.attr("name").indexOf("question")&&this.node.auth.hsm.length?this.node.auth.hsm.length:32;if(i>r){if(n[o]){if(-1!==$.inArray(t.keyCode,[8,9,13,27,46,109,111,189,191])||!(65!==t.keyCode&&67!==t.keyCode||!0!==t.ctrlKey&&!0!==t.metaKey))return;t.preventDefault()}else EventBind.tooltip(e,Langs.Credential.Auth.error.exceed_max_size,{toggleAnimation:5}),t.preventDefault();setTimeout(function(){e.val(Buffer.from(e.val()).toString("utf8",0,r))},1)}else n[o]&&i!==r&&n[o].stop().remove()}else n[o]&&n[o].stop().remove()},EventBind.prototype._maxSize=function(t){const e=$(t.target).attr("length")||32;$(t.target).prop("maxLength",e)},EventBind.prototype._isName=function(t){" "===$(t.target).val().substr(-1)&&32===t.keyCode&&t.preventDefault(),-1!==$.inArray(t.keyCode,[8,9,13,27,32,46,109,110,189])||65===t.keyCode&&(!0===t.ctrlKey||!0===t.metaKey)||t.keyCode>=35&&t.keyCode<=40||(t.shiftKey||t.keyCode<48||t.keyCode>57)&&(t.keyCode<96||t.keyCode>105)&&(t.shiftKey||190!==t.keyCode)&&(t.keyCode<65||t.keyCode>90)&&t.preventDefault()},EventBind.prototype._digitdash=function(t){-1!==$.inArray(t.keyCode,[8,9,13,27,46,109,111,189,191])||65===t.keyCode&&(!0===t.ctrlKey||!0===t.metaKey)||t.keyCode>=35&&t.keyCode<=40||(t.shiftKey||t.keyCode<48||t.keyCode>57)&&(t.keyCode<96||t.keyCode>105)&&t.preventDefault()},EventBind.prototype._fixedNumber=function(t){let e=t.keyCode||t.which;e>=96&&e<=105&&(e-=48);const n=$(t.target).val(),o=110===e||190===e?".":String.fromCharCode(e);-1!==$.inArray(e,[8,9,13,27,46,189])||65===e&&(!0===t.ctrlKey||!0===t.metaKey)||e>=35&&e<=40||(isNumeric(`${n}${o}`)&&32!==t.keyCode||t.preventDefault(),(t.shiftKey||t.keyCode<48||t.keyCode>57)&&(t.keyCode<96||t.keyCode>105)&&110===t.keyCode&&190===t.keyCode&&t.preventDefault())},EventBind.prototype._insertSecret=function(t,e){let n=($(t.target).parent().parent().find("input").length-4)/2;const o=EventBind.emptyInput(`input:lt(${2*n+2})`);if(n+=1,o instanceof Array)for(let t in o)EventBind.tooltip(o[t],"*Required");else{let t=$("#wallet_secret").html();const o=$(e).prev();t=t.replace('name="question"',`name="question_${n}"`).replace('name="answer"',`name="question_${n}"`).replace(/\[count\]/g,n),o.parent().find("input:gt("+(2*(n-2)+1)+"):lt(2)").prop("disabled",!0),2==n?$(t).insertAfter(o).hide().slideDown(300):(o.find(".flaticon-remove").remove(),o.prev().find(".flaticon-remove").remove(),o.prev().prev().slideUp(300).prev().slideUp(300,function(){$(t).insertAfter(o).hide().slideDown(300)}),this.node.auth.getMaxLock()-2<n-1&&$(e).remove())}},EventBind.prototype._removeSecret=function(){$(".r_wallet_remove:lt(2)").parent().remove()},EventBind.prototype._checkAddress=function(t){checkAddress(t)},EventBind.prototype._checkPubKeyHashAddress=function(t){checkAddress(t,[2,130],"Non-Witness/Pubkeyhash Address")},EventBind.prototype._walletManageAddress=function(t){$('menubutton[page="menu-top_wallet"]').removeAttr("active").click(),setTimeout(function(){waitElement('menubutton[module="manage"]',function(t){$('menubutton[module="manage"]').click()})},1)},EventBind.prototype._checkAmount=function(t){const e=$(t.target),n=$(t.target).next(),o=e.siblings("p"),i=e.val();o.html("").removeClass("error"),highlightInput([e,n],0),"focusin"!==t.type&&(i?isNumeric(i)?highlightInput([e,n],1,0):(o.html("Invalid Amount").addClass("error"),highlightInput([e,n],1,1)):highlightInput([e,n],0),e.hasClass("h_swapcoin")&&swapCoin(e))},EventBind.prototype._copyAddress=async function(t){const e=$(t.target);clipboard.writeText(e.html());const n=await this.node.info.createReceive();e.html(n)},EventBind.prototype._addAddress=async function(t){const e=$(t.target),n=getSend(e);if(!n)return;let o=e.siblings("table");o.length||(e.after('<p></p><table><tr><th>Recipient Address</th><th>Value</th><th title="Delete">Del.</th></tr></table><p></p>'),o=e.parent().find("table").addClass("outputs")),o.append(`<tr><td title="Address: ${n.addr}">${n.addr}</td>`+`<td title="Value: ${n.val}">${n.val}</td><td><i class="glyph-icon flaticon-remove r_deleteAddress"></i></td></tr>`),e.parent().parent().find("input.address, input.h_swapcoin, input.h_swapcoin + a").each(function(){$(this).val(""),highlightInput($(this),0)})},EventBind.prototype._deleteAddress=async function(t){const e=$(t.target).parent().parent(),n=e.parent().parent();1===e.siblings().length?(n.siblings("p").remove(),n.remove()):e.remove()},EventBind.prototype._walletGetHistory=async function(t){const e=$(t.target),n=e.attr("offset"),o=e.attr("limit");e.parent().parent().html(await this.node.info.getWalletHistory(o,n))},EventBind.prototype._expSearch=async function(t){const e=$(t.target),n="click"==t.type?e.prev().val():e.val();if(13!=t.keyCode&&"INPUT"==t.target.nodeName||!n)return;const o=e.parent().parent().parent().parent();return this.expSearch(n,o)},EventBind.prototype._goExpHome=function(t){$('menubutton[page="menu-top_explorer"]').removeAttr("active").trigger("click")},EventBind.prototype._getExpAdressTransactions=async function(t){const e=$(t.target),n=e.attr("limit"),o=e.attr("offset"),i=await this.node.info.getExpAdressTransactions(n,o),r=e.parents("print");this.render(r,i,{category:"explorer",module:"address"})},EventBind.prototype._goToExp=function(t,e){this.node.info.isExpHome(!1),$('menubutton[page="menu-top_explorer"]').removeAttr("active").trigger("click");const n=this;setTimeout(function(){n.node.info.isExpHome(!0),waitElement('bodycontain[category="explorer"]',function(e){const o=$(t.target).val()||$(t.target).attr("value")||$(t.target).html();return n.expSearch(o,e)})},1)},EventBind.prototype._genGotoAddress=async function(t){const e=$(t.target),n=e.html(),o=e.parent().parent().parent().parent().parent().parent().children("print"),i=await this.node.info.setGenSearchAddress(n);this.render(o,i,{category:"address",module:"list"})},EventBind.prototype._genGotoAddresses=async function(t){const e=$(t.target),n=e.attr("limit"),o=e.attr("offset"),i=await this.node.info.getGenAddress(n,o),r=$("addressprint print");this.render(r,i,{category:"address",module:"list"})},EventBind.prototype._genSearchAddress=async function(t){const e=$(t.target),n="click"==t.type?e.prev().val():e.val();if(13!=t.keyCode&&"INPUT"==t.target.nodeName||!n)return;const o=e.parent().parent().next(),i=await this.node.info.setGenSearchAddress(n);this.render(o,i,{category:"address",module:"list"})},EventBind.prototype._menuLogout=async function(t){location.reload()},EventBind.emptyInput=function(t){let e=[],n=0;return $(t).each(function(){n++,$(this).val()||e.push($(this))}),e.length?e:n},EventBind.tooltip=function(t,e,n={}){let o={},i=target;const r=t.prop("name");let s=$(`<tooltip>${e}</tooltip>`);$(t).after(s);let a=$(t).offset().left,l=$(t).offset().top;"right"==n.position?l-=$(t).outerHeight():"top"==n.position?(l-=$(t).outerHeight(),a=a+$(t).outerWidth()-$(s).outerWidth()):(a=a+$(t).outerWidth()+10,l=l+$(t).outerHeight()/2-$(s).outerHeight()/2),o.left=a,o.top=l,s.css(o),n.toggleAnimation&&(i[r]?$(t).on("keyup paste change",function(){s.remove()}):(i[r]=s,i[r].show(0).delay(1e3*n.toggleAnimation).hide(0,function(){delete i[r],$(this).remove()})))},EventBind.modalBox=function(t,e,n={}){const o=`<modalbox><div><span${n.type?' class="'+n.type+'"':""}>${n.title?n.title:""}</span>\n    <i class="glyph-icon flaticon-remove"></i></div><div>${e}</div></modalbox>`,i=$(t).prepend(o);return n.transformZ&&$(t).css("-webkit-transform","translateZ(0)"),i},EventBind.add=function(t,e,n){$(document).on(t,e,n)},EventBind.prototype.expSearch=async function(t,e){const{module:n,data:o}=await this.getExpData(t),i=e.find('menuhidden[category="explorer"]');for(let t of i)$(t).attr("module")===n&&$(t).removeAttr("active").trigger("click");return o||e.find('menuhidden[module="404"]').trigger("click"),o},EventBind.prototype.getExpData=async function(t){if(this.node.info.resetExplorer(),isNumeric(t)){const e=await this.node.info.setExpBlockByHeight(t);return!1!==e&&{module:"block",data:e}}if(64===t.length){const e=await this.node.info.setExpBlockByHash(t);if(!1!==e)return{module:"block",data:e};const n=await this.node.info.setExpTransaction(t);if(!1!==n)return{module:"transaction",data:n};const o=await this.node.info.setExpPending(t);if(!1!==o)return{module:"pending",data:o}}const e=await this.node.info.setExpAddress(t);return!1!==e&&{module:"address",data:e}},module.exports=EventBind},function(t,e,n){"use strict";function o(){if(!(this instanceof o))return new o;this.files=[],this.root=r.join(__dirname,"../../"),this.init()}n(13);const i=n(3),r=n(0);o.prototype.init=function(){const t=i.readdirSync(this.root).filter(t=>".temp"===r.extname(t));this.install(t)},o.prototype.install=function(t){for(let e of t){const t=r.join(this.root,r.basename(e,".temp")),n=r.join(this.root,e);i.unlink(t,e=>{i.rename(n,t,t=>{})})}},t.exports=o},function(t,e,n){"use strict";function o(t){if(!(this instanceof o))return new o(t);this.node=t,this.wallet=null,this.htm=null,this.decrypt=null,this.count=0,this._tempdb=null,this.init()}function i(t){const e=c.emptyInput(t);if(!(e instanceof Array))return!0;for(let t in e)c.tooltip(e[t],"*Required");return!1}function r(t,e){if(d.isName($(t).val()))return!0;const n=$(e).parent().parent(),o=`<span>${w.Credential.Auth.error.invalid_name.text_1}<br>${w.Credential.Auth.error.invalid_name.text_2}\n    <br>${w.Credential.Auth.error.invalid_name.text_3}</span><a class="button" cancel>${w.Auth.Button.try_again}</a>`,i=c.modalBox(n,o,{transformZ:!0,title:w.Credential.Auth.error.invalid_name.title});$("a[cancel], i").unbind("click").on("click",function(){$(i).css("-webkit-transform",""),$("modalbox").remove()})}function s(t,e){try{return p.wmcoin(t)}catch(t){const n=c.modalBox(e,'<span>Too many decimal point for amount.</span><a class="button" cancel>Try Again</a>',{transformZ:!0,title:"Invalid Amount"});return $("a[cancel], i").unbind("click").on("click",function(){$(n).css("-webkit-transform",""),$("modalbox").remove()}),!1}}n(10);const a=n(11),l=n(0),c=n(7),d=Core.common,p=(Core.primitives.Address,Core.wmcc.Amount),u=Core.protocol.policy,{Attach:h}=n(22).Node,{HSM:f}=n(23).Credential,{dialog:m}=n(2).remote,g=(Core.crypto.digest,Core.crypto.secp256k1,Core.crypto.ccmp,n(6)),y=n(15),w=n(1),_=n(12);window.addEventListener("unhandledrejection",function(t,e){console.error(t.reason.stack)});const v=[["click",".s_wallet_create","_createWallet"],["click",".s_wallet_login","_loginWallet"],["click",".s_wallet_reset","_resetWallet"],["click",".s_secret_reset","_resetSecret"],["click",".s_createTx","_createTx"],["click",".s_requestTx","_requestTx"],["click",".s_resetSendCoin","_resetSendCoin"],["click",".s_signMessage","_signMessage"],["click",".s_verifyMessage","_verifyMessage"],["click",".s_wallet_getotp","_wallet_getotp"],["click",".s_wallet_changesecret","_wallet_changesecret"],["click",".s_wallet_updatesecret","_wallet_updatesecret"],["click",".s_backupWallet","_backupWallet"],["click",".s_restoreWallet","_restoreWallet"],["dragover dragleave dragenter drop",".s_dragdropWallet","_dragdropWallet"],["keypress","body","_enterPress"],["keyup","body","_escapePress"],["click",".s_configSave","_configSave"],["click",".s_stratumRemoveWorker","_stratumRemoveWorker"],["click",".s_stratumAddWorker","_stratumAddWorker"]];o.prototype.init=function(){const t=this;for(let e in v)$(document).on(v[e][0],v[e][1],function(n){t[v[e][2]](n)})},o.prototype._createWallet=async function(t){const e=$(t.target);e.prop("disabled",!0);i('input[name="name"], input[name="dob"], input[name*="question_"], input[name*="answer_"]')&&r('input[name="name"]',e)&&await this.createWallet(e),e.prop("disabled",!1)},o.prototype._loginWallet=async function(t){const e=$(t.target);e.prop("disabled",!0);const n=$('input[name="answer"');if(!i(`select[name="name"], input[name="dob"]${n.length?', input[name="answer"]':""}`))return e.prop("disabled",!1),!1;n.length?await this.processAnswer(e):await this.loadWallet(),e.prop("disabled",!1)},o.prototype._resetWallet=function(t){const e=t.target?$(t.target):$(t);(e.closest("h1 + holder").length?e.closest("h1 + holder"):e.closest("menu + content")).prev().find('tabbutton[active="true"], menubutton[active="true"]').removeAttr("active").trigger("click")},o.prototype._resetSecret=function(t){this._resetWallet(t)},o.prototype._createTx=async function(t){let e=[];const n=$(t.target).parent().parent(),o=n.find("table.outputs"),i=n.find(".address:first"),r=n.find('input[coin="wmcc"]');let a;if(i.val()&&r.val()&&!i.hasClass("error")&&!r.hasClass("error")){if(!(a=s(r.val().toString(),n)))return;e.push({value:a,address:i.val()})}if(o&&$("tr:not(:first-child)",o).each(function(){const t=$(this).children("td:first").html(),o=$(this).children("td:nth-child(2)").html();(a=s(o,n))&&e.push({value:a,address:t})}),!e.length)return;e=function(t){return[...t.reduce((t,e)=>{let n=t.get(e.address)||0;return t.set(e.address,e.value+n),t},new Map)].map(([t,e])=>({address:t,value:e}))}(e);const l=n.find('input[coin="rate"]');let d;try{d=p.wmcoin(l.val())}catch(t){return l.addClass("error"),void l.next().next().next().html("Too many decimal places.")}const h={outputs:e,rate:d};try{const n=await this.wallet.createTX(h);if(await this.wallet.sign(n,this.decrypt.passphrase.toString("hex")),!n.isSigned())throw new Error("TX could not be fully signed.");const o=n.toTX();if(o.getSigopsCost(n.view)>u.MAX_TX_SIGOPS_COST)throw new Error("TX exceeds policy sigops.");if(o.getWeight()>u.MAX_TX_WEIGHT)throw new Error("TX exceeds policy weight.");const i=e.length>1?Object.values(e).reduce((t,e)=>({value:t.value+e.value})):e[0],r=o.getFee(n.view),s=i.value+r,a=o.getRate(n.view);if(o.getMinFee()>r)throw new Error(`Fee below minimum value. <br>Minimum: ${p.wmcc(o.getMinFee())} wmcc, but got ${p.wmcc(r)} wmcc`);const l=`<span class="tx-details">${`\n      <table>\n        <tr><th colspan="2">Transaction Summary</th></tr>\n        <tr><td>Transaction Id</td><td long title="${o.txid()}"><a>: ${o.txid()}</a></td></tr>\n        <tr><td>Inputs Count</td><td>: ${o.inputs.length}</td></tr>\n        <tr><td>Outputs Count</td><td>: ${o.outputs.length}</td></tr>\n        <tr><td>Transaction Amount</td><td>: ${p.wmcc(i.value)} wmcc</td></tr>\n        <tr><td>Transaction Fee</td><td>: ${p.wmcc(r)} wmcc</td></tr>\n        <tr><td>Transaction Rate</td><td>: ${p.wmcc(a)} wmcc/kb</td></tr>\n        <tr><td>Net Amount</td><td>: ${p.wmcc(s)} wmcc</td></tr>\n      </table>\n    `}<i class="glyph-icon flaticon-otp"></i>\n      <input type="text" name="otp" class="r_fixedNumber" maxlength="6" placeholder="One Time Password (OTP)"><result></result>\n      <a class="button" confirm>Confirm</a></span>`,d=c.modalBox("leftcontain",l,{transformZ:!0,title:"Transaction Confirmation",type:"confirm"});$("i.flaticon-remove").unbind("click").on("click",function(){$(d).css("-webkit-transform",""),$("modalbox").remove()});const f=this;$("a[confirm]").unbind("click").on("click",async function(t){const e=$(t.target).prev(),n=$(t.target).prev().prev().val();if(!n)return e.html('<span class="error">Error: OTP is required.</span>');if(!f.node.auth.getPassphrase(n))return e.html(`<span class="error">Error: Invalid OTP, number of tried (${f.node.auth.otp.retry} of ${f.node.auth.otp.maxtry})</span>`);$(t.target).remove(),await f.wallet.db.addTX(o),f.wallet.logger.debug("Sending wallet tx (%s): %s",f.wallet.id,o.txid()),await f.wallet.db.send(o);const{otp:i}=f.node.auth.getPassphrase(n,!0);return e.html(`<span>Transaction Sent! Your new OTP: ${i} <i class="glyph-icon flaticon-copy s_resetSendCoin" value="${i}" title="Copy to clipboard"></i>\n        <i class="glyph-icon flaticon-continue s_resetSendCoin s_enterPress" value="${i}" title="Continue without copy"></i></span>`)})}catch(t){const e=`<span>${t.message}</span><a class="button" cancel>Try Again</a>`,n=c.modalBox("leftcontain",e,{transformZ:!0,title:t.type||"TransactionError"});$("a[cancel], i").unbind("click").on("click",function(){$(n).css("-webkit-transform",""),$("modalbox").remove()})}},o.prototype._requestTx=async function(t){const e=$(t.target),n="I"===e.prop("tagName")?e.parent().parent().parent():e.parent().parent(),o=(n.find('input[coin="wmcc"]').val(),n.find("textarea").val(),c.modalBox(n,'<span>Request payment via URI will be available <br>on next major update.</span><a class="button" cancel>Close</a>',{transformZ:!0,title:"Not Available"}));$("a[cancel], i").unbind("click").on("click",function(){$(o).css("-webkit-transform",""),$("modalbox").remove()})},o.prototype._resetSendCoin=function(){$('menubutton[page="menu-top_send-receive-coin"]').removeAttr("active").trigger("click")},o.prototype._signMessage=async function(t){const e=$(t.target).parent().parent(),n=e.find(".address").eq(0).val(),o=e.find(".message").eq(0).val(),i=e.find(".otp").eq(0).val(),r=e.find(".signature").eq(0),s=e.find("result").eq(0);if(s.html(""),r.val(""),e.find(".address").eq(0).hasClass("error"))return;if(!n||!o||!i)return s.html('<span class="error">Error: Address, Message and OTP are required.</span>');const a=this.node.auth.getPassphrase(i);if(!a)return s.html(`<span class="error">Error: Invalid OTP, number of tried (${this.node.auth.otp.retry} of ${this.node.auth.otp.maxtry})</span>`);try{const e=await this.wallet.getPrivateKey(n,a.toString("hex"));if(!e)return s.html('<span class="error">Error: Address is not owned by this wallet.</span>');const l=y.sign(o,e.getPrivateKey(),!0),{otp:c}=this.node.auth.getPassphrase(i,!0);return r.val(l.toString("base64")),s.html(`<span>Your new OTP: ${c} <i class="glyph-icon flaticon-copy" value="${c}" title="Copy to clipboard"></i></span>`)}catch(t){return s.html(`<span class="error">${t}</span>`)}},o.prototype._verifyMessage=function(t){const e=$(t.target).parent().parent(),n=e.find(".address").eq(0).val(),o=e.find(".message").eq(0).val(),i=e.find(".signature").eq(0).val(),r=e.find("result").eq(0);if(r.html(""),!n||!o||!i)return r.html('<span class="error">Error: Address, Message and Signature are required.</span>');try{return y.verify(o,n,i)?r.html("<span>The signature is valid for the address and message.</span>"):r.html('<span class="error">Message failed to verify!</span>')}catch(t){return r.html(`<span class="error">${t}</span>`)}},o.prototype._wallet_getotp=function(t){const e=$(t.target),n=e.parent(),o=n.find('[name="otp"]').eq(0).val(),i=n.find("result").eq(0);if(!o)return;const{passphrase:r,otp:s}=this.node.auth.getPassphrase(o,!0);return r?(e.remove(),i.html(`<span>Your new OTP: ${s} <i class="glyph-icon flaticon-copy s_wallet_changesecret" value="${s}" title="Copy to clipboard"></i>\n    <i class="glyph-icon flaticon-continue s_wallet_changesecret s_enterPress" value="${s}" title="Continue without copy"></i></span>`)):i.html(`<span class="error">Error: Invalid OTP, number of tried (${this.node.auth.otp.retry} of ${this.node.auth.otp.maxtry})</span>`)},o.prototype._wallet_changesecret=function(t){const e=$(t.target).parent().parent().parent().parent(),n=e.find('[name="name"]').eq(0),o=e.find('[name="dob"]').eq(0),i=this.node.auth.hsm.salt.toString("utf8"),r=e.find("walletcontent");r.eq(0).prop("hidden",!0),r.eq(1).removeAttr("hidden"),n.val(this.wallet.id),o.val(i)},o.prototype._wallet_updatesecret=async function(t){const e=$(t.target),n=e.parent().parent().parent().find(".s_wallet_changesecret").eq(0).attr("value"),o=this.node.auth.getPassphrase(n);if(i('input[name="name"], input[name="dob"], input[name*="question_"], input[name*="answer_"]')&&r('input[name="name"]',e)){const t=$('input[name="name"]').val(),n=$('input[name="dob"]').val();let i=[],r={};$('input[name*="question_"], input[name*="answer_"]').each(function(t){t%2==0?r.question=$(this).val():(r.answer=$(this).val(),i.push(r),r={})});const s=await this.node.auth.hsm.encrypt(t,n,i),{lock:a,chksum:l}=f.toObject(s);this.wallet.lock=a,this.wallet.chksum=l,await this.wallet.setPassphrase(o.toString("hex"),s.passphrase.toString("hex")),await this.node.auth.hsm.destroy(),this.hsm={},this._resetWallet(e)}},o.prototype._backupWallet=function(t){const e=$(t.target).parent().parent(),n=e.find('input[type="password"]'),o=e.find('input[name="compress-level"]:checked').val();if(e.find("p").html(""),e.find("result").html(""),e.find(".error").removeClass("error"),n.eq(0).val()!==n.eq(1).val())return n.eq(1).addClass("error"),void n.eq(1).next().html("Password don't match!");const i=this;m.showOpenDialog({properties:["openDirectory"]},async function(t){if(!t)return;const r={input:i.node.walletdb.db.location,output:l.join(t[0],`DONT_RENAME_${i.node.walletdb.suffix}.bak`),level:o,password:n.eq(0).val()},s=new a(r),c=await s.compress();e.find("result").html(`<span>File saved to <a title="${c.path}">${c.path}</a></span>`)})},o.prototype._restoreWallet=function(t){const e=$(t.target).parent().parent().parent().parent(),n=this;m.showOpenDialog({properties:["openFile"]},async function(t){t&&n.restoreWallet(t[0],e)})},o.prototype._dragdropWallet=function(t){t.preventDefault(),t.stopPropagation();const e=$(t.target).closest("dragdrop"),n=e.parent().parent().parent();if("dragover"===t.type)e.css({"background-color":"#DDFFDD"});else if("dragleave"===t.type)e.css({"background-color":"#f9f9f9"});else if("drop"===t.type){const o=t.originalEvent.dataTransfer.files[0].path;this.restoreWallet(o,n),e.css({"background-color":"#f9f9f9"})}},o.prototype.restoreWallet=function(t,e){let n,o;const i=this.node.auth.wallets;try{o=l.parse(t).name.replace("DONT_RENAME_",""),n=this.node.auth.fromSuffix(o)}catch(t){const n=c.modalBox(e,'<span>Invalid wallet backup (.bak) file.</span><a class="button">Try Again</a>',{transformZ:!0,title:"Invalid File"});return void $("a.button, i").unbind("click").on("click",async function(){$(n).css("-webkit-transform",""),$("modalbox").remove()})}if(i.includes(n)){const i=`<span>Wallet <a>${n}</a> is already exists. Do you want to overwrite it?\n      <label>Warning: If you overwrite, all data in the existing wallet will be lost.</label>\n      </span><a class="button" overwrite>Overwrite</a><a class="button" cancel>Cancel</a>`,r=c.modalBox(e,i,{transformZ:!0,title:"Wallet Exists"}),s=this;$("a.button, i").unbind("click").on("click",function(){$(r).css("-webkit-transform",""),$("modalbox").remove(),this.hasAttribute("overwrite")&&s.renderZipPassword(t,o,e,n)})}else this.renderZipPassword(t,o,e,n)},o.prototype.renderZipPassword=function(t,e,n,o){const i=c.modalBox(n,'<span>Enter your password if the password was set:\n    <input type="password" />\n    </span><a class="button" next>Next</a>',{transformZ:!0,title:"Wallet .bak Password",type:"confirm"}),r=this;$("a.button, i").unbind("click").on("click",async function(){const s=$(this).prev().find("input").eq(0).val();if($(i).css("-webkit-transform",""),$("modalbox").remove(),this.hasAttribute("next")){const i={input:t,output:l.join(r.node.walletdb.options.location,`${e}.ldb`),password:s},d=new a(i);d.on("error",t=>{const e=`<span>${t.message}</span><a class="button">Try Again</a>`,o=c.modalBox(n,e,{transformZ:!0,title:t.type});$("a.button, i").unbind("click").on("click",async function(){$(o).css("-webkit-transform",""),$("modalbox").remove()})}),d.on("done",()=>{const t=`<span>Your wallet <a>${o}</a> account successfully restored!</span><a class="button">Ok</a>`,e=c.modalBox(n,t,{transformZ:!0,title:"Wallet Successfully Restored",type:"confirm"});$("a.button, i").unbind("click").on("click",async function(){$(e).css("-webkit-transform",""),$("modalbox").remove()})}),await d.decompress()}})},o.prototype.createWallet=async function(t){const e=$('input[name="name"]').val(),n=$('input[name="dob"]').val();let o=[],i={};if($('input[name*="question_"], input[name*="answer_"]').each(function(t){t%2==0?i.question=$(this).val():(i.answer=$(this).val(),o.push(i),i={})}),this.node.auth.wallets.includes(e)){const n=t.parent().parent(),o=`<span>${w.args(w.Credential.Auth.error.wallet_name_exists.text_1,[`<b style="font-size: 14px;">${e}</b>`])}<br>${w.Credential.Auth.error.wallet_name_exists.text_2}</span><a class="button" cancel>${w.Auth.Button.cancel}</a>`,i=c.modalBox(n,o,{transformZ:!0,title:w.Credential.Auth.error.wallet_name_exists.title});$("a[cancel], i").unbind("click").on("click",function(){$(i).css("-webkit-transform",""),$("modalbox").remove()})}else{const i=Core.walletdb(this.node.walletdb.options);await this.node.ensure(),await this.node.auth.saveWallet(i,this.node.chain,e,n,o),this._resetWallet(t[0])}},o.prototype.loadWallet=async function(){const t=$('select[name="name"]'),e=t.find("option:selected").val(),n=$('input[name="dob"]');this._tempdb=Core.walletdb(this.node.walletdb.options);const o=this.node.auth.toSuffix(e);this._tempdb.suffix(o),this._tempdb.loaded||(await this.node.ensure(),await this.node.auth.tempopen(this._tempdb,this.node.chain)),this.wallet=await this._tempdb.get(e),this.hsm=this.node.auth.hsm,this.decrypt=await this.hsm.decrypt(e,n.val(),this.wallet.lock),this.decrypt.question&&(this.count=1,this.renderHint(),t.attr("disabled","disabled"),n.attr("disabled","disabled")),await this.node.auth.tempclose(this._tempdb)},o.prototype.renderHint=function(){$("render").html(`<holder><i class="glyph-icon flaticon-hint"><counter>${this.count}</counter></i>\n    <input type="text" name="question" value="${this.decrypt.question.toString().replace(/"/g,"&quot;")}" disabled>\n    </holder><holder><i class="glyph-icon flaticon-answer"><counter>${this.count}</counter></i>\n    <input type="password" name="answer" placeholder="${w.Auth.Login.your_answer}"></holder>`),this.count++},o.prototype.processAnswer=async function(t){const e=$('input[name="answer"]').val();if(this.decrypt=await this.hsm.setAnswer(e),this.decrypt.question)return void this.renderHint();if(this.wallet.chksum.toString()===this.decrypt.passphrase.slice(0,4).toString()){const e=this.node.auth.getOTP(this.decrypt.passphrase);return this.node.plugins.miningpool&&this.node.plugins.miningpool.payment.addWallet(this.wallet,this.decrypt.passphrase),this.node.auth.otp.enable?await this.renderOTP(e,t,this.wallet):await this.setupNode(this.wallet),void(0===this.node.miner.addresses.length&&this.node.miner.addAddress(this.wallet.getReceive("hex").toString()))}const n=t.parent(),o=`<span>${w.Credential.Auth.error.invalid_credential.text_1}<br>${w.Credential.Auth.error.invalid_credential.text_2}</span>\n    <a class="button">${w.Auth.Button.try_again}</a>`,i=c.modalBox(n,o,{transformZ:!0,title:w.Credential.Auth.error.invalid_credential.title}),r=$(i).find("modalbox").find("i, a"),s=this;for(let e=0;e<r.length;e++)$(r[e]).unbind("click").on("click",function(){$(i).css("-webkit-transform",""),s._resetWallet(t)})},o.prototype.renderOTP=async function(t,e,n){this.node.auth.logged&&$("body").prepend('<div id="fullmodal" style="height:100%;width:100%;background:rgba(0,0,0,0.3);position:absolute;z-index:1;"></div>');let o="<span><a>Click icon below to copy OTP to clipboard<br>or click Close to continue without copying them.</a><br>";o+=`<b>${t}</b><i class="glyph-icon flaticon-copy" title="Copy to clipboard" value="${t}"></i><br>`,o+='<note>** Please make sure to write down the OTP somewhere.</note><br><a class="button s_enterPress">Close</a></span>';const i=c.modalBox(e.parent(),o,{transformZ:!0,title:"One Time Password (OTP)",type:"confirm"}),r=$(i).find("modalbox").find("i, a.button");$(i).children().addClass("otp");const s=this;for(let t=0;t<r.length;t++)$(r[t]).unbind("click").on("click",async function(){await s.setupNode(n),$("body").find("#fullmodal").remove()})},o.prototype.setupNode=async function(t){this.node.info.wallet=t,await this.node.walletdb.unbind(),await this.node.close(),this.node.walletdb=this._tempdb;for(let t of this.node.http.mounts)t.ctx.walletdb=this.node.walletdb,t.handler.walletdb=this.node.walletdb;this.node.miner.address=this.node.miner.getAddress()||t.getAddress(),this.node.attach=new h(this.node),await this.node.ensure(),await this.node.open(),await this.hsm.destroy(),await this.node.connect(),this.node.auth.logged=!0,this.node.auth.load(),g.init(this.node),this.updater=new _,this.updater.start();try{await t.zap(t.account.name,u.MAX_TX_SIGOPS_COST)}catch(t){}this.node.startSync()},o.prototype._enterPress=function(t){13==t.keyCode&&$(".s_enterPress").addClass("active").delay(100).queue(function(){$(this).removeClass("active").click().dequeue()})},o.prototype._escapePress=function(t){27==t.keyCode&&$(".s_escapePress").click()},o.prototype._configSave=function(t){const e=$(t.target),n=e.parent(),o=this.node.config.getDefault();let i="# Wmcc configuration file (wmcc.conf)\n";for(let t of Object.keys(o)){i+=`\n#\n# ${t}\n#\n\n`;for(let e in o[t]){const r=o[t][e][0],s=o[t][e][1],a=n.find(`input[name="${e}"], checkbox[name="${e}"]`).eq(0);let l;i+=`${r}`===`${l="bool"===s?$(a).prop("checked"):$(a).val()}`?`# ${e}: ${l}\n`:`${e}: ${l}\n`}}this.node.config.write("wmcc.conf",i),$(e).prev().html("Updated! Please relogin / restart wallet to apply this configuration.").show()},o.prototype._stratumRemoveWorker=function(t){const e=$(t.target).parent().parent().find("td").eq(0).text();this.node.stratum.userdb.remove(e),this._resetWallet(t)},o.prototype._stratumAddWorker=function(t){const e=$(t.target).parent().parent(),n=e.find(".workername").val(),o=e.find(".workerpass").val();e.find("p").removeClass().html("").hide();try{this.node.stratum.userdb.add({username:n,password:o})}catch(t){return void e.find("p").eq(0).addClass("error").html(t.message).show()}this._resetWallet(t)},t.exports=o},function(t,e){t.exports=require("assert")},function(t,e,n){"use strict";function o(t){if(!(this instanceof o))return new o(t);s.call(this),this.options=new i(t),this.input=this.options.input,this.output=this.options.output,this.level=this.options.level,this.password=this.options.password,this.files=this.options.files,this.locker=new h}function i(t){if(!(this instanceof i))return new i(t);this.input=null,this.output=null,this.level=5,this.password=null,this.files=[],t&&this.fromOptions(t)}const r=n(10),s=n(18),a=n(19),l=n(20),c=n(3),d=n(0),{PassThrough:p}=n(21),u=Core.utils.encoding,h=Core.utils.Lock;Object.setPrototypeOf(o.prototype,s.prototype),o.prototype.addFiles=function(t){r(t instanceof Array);for(let e of t)this.addFile(e)},o.prototype.addFile=function(t){r("string"==typeof t),"LOCK"!==t&&(this.files.includes(t)||this.files.push(t))},o.prototype.removeFiles=function(t){r(t instanceof Array);for(let e of t)this.addFile(e)},o.prototype.remove=function(t){r("string"==typeof t),this.files=this.files.filter(e=>e!==t)},o.prototype.compress=async function(){const t=await this.locker.lock();try{return await this._compress()}finally{t()}},o.prototype._compress=async function(){const t=await this.readDir(this.input);t.length&&this.addFiles(t);const e=this.compile();return this.zip(e)},o.prototype.decompress=async function(){const t=await this.locker.lock();try{await this._decompress()}finally{t()}},o.prototype._decompress=async function(){const t=await this.readFile(this.input),e=this.unzip(t);this.mkdirp(this.output),this.readBuffer(e)},o.prototype.readBuffer=function(t){const e=this;let n=Buffer.alloc(0);t.on("error",function(t){e.emit("error",{type:"Wrong Password",message:"The password you have entered is incorrect. Please try again."})}).on("data",function(t){n=Buffer.concat([n,t])}).on("end",async function(){let t=1,o=0;const i=n.readInt16LE(t);try{for(let r=0;r<i;r++){t=0===r?3:o+t+4,o=n.readInt8(t);const s=n.slice(t+1,o+t+1);t=o+t+1,o=n.readInt32LE(t);const a=n.slice(t+4,o+t+4);await e.writeFile(s.toString("utf8"),a),r===i-1&&e.emit("done")}}catch(t){e.emit("error",{type:"File Corrupted",message:"The file is corrupted and cannot be opened."})}})},o.prototype.writeFile=function(t,e){const n=d.join(this.output,t);return new Promise(function(t,o){c.writeFile(n,e,e=>{e?o(e):t()})})},o.prototype.readDir=function(t){return new Promise(function(e,n){c.readdir(t,(t,o)=>{t?n(t):e(o)})})},o.prototype.readFile=function(t){return new Promise(function(e,n){c.readFile(t,(t,o)=>{t?n(t):e(o)})})},o.prototype.mkdirp=function(t,e){const n=d.dirname(t);c.existsSync(n)||this.mkdirp(n),c.existsSync(t)&&!e&&this.backup(t);try{c.mkdirSync(t)}catch(t){}},o.prototype.backup=async function(t){const e=this.output,n=this.input,o=t.split(d.sep),i=new Date(Date.now()).toISOString().replace(/:/g,"-");o[o.length-1]=i+"-"+o[o.length-1],o.splice(o.length-1,0,"backup");const r=d.join.apply(null,o);o.splice(o.length-1,1);const s=d.join.apply(null,o);this.mkdirp(s,!0),this.output=r,this.input=t,await this.compress(),this.output=e,this.input=n,this.mkdirp(t,!0)},o.prototype.unzip=function(t){const e=a.createDecipher("aes128",this.password),n=new p,o=l.createGunzip();return n.end(t),n.pipe(e).pipe(o)},o.prototype.compile=function(){const t=u.U8(1),e=u.U16(this.files.length);let n=Buffer.concat([t,e]);for(let t of this.files){const e=d.join(this.input,t),o=c.readFileSync(e),i=u.U32(o.length),r=Buffer.from(t,"utf8");n=Buffer.concat([n,Buffer.from([r.length]),r]),n=Buffer.concat([n,i,o])}return n},o.prototype.zip=function(t){r(t instanceof Buffer);const e=l.gzipSync(t,{level:this.level}),n=a.createCipher("aes128",this.password),o=c.createWriteStream(this.output),i=new p;return i.end(e),i.pipe(n).pipe(o)},i.prototype.fromOptions=function(t){if(null!=t.input&&(r("string"==typeof t.input),this.input=t.input),null!=t.output&&(r("string"==typeof t.output),this.output=t.output),null!=t.level&&("string"==typeof t.level&&(t.level=parseInt(t.level)),r("number"==typeof t.level),this.level=t.level),null!=t.password&&(r("string"==typeof t.password),this.password=t.password),null!=t.files)if(t.files instanceof Array)for(let e of t.files)r("string"==typeof e),this.files.includes(e)&&this.files.push(e);else r("string"==typeof t.files),this.files.push(t.files)},process.on("uncaughtException",function(t){}),t.exports=o},function(t,e,n){"use strict";function o(){if(!(this instanceof o))return new o;this.updater=s}function i(t,e){$(t).length?e($(t)):setTimeout(()=>{i(t,e)},1)}const{remote:r}=n(2),{autoUpdater:s}=r.require("electron-updater");o.prototype.start=function(){i("updatecontent",async t=>{this.updater.on("update-available",e=>{t.show(),t.addClass("progress"),t.html('<table><tr><td><span class="loading"><span class="progress_holder"><span class="progress_bar"></span>\n        <span id="prog_status">Downloading update: 0%</span></span></span></td></tr></table>')}),this.updater.on("update-not-available",e=>{t.show(),t.html("<h3>Your client application is up to date.</h3>"),setTimeout(()=>{t.hide()},8e3)}),this.updater.on("download-progress",e=>{t.show(),t.hasClass("progress")||(t.addClass("progress"),t.html('<table><tr><td><span class="loading"><span class="progress_holder"><span class="progress_bar"></span>\n          <span id="prog_status">Downloading update: 0%</span></span></span></td></tr></table>'));const n=`${e.percent.toFixed(2)}%`;$(".progress_bar").css("width",n),$("#prog_status").html(`Downloading update: ${n} | ${(e.bytesPerSecond/1e6).toFixed(3)} MB/SEC`)}),this.updater.on("update-downloaded",e=>{t.show(),t.removeClass("progress").addClass("completed"),t.html(`<table><tr><td><div>Update available! WMCC Client ${e.version}, you must restart this application to apply new update.</div></td>\n        <td><submit>Restart Now</submit></td><td></td><td><submit>Later</submit></td></tr></table>`);const n=t.find("submit");n.eq(0).click(()=>{this.updater.quitAndInstall(!0,!0)}),n.eq(1).click(()=>{t.hide()})}),this.updater.on("error",e=>{t.hide(),console.log(e)}),function(t,e){const n=Date.now();e.hide(),setInterval(t,432e5),"undefined"==typeof Storage?t():(!localStorage.WMCC_Update||localStorage.WMCC_Update<n-6e5)&&(localStorage.WMCC_Update=n,t())}(this.updater.checkForUpdatesAndNotify,t)})},t.exports=o},function(t,e){t.exports=require("os")},function(module,exports,__webpack_require__){"use strict";function Browser(t,e){if(!(this instanceof Browser))return new Browser(t,e);this.doc=e,this.node=null,this.submit=null,this.init(t)}const fs=__webpack_require__(3),Window=__webpack_require__(4),Loader=__webpack_require__(6),Submit=__webpack_require__(9),Path=__webpack_require__(0);Browser.prototype.init=function init(node){this.node=new node.FullNode({config:!0,argv:!0,env:!0,logFile:!0,logConsole:!0,logBrowser:!0,logLevel:"debug",db:"leveldb",persistent:!0,workers:!0,listen:!0,loader:eval("require")});try{const pluginPath=Path.resolve(__dirname,"../../plugin");fs.readdirSync(pluginPath).forEach(f=>{if(".asar"===Path.extname(f)){const plugin=eval("require")(Path.join(pluginPath,f));this.node.use(plugin)}})}catch(t){}this.submit=new Submit(this.node),this.doc.onload=Loader.init(this.submit.node)},module.exports=Browser},function(t,e,n){"use strict";function o(t){const e=r.hash160(t),n=Buffer.from(s.MAGIC_STRING+e,"utf8");return r.hash256(n)}const i=n(24),r=Core.crypto.digest,s=Core.http.RPCBase.MAGIC_STRING,a=Core.primitives.Address,l=Core.crypto.ccmp;t.exports={magicHash:o,sign:function(t,e,n){const r=o(t),s=i.sign(r,e);return function(t,e,n){return n&&(e+=4),Buffer.concat([Buffer.from([e+27]),t])}(s.signature,s.recovery,n)},verify:function(t,e,n){Buffer.isBuffer(n)||(n=new Buffer(n,"base64"));const s=function(t){if(65!==t.length)throw new Error("Invalid signature length");const e=t.readUInt8(0)-27;if(e>7)throw new Error("Invalid signature parameter");return{compressed:!!(4&e),recovery:3&e,signature:t.slice(1)}}(n),c=o(t),d=i.recover(c,s.signature,s.recovery,s.compressed),p=r.hash160(d),u=a.fromString(e);return l(p,u.hash)}}},function(t,e,n){"use strict";const o=e;wmcc_core.cache=function(){},o.Browser=n(17),o.browser=n(14),o.eventbind=n(7),o.loader=n(6),o.submit=n(9),o.worker=n(25),o.window=n(4),o.tools=n(26),o.language=n(1),o.message=n(15),o.update=n(27),o.updater=n(12),o.installer=n(8),o.utils=n(28),o.zlib=n(11),global.wmcc_desktop=o},function(t,e,n){"use strict";e.Browser=n(14),e.Window=n(4),e.Loader=n(6),e.EventBind=n(7),e.Submit=n(9)},function(t,e){t.exports=require("events")},function(t,e){t.exports=require("crypto")},function(t,e){t.exports=require("zlib")},function(t,e){t.exports=require("stream")},function(t,e){t.exports=require("wmcc-node")},function(t,e){t.exports=require("wmcc-credential")},function(t,e){t.exports=require("secp256k1")},function(t,e,n){"use strict";function o(t){if(!(this instanceof o))return new o(t);this.options=new i(t),this.path=this.options.path,this.file=this.options.file,this.windowOptions=this.options.window,this.window=null}function i(t){if(!(this instanceof i))return new i(t);this.window={width:300,height:300,maximizable:!1,resizable:!1,webPreferences:{devTools:!0,nodeIntegrationInWorker:!1}},this.path=null,this.file=null,this.fromOptions(t)}const r=n(10),s=n(0),a=n(5),{app:l,BrowserWindow:c}=n(2);o.prototype.start=function(){let t=this;l.on("ready",function(){t.window=new c(t.windowOptions),t.window.loadURL(a.format({pathname:s.join(__dirname,t.file),protocol:"file:",slashes:!0})),t.window.openDevTools(),t.window.on("closed",function(){t.window=null})}),l.on("window-all-closed",function(){"darwin"!==process.platform&&l.quit()}),l.on("activate",function(){null===t.window&&this.start()})},o.prototype.setPath=function(t){this.path=t},o.prototype.setFile=function(t){this.file=t},i.prototype.fromOptions=function(t){return r(t,"Options are required."),null!=t.window&&Object.assign(this.window,t.window),null!=t.path&&(r("string"==typeof t.path),this.path=t.path),null!=t.file&&(r("string"==typeof t.file),this.file=t.file),this},t.exports=o},function(t,e,n){"use strict";e.Language=n(1)},function(t,e,n){"use strict";e.Updater=n(12),e.Installer=n(8)},function(t,e,n){"use strict";e.Zlib=n(11)}]);