module.exports=function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=47)}([function(t,e){t.exports=require("path")},function(t,e){t.exports=require("assert")},function(t,e){t.exports=require("electron")},function(t,e){t.exports=require("stream")},function(module,exports,__webpack_require__){"use strict";const Default=eval("require")("./language.json");let Lang,Config,User;const langRoot="../../../languages/";try{Config=eval("require")(`${langRoot}config.json`),User=eval("require")(`${langRoot}${Config.default.client}-client.json`)}catch(t){console.log("TODO: Err.System.Notification")}Lang=User instanceof Object?Object.assign({},Default,User):Default,module.exports=Lang,module.exports.args=function(t,e){Array.isArray(e)||(e=[e]);for(var n in e)t=t.replace(`{${n}}`,e[0]);return t},module.exports.auto=function(t,e,n){$(e).html($(e).html().replace(/\{\{(.*?)\}\}/g,function(e,r){return n?Lang[n][t][r]:Lang[t][r]}))},module.exports.replace=function(t,e,n){return t.replace(/\{\{(.*?)\}\}/g,function(t,r){return n?Lang[n][e][r]:Lang[e][r]})}},function(t,e){t.exports=require("url")},function(t,e){t.exports=require("fs")},function(t,e,n){"use strict";function r(){if(!(this instanceof r))return new r;this.files=[],this.root=i.join(__dirname,"../../"),this.init()}n(8);const o=n(6),i=n(0);r.prototype.init=function(){const t=o.readdirSync(this.root).filter(t=>".temp"===i.extname(t));this.install(t)},r.prototype.install=function(t){for(let e of t){const t=i.join(this.root,i.basename(e,".temp")),n=i.join(this.root,e);o.unlink(t,e=>{o.rename(n,t,t=>{})})}},t.exports=r},function(t,e){t.exports=require("os")},function(t,e,n){try{var r=n(20);if("function"!=typeof r.inherits)throw"";t.exports=r.inherits}catch(e){t.exports=n(79)}},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);c.call(this,t),u.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",o)}function o(){this.allowHalfOpen||this._writableState.ended||s(i,this)}function i(t){t.end()}var s=n(19),a=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=r;var l=n(14);l.inherits=n(9);var c=n(36),u=n(39);l.inherits(r,c);for(var h=a(u.prototype),p=0;p<h.length;p++){var d=h[p];r.prototype[d]||(r.prototype[d]=u.prototype[d])}Object.defineProperty(r.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),r.prototype._destroy=function(t,e){this.push(null),this.end(),s(e,t)}},function(t,e,n){"use strict";function r(t){if(!(t instanceof Object))throw new TypeError(s.error.options_must_be_object);r._init(t)}const o=n(0),i=n(5),s=n(4).Tools.Window,{app:a,BrowserWindow:l,ipcMain:c,dialog:u,nativeImage:h}=n(2),p=n(7);let d,f;const m={width:900,height:600,maximizable:!1,resizable:!1,webPreferences:{devTools:!1},icon:h.createFromPath(o.join(__dirname,"../source/image/favicon.png"))};r._init=function(t){f=m,t&&Object.assign(f,t)},r._start=function(){p(),(d=new l(f)).loadURL(i.format({pathname:o.join(__dirname,"../source/html/index.htm"),protocol:"file:",slashes:!0})),d.on("closed",function(){d=null}),c.on("window-size",function(t,e){var n=f.width,r=f.height;n>e.width&&r>e.height&&n!=e.width&&d.setSize(n-(e.width-n),r-(e.height-r))})},r.prototype.start=function(){a.on("ready",r._start),a.on("window-all-closed",function(){"darwin"!==process.platform&&a.quit()}),a.on("activate",()=>{null===d&&r._start()})},t.exports=r},function(t,e){t.exports=require("events")},function(t,e,n){function r(t,e){for(var n in t)e[n]=t[n]}function o(t,e,n){return s(t,e,n)}var i=n(78),s=i.Buffer;s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?t.exports=i:(r(i,e),e.Buffer=o),r(s,o),o.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return s(t,e,n)},o.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=s(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},o.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return s(t)},o.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i.SlowBuffer(t)}},function(t,e){function n(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===n(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===n(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===n(t)},e.isError=function(t){return"[object Error]"===n(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=Buffer.isBuffer},function(module,exports,__webpack_require__){"use strict";function Loader(t,e){if(!(this instanceof Loader))return new Loader;this.locker=new Lock,this.element=t,this.type=e,this.events=[]}function upperFirst(t){return t[0].toUpperCase()+t.slice(1)}const{ipcRenderer:ipcRenderer}=__webpack_require__(2),Remote=__webpack_require__(2).remote,FileSystem=__webpack_require__(6),Path=__webpack_require__(0),EventBind=__webpack_require__(16),Menu=Remote.Menu,Windows=Remote.getCurrentWindow(),Langs=__webpack_require__(4),Lang=Langs.Browser.Loader,Lock=Core.utils.Lock;Loader.init=function(t){const e=new Loader(document.body,"page");t.loader=e,e.node=t,t.eventbind||(t.eventbind=new EventBind(t)),e._find()},Loader.reload=function(){location.reload()},Loader.prototype._find=function(){$(this.element).is("[page]")?(this.type="page",this._load()):$(this.element).is("[module]")&&(this.type="module",this._load());const t=this;$(this.element).children().each(function(){t.element=this,t._find()})},Loader.prototype._load=async function(){const t=this._getAttribute($(this.element)),e="page"==this.type?`page/${t.page[0]}/${t.page[1]}.htm`:`module/${t.category}/${t.module}.htm`,n=Path.join(`${__dirname}/../source/html/${e}`),r=t.tag?t.tag:this.element;if(t.active){const e=await this.locker.lock();try{const o=await this._readFile(n);return await this._render(r,o,t)}finally{e()}}},Loader.prototype._readFile=async function(t){try{return await FileSystem.readFileSync(t,"utf8")}catch(e){throw new TypeError(Langs.args(Lang.error.file_not_found,t))}},Loader.prototype._getAttribute=function(t){let e={};return $.each(t.get(0).attributes,function(){"page"==this.name?e[this.name]=this.value.split(/_(.+)/):e[this.name]=this.value}),e},Loader.prototype._render=async function _render(element,data,attr){const dom=$(data);for(let t=0;t<dom.length;++t)this.element=dom[t],$(dom[t]).is("toggle")&&(data=await this._toggle(element,dom,$(data),attr,t)),this._find(),$(dom[t]).is("include")&&this._include(element,dom[t]);data=this._replace(data,attr),$(element).html(data);const req=$(element).find("require"),tri=$(element).find("trigger");req.length&&eval("require")(req.attr("src"));const self=this;tri.length&&eval(`(async function() { ${tri.attr("script")} })();`);const el=$(element).find("print");el.length&&this._print(el)},Loader.prototype._toggle=async function(t,e,n,r,o){const i=$("<p></p>").append(e[o]),s=$(e[o]).attr("script").split("::"),a=$(e[o]).attr("on"),l=$(e[o]).attr("cls");let c=0;const u=this;await async function(){return await u.node._call(s[1],s[0])}()||(c^=1);let h=i.children("toggle").find(`[cls="${l}"]`);const p=h.eq(1^c).children("[click]");for(let e=0;e<$(h).length;++e){const n=$(h[e]).html(),o=$(n);for(let i=0;i<o.length;++i)if(this.element=o[i],$(o[i]).is("toggle")){const s=await this._toggle(t,o,$(n),r,i);$(h[e]).eq(i).html(s)}}let d;if(a){const e=a.split("::");this._event(e[0],e[1],h,function(){this.element=t,d=n.map(function(){return this.outerHTML}).get(),u._render(t,d.join("\r\n"),r)})}p&&$(t).unbind().bind("click","[click]",async function(e){if($(e.target).attr("click")){const o=$(e.target).attr("click").split("::");o&&await u.node._call(o[1],o[0]),d=n.map(function(){return this.outerHTML}).get(),u._render(t,d.join("\r\n"),r)}}),h.eq(c).remove();let f="";for(let t=0;t<e.length;t++)f+=t===o?i.html():$(e[t]).prop("outerHTML")||"";return f},Loader.prototype._include=async function(t,e){const n=this,r=Path.join(__dirname,$(e).attr("src"));!async function(){const e=await n._readFile(r);$(t).append(`<script type="text/javascript">${e}<\/script>`)}()},Loader.prototype._replace=function(t,e){return e.page?Langs.replace(t,upperFirst(e.page[1]),upperFirst(e.page[0])):Langs.replace(t,upperFirst(e.module),upperFirst(e.category))},Loader.prototype._print=async function(t){let e;for(let n=0;n<t.length;n++){const r=$(t[n]),o=r.html().split("::"),i=Object.assign({},o.slice(2));if(r.is("[on]"))await this.node._on(o[1],o[0],r);else{if(r.is("[emit]"))e=await this.node._emit(o[1],o[0]);else try{e=await this.node._call(o[1],o[0],i)}catch(t){console.log(t),e=r.html()}r.html(e)}}},Loader.prototype._event=function(t,e,n,r){this.events[t]||(this.events[t]=[]);const o=this.node[t].on(e,r);o._events[e]=o._events[e].filter((t,e,n)=>n.includes(t)==e)},ipcRenderer.send("window-size",{width:window.innerWidth,height:window.innerHeight});const SelectionText=Menu.buildFromTemplate([{label:Lang.context_menu.copy,role:"copy"},{type:"separator"},{label:Lang.context_menu.selectall,role:"selectall"}]),SelectionInput=Menu.buildFromTemplate([{label:Lang.context_menu.undo,role:"undo"},{label:Lang.context_menu.redo,role:"redo"},{type:"separator"},{label:Lang.context_menu.cut,role:"cut"},{label:Lang.context_menu.copy,role:"copy"},{label:Lang.context_menu.paste,role:"paste"},{type:"separator"},{label:Lang.context_menu.selectall,role:"selectall"}]);Windows.webContents.on("context-menu",(t,e)=>{const{isEditable:n}=e;n&&SelectionInput.popup(Windows)}),window.oncontextmenu=function(t){""!=window.getSelection()&&2===t.button&&SelectionText.popup(Windows)},document.addEventListener("keydown",function(t){t.ctrlKey&&t.shiftKey&&123===t.which?Windows.toggleDevTools():t.ctrlKey&&t.shiftKey&&116===t.which&&location.reload()}),["drop","dragover"].map(t=>{window.addEventListener(t,t=>(t.preventDefault(),!1),!1)}),module.exports=Loader},function(module,exports,__webpack_require__){"use strict";function EventBind(t){if(!(this instanceof EventBind))return new EventBind(t);this.node=t,t.eventbind=this,this.init()}function checkAddress(t,e,n){const r=$(t.target),o=r.siblings("p"),i=r.val();if(o.html("").removeClass("error"),highlightInput(r,0),"focusin"!==t.type)try{if(i){const t=Address.fromString(i);if(e&&!e.includes(t.getScriptType()))return o.html(n).addClass("error"),void highlightInput(r,1,1);highlightInput(r,1,0)}}catch(n){o.html("Invalid WMCC Address").addClass("error"),highlightInput(r,1,1)}}function isNumeric(t){return!isNaN(parseFloat(t))&&isFinite(t)}function toNumeric(t){return!!isNumeric(t)&&parseFloat(t)}function waitElement(t,e){$(t).length?e($(t)):waitElement(t,e)}function highlightInput(t,e,n){const r=["focus","error"];Array.isArray(t)||(t=[t]);for(let o=0;o<t.length;o++)switch(e){case 0:for(let e=0;e<r.length;e++)t[o].removeClass(r[e]);break;case 1:t[o].addClass(r[n])}}function swapCoin(t){t.blur(function(){let e,n;const r=t.attr("coin");switch(n=toNumeric(t.val()),r){case"wmcc":e=t.siblings('[coin="btc"]');try{n=(n=(n=new BigNum(n)).div(1e4)).toNumber()}catch(t){}break;case"btc":e=t.siblings('[coin="wmcc"]');try{n=(n=(n=new BigNum(n)).mul(1e4)).toNumber()}catch(t){}}let o=[e,e.next()];highlightInput(o,1,0),n||(n="",0===parseFloat(t.val())&&(t.val(""),o.push(t,t.next())),highlightInput(o,0)),e.val(n)})}function getSend(t){const e=t.parent().parent(),n=e.find(".address:first"),r=e.find('input[coin="wmcc"]');return!(!n.val()||!r.val()||n.hasClass("error")||r.hasClass("error"))&&{addr:n.val(),val:r.val()}}const Address=Core.primitives.Address,Util=Core.utils.util,BN=Core.crypto.BN,Calendar=eval("require")("../lib/vendor").calendar,Langs=__webpack_require__(4),{clipboard:clipboard}=__webpack_require__(2);let target={},calendar,calendars=null;BigNum.config({DECIMAL_PLACES:7});const Event=[["click","menubutton, tabbutton, menuhidden","_toggleActive"],["click",".flaticon-copy","_iconCopy"],["click",".flaticon-paste","_iconPaste"],["focus",".r_calendar","_calendar"],["mouseenter mouseleave focus blur",".r_togglePassword","_togglePassword"],["keyup change",".r_maxbuffer","_maxBuffer"],["keydown change",".r_isname","_isName"],["keydown change",".r_digitdash","_digitdash"],["keydown change",".r_fixedNumber","_fixedNumber"],["click",".r_secret_insert","_insertSecret"],["click",".r_wallet_remove","_removeSecret"],["focus blur",".r_checkAddress","_checkAddress"],["focus blur",".r_checkPubKeyHashAddress","_checkPubKeyHashAddress"],["click",".r_walletManageAddress","_walletManageAddress"],["keyup change",".r_checkAmount","_checkAmount"],["click",".r_copyAddress","_copyAddress"],["click",".r_addAddress","_addAddress"],["click",".r_deleteAddress","_deleteAddress"],["click",".r_walletGetHistory","_walletGetHistory"],["click keyup",".r_expSearch","_expSearch"],["click",".r_goToExp","_goToExp"],["click",".r_goExpHome","_goExpHome"],["click",".r_genGotoAddress","_genGotoAddress"],["click",".r_genGotoAddresses","_genGotoAddresses"],["click keyup",".r_genSearchAddress","_genSearchAddress"],["click keyup",".r_menuLogout","_menuLogout"]];EventBind.prototype.init=function(){const t=this;for(let e in Event)$(document).on(Event[e][0],Event[e][1],function(n){t[Event[e][2]](n,this)})},EventBind.prototype.render=function(t,e,n){this.node.loader._render(t,e,n)},EventBind.prototype._toggleActive=function(t){$(t.target).attr("active")||($(t.target).attr("active",!0).siblings().removeAttr("active"),target={},this.node.loader.element=$(t.target),this.node.loader._find())},EventBind.prototype._iconCopy=function(t){let e;const n=$(t.target),r=n.attr("value"),o=n.attr("type");if(o){const t=(e="next"===o?n.next("input, textarea"):n.prev("input, textarea")).prop("disabled");$(e).prop("disabled",!1).select(),document.execCommand("copy"),t&&$(e).prop("disabled",!0)}else{const t=$("<input style='top:-9999px;position:absolute;'>");$("body").append(t),r?t.val(r).select():n.hasClass("next")?t.val(n.next().html()).select():n.hasClass("prev")&&t.val(n.prev().html()).select(),document.execCommand("copy"),t.remove()}},EventBind.prototype._iconPaste=function(t){const e=$(t.target),n=e.attr("type");n&&("next"===n?e.next("input, textarea").select():e.prev("input, textarea").select(),document.execCommand("paste"))},EventBind.prototype._calendar=function(t){if(calendars===t.target)return!1;calendars=t.target,calendar&&calendar.destroy(),$(".pika-single").remove();const e=$(t.target).attr("date")||"Jan 01 1970",n=$(t.target).attr("minDate")||"Jan 01 1900";calendar=new Calendar({field:calendars,firstDay:1,position:"top right",defaultDate:new Date(e),minDate:new Date(n),maxDate:new Date,yearRange:[1900,2020],format:"DD-MM-YYYY",disableDayFn:!0})},EventBind.prototype._togglePassword=function(t){$(t.target).is(":disabled")?"mouseenter"===t.type?$(t.target).attr("type","text"):$(t.target).attr("type","password"):"focusin"===t.type?$(t.target).attr("type","text"):"focusout"===t.type&&$(t.target).attr("type","password")},EventBind.prototype._maxBuffer=function(t){const e=$(t.target),n=target,r=e.prop("name"),o=Buffer.byteLength(e.val());if(e.val()){let i=-1!==e.attr("name").indexOf("question")&&this.node.auth.hsm.length?this.node.auth.hsm.length:32;if(o>i){if(n[r]){if(-1!==$.inArray(t.keyCode,[8,9,13,27,46,109,111,189,191])||!(65!==t.keyCode&&67!==t.keyCode||!0!==t.ctrlKey&&!0!==t.metaKey))return;t.preventDefault()}else EventBind.tooltip(e,Langs.Credential.Auth.error.exceed_max_size,{toggleAnimation:5}),t.preventDefault();setTimeout(function(){e.val(Buffer.from(e.val()).toString("utf8",0,i))},1)}else n[r]&&o!==i&&n[r].stop().remove()}else n[r]&&n[r].stop().remove()},EventBind.prototype._isName=function(t){" "===$(t.target).val().substr(-1)&&32===t.keyCode&&t.preventDefault(),-1!==$.inArray(t.keyCode,[8,9,13,27,32,46,109,110,189])||65===t.keyCode&&(!0===t.ctrlKey||!0===t.metaKey)||t.keyCode>=35&&t.keyCode<=40||(t.shiftKey||t.keyCode<48||t.keyCode>57)&&(t.keyCode<96||t.keyCode>105)&&(t.shiftKey||190!==t.keyCode)&&(t.keyCode<65||t.keyCode>90)&&t.preventDefault()},EventBind.prototype._digitdash=function(t){-1!==$.inArray(t.keyCode,[8,9,13,27,46,109,111,189,191])||65===t.keyCode&&(!0===t.ctrlKey||!0===t.metaKey)||t.keyCode>=35&&t.keyCode<=40||(t.shiftKey||t.keyCode<48||t.keyCode>57)&&(t.keyCode<96||t.keyCode>105)&&t.preventDefault()},EventBind.prototype._fixedNumber=function(t){let e=t.keyCode||t.which;e>=96&&e<=105&&(e-=48);const n=$(t.target).val(),r=110===e||190===e?".":String.fromCharCode(e);-1!==$.inArray(e,[8,9,13,27,46,189])||65===e&&(!0===t.ctrlKey||!0===t.metaKey)||e>=35&&e<=40||(isNumeric(`${n}${r}`)&&32!==t.keyCode||t.preventDefault(),(t.shiftKey||t.keyCode<48||t.keyCode>57)&&(t.keyCode<96||t.keyCode>105)&&110===t.keyCode&&190===t.keyCode&&t.preventDefault())},EventBind.prototype._insertSecret=function(t,e){let n=($(t.target).parent().parent().find("input").length-4)/2;const r=EventBind.emptyInput(`input:lt(${2*n+2})`);if(n+=1,r instanceof Array)for(let t in r)EventBind.tooltip(r[t],"*Required");else{let t=$("#wallet_secret").html();const r=$(e).prev();t=t.replace('name="question"',`name="question_${n}"`).replace('name="answer"',`name="question_${n}"`).replace(/\[count\]/g,n),r.parent().find("input:gt("+(2*(n-2)+1)+"):lt(2)").prop("disabled",!0),2==n?$(t).insertAfter(r).hide().slideDown(300):(r.find(".flaticon-remove").remove(),r.prev().find(".flaticon-remove").remove(),r.prev().prev().slideUp(300).prev().slideUp(300,function(){$(t).insertAfter(r).hide().slideDown(300)}),this.node.auth.getMaxLock()-2<n-1&&$(e).remove())}},EventBind.prototype._removeSecret=function(){$(".r_wallet_remove:lt(2)").parent().remove()},EventBind.prototype._checkAddress=function(t){checkAddress(t)},EventBind.prototype._checkPubKeyHashAddress=function(t){checkAddress(t,[2,130],"Non-Witness/Pubkeyhash Address")},EventBind.prototype._walletManageAddress=function(t){$('menubutton[page="menu-top_wallet"]').removeAttr("active").click(),setTimeout(function(){waitElement('menubutton[module="manage"]',function(t){$('menubutton[module="manage"]').click()})},1)},EventBind.prototype._checkAmount=function(t){const e=$(t.target),n=$(t.target).next(),r=e.siblings("p"),o=e.val();r.html("").removeClass("error"),highlightInput([e,n],0),"focusin"!==t.type&&(o?isNumeric(o)?highlightInput([e,n],1,0):(r.html("Invalid Amount").addClass("error"),highlightInput([e,n],1,1)):highlightInput([e,n],0),e.hasClass("h_swapcoin")&&swapCoin(e))},EventBind.prototype._copyAddress=async function(t){const e=$(t.target);clipboard.writeText(e.html());const n=await this.node.info.createReceive();e.html(n)},EventBind.prototype._addAddress=async function(t){const e=$(t.target),n=getSend(e);if(!n)return;let r=e.siblings("table");r.length||(e.after('<p></p><table><tr><th>Recipient Address</th><th>Value</th><th title="Delete">Del.</th></tr></table><p></p>'),r=e.parent().find("table").addClass("outputs")),r.append(`<tr><td title="Address: ${n.addr}">${n.addr}</td>`+`<td title="Value: ${n.val}">${n.val}</td><td><i class="glyph-icon flaticon-remove r_deleteAddress"></i></td></tr>`),e.parent().parent().find("input.address, input.h_swapcoin, input.h_swapcoin + a").each(function(){$(this).val(""),highlightInput($(this),0)})},EventBind.prototype._deleteAddress=async function(t){const e=$(t.target).parent().parent(),n=e.parent().parent();1===e.siblings().length?(n.siblings("p").remove(),n.remove()):e.remove()},EventBind.prototype._walletGetHistory=async function(t){const e=$(t.target),n=e.attr("offset"),r=e.attr("limit");e.parent().parent().html(await this.node.info.getWalletHistory(r,n))},EventBind.prototype._expSearch=async function(t){const e=$(t.target),n="click"==t.type?e.prev().val():e.val();if(13!=t.keyCode&&"INPUT"==t.target.nodeName||!n)return;const r=e.parent().parent().parent().parent();return this.expSearch(n,r)},EventBind.prototype._goExpHome=function(t){$('menubutton[page="menu-top_explorer"]').removeAttr("active").trigger("click")},EventBind.prototype._goToExp=function(t,e){this.node.info.isExpHome(!1),$('menubutton[page="menu-top_explorer"]').removeAttr("active").trigger("click");const n=this;setTimeout(function(){n.node.info.isExpHome(!0),waitElement('bodycontain[category="explorer"]',function(e){const r=$(t.target).val()||$(t.target).attr("value")||$(t.target).html();return n.expSearch(r,e)})},1)},EventBind.prototype._genGotoAddress=async function(t){const e=$(t.target),n=e.html(),r=e.parent().parent().parent().parent().parent().parent().children("print"),o=await this.node.info.setGenSearchAddress(n);this.render(r,o,{category:"address",module:"list"})},EventBind.prototype._genGotoAddresses=async function(t){const e=$(t.target),n=e.attr("limit"),r=e.attr("offset"),o=await this.node.info.getGenAddress(n,r),i=$("addressprint print");this.render(i,o,{category:"address",module:"list"})},EventBind.prototype._genSearchAddress=async function(t){const e=$(t.target),n="click"==t.type?e.prev().val():e.val();if(13!=t.keyCode&&"INPUT"==t.target.nodeName||!n)return;const r=e.parent().parent().next(),o=await this.node.info.setGenSearchAddress(n);this.render(r,o,{category:"address",module:"list"})},EventBind.prototype._menuLogout=async function(t){location.reload()},EventBind.emptyInput=function(t){let e=[],n=0;return $(t).each(function(){n++,$(this).val()||e.push($(this))}),e.length?e:n},EventBind.tooltip=function(t,e,n={}){let r={},o=target;const i=t.prop("name");let s=$(`<tooltip>${e}</tooltip>`);$(t).after(s);let a=$(t).offset().left,l=$(t).offset().top;"right"==n.position?l-=$(t).outerHeight():"top"==n.position?(l-=$(t).outerHeight(),a=a+$(t).outerWidth()-$(s).outerWidth()):(a=a+$(t).outerWidth()+10,l=l+$(t).outerHeight()/2-$(s).outerHeight()/2),r.left=a,r.top=l,s.css(r),n.toggleAnimation&&(o[i]?$(t).on("keyup paste change",function(){s.remove()}):(o[i]=s,o[i].show(0).delay(1e3*n.toggleAnimation).hide(0,function(){delete o[i],$(this).remove()})))},EventBind.modalBox=function(t,e,n={}){const r=`<modalbox><div><span${n.type?' class="'+n.type+'"':""}>${n.title?n.title:""}</span>\n    <i class="glyph-icon flaticon-remove"></i></div><div>${e}</div></modalbox>`,o=$(t).prepend(r);return n.transformZ&&$(t).css("-webkit-transform","translateZ(0)"),o},EventBind.add=function(t,e,n){$(document).on(t,e,n)},EventBind.prototype.expSearch=async function(t,e){const{module:n,data:r}=await this.getExpData(t),o=e.find('menuhidden[category="explorer"]');for(let t of o)$(t).attr("module")===n&&$(t).removeAttr("active").trigger("click");return r||e.find('menuhidden[module="404"]').trigger("click"),r},EventBind.prototype.getExpData=async function(t){if(this.node.info.resetExplorer(),isNumeric(t)){const e=await this.node.info.setExpBlockByHeight(t);return!1!==e&&{module:"block",data:e}}if(64===t.length){const e=await this.node.info.setExpBlockByHash(t);if(!1!==e)return{module:"block",data:e};const n=await this.node.info.setExpTransaction(t);if(!1!==n)return{module:"transaction",data:n};const r=await this.node.info.setExpPending(t);if(!1!==r)return{module:"pending",data:r}}const e=await this.node.info.setExpAddress(t);return!1!==e&&{module:"address",data:e}},module.exports=EventBind},function(t,e){t.exports=require("crypto")},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);this.alg=r.alg.PBKDF2,this.hash=r.hashByVal[1],this.iter=1e4,this.salt=Buffer.alloc(0),this.r=0,this.p=0,this.length=32,this.locker=new a,t&&this.fromOptions(t)}function o(t,e){return t.charCodeAt(Math.floor(e%t.length))}const i=n(1),s=Core.utils.util,a=Core.utils.Lock,l=Core.crypto.cleanse,c=Core.crypto.pbkdf2,u=Core.crypto.scrypt,h=Core.crypto.digest;r.alg={PBKDF2:0,SCRYPT:1},r.algByVal={0:"PBKDF2",1:"SCRYPT"},r.hash={SHA256:0,SHA512:1},r.hashByVal={0:"SHA256",1:"SHA512"},r.prototype.fromOptions=function(t){return i(t),null!=t.alg&&("string"==typeof t.alg?(this.alg=r.alg[t.alg.toUpperCase()],i(null!=this.alg,"Unknown algorithm.")):(i("number"==typeof t.alg),i(r.algByVal[t.alg]),this.alg=t.alg)),null!=t.hash&&("string"==typeof t.hash?(i(null!=r.hash[t.hash.toUpperCase()],"Unknown hash."),this.hash=r.hashByVal[r.hash[t.hash.toUpperCase()]]):(i("number"==typeof t.hash),i(r.hashByVal[t.hash]),this.hash=r.hashByVal[t.hash])),null!=t.iter&&(i(s.isU32(t.iter)),this.iter=t.iter),null!=t.r&&(i(s.isU32(t.r)),this.r=t.r),null!=t.p&&(i(s.isU32(t.p)),this.p=t.p),null!=t.length&&(i(s.isU32(t.length)),this.length=t.length),this},r.prototype.encrypt=async function(t,e,n){const r=await this.locker.lock();try{return await this._encrypt(t,e,n)}finally{r()}},r.prototype._encrypt=async function(t,e,n){if(!t&&!e&&!n)throw new Error("WalletID, DOB and Secret are required.");i(n instanceof Array);for(let t=0;t<n.length;t++)i(n[t]instanceof Object);return this.hashlock=await this.derive(t,e),this.secret(n)},r.prototype.decrypt=async function(t,e,n){const r=await this.locker.lock();try{return await this._decrypt(t,e,n)}finally{r()}},r.prototype._decrypt=async function(t,e,n){if(!t&&!e&&!n)throw new Error("WalletID, DOB and Lock are required.");if(s.isHex(n)){const t=new RegExp(`.{1,${2*this.length+2}}`,"g"),e=n.match(t);n=[];for(let t=0;t<e.length;t++)n[t]=Buffer.from(e[t],"hex")}else if(Buffer.isBuffer(n)){const t=n,e=this.length+1;n=[];for(let r=0;r<t.length/e;r++)n[r]=t.slice(r*e,r*e+e)}for(let t=0;t<n.length;t++)i(n[t].length===this.length+1);return i(n instanceof Array),this.hashlock=await this.derive(t,e),this.answers=Buffer.alloc(0),this.locks=n.slice(0),this.salt=Buffer.from(e,"utf8"),await this.question()},r.prototype.destroy=async function(){const t=await this.locker.lock();try{return await this._destroy()}finally{t()}},r.prototype._destroy=function(){this.hashlock&&(l(this.hashlock),this.hashlock=null),this.answers&&(this.answers=null),this.locks&&(l(this.locks),this.locks=null)},r.prototype.secret=function(t){if(!this.hashlock)return null;let e={},n=Buffer.alloc(0),r=Buffer.alloc(0);e.locks=[];for(let o=0;o<t.length;o++)e.locks[o]=this.lock(Buffer.from(t[o].question)),r=h.sha256(Buffer.from(t[o].answer)),n=h.sha256(Buffer.concat([n,r]));return e.passphrase=this.passphrase(n),e},r.prototype.lock=function(t){if(!this.hashlock)return null;let e;(e=Buffer.alloc(function(t,e){return Math.floor(Math.random()*(e-t+1)+t)}(t.length,this.length),0)).write(t.toString().replace(/\0/g,""),0);const n=this.hashlock.toString("ascii"),r=Buffer.from(e).toString("ascii"),i=Buffer.from(Array.prototype.map.call(n,function(t,e){return t.charCodeAt(0)^o(r,e)}));return Buffer.concat([Buffer.from([e.length]),i])},r.prototype.passphrase=function(t){if(i(Buffer.isBuffer(t)),!this.hashlock)return null;const e=h.sha256(this.hashlock).toString("ascii"),n=h.sha256(t).toString("ascii");return Buffer.from(Array.prototype.map.call(e,function(t,e){return t.charCodeAt(0)^o(n,e)}))},r.prototype.question=async function(){if(!this.hashlock)return null;let t={};if(this.locks.length){const e=this.hashlock.toString("ascii"),n=this.locks[0].slice(1,this.locks[0][0]+1);this.locks.shift(),t.question=Buffer.from(Array.prototype.map.call(n,function(t,n){return String.fromCharCode(t^o(e,n))}).join("").replace(/\0/g,""))}else t.passphrase=this.passphrase(this.answers);return t},r.prototype.setAnswer=function(t){const e=h.sha256(Buffer.from(t)),n=this.answers?Buffer.concat([this.answers,e]):e;return this.answers=h.sha256(n),this.question()},r.prototype.derive=async function(t,e){const n=this.iter,o=this.hash,i=this.r,s=this.p;if("string"==typeof t){Buffer.alloc(this.length,0).write(t.replace(/\0/g,""),0)}switch(Buffer.isBuffer(e)||(e=Buffer.from(e,"utf8")),this.alg){case r.alg.PBKDF2:return await c.deriveAsync(t,e,n,this.length,o);case r.alg.SCRYPT:return await u.deriveAsync(t,e,n,i,s,this.length);default:throw new Error(`Unknown algorithm: ${this.alg}.`)}},r.toObject=function(t){let e;return Array.isArray(t.locks)?e=s.concatArrBuf(t.locks):"string"==typeof t.locks?(i(s.isHex(t.locks)),e=Buffer.from(t.locks,"hex")):e=t.locks,i(Buffer.isBuffer(e)),i(Buffer.isBuffer(t.passphrase)),{lock:e,chksum:t.passphrase.slice(0,4)}},t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,i,s=arguments.length;switch(s){case 0:case 1:return process.nextTick(t);case 2:return process.nextTick(function(){t.call(null,e)});case 3:return process.nextTick(function(){t.call(null,e,n)});case 4:return process.nextTick(function(){t.call(null,e,n,r)});default:for(o=new Array(s-1),i=0;i<o.length;)o[i++]=arguments[i];return process.nextTick(function(){t.apply(null,o)})}}!process.version||0===process.version.indexOf("v0.")||0===process.version.indexOf("v1.")&&0!==process.version.indexOf("v1.8.")?t.exports=r:t.exports=process.nextTick},function(t,e){t.exports=require("util")},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);this.level=r.levels.NONE,this.colors=r.HAS_TTY,this.console=!0,this.browser=!0,this.shrink=!0,this.closed=!0,this.closing=!1,this.filename=null,this.stream=null,this.contexts=Object.create(null),this.locker=new u,t&&this.set(t)}function o(t,e){if(!(this instanceof o))return new o(t,e);s("string"==typeof e),this.logger=t,this.module=e}function i(t){return new Promise((e,n)=>{const r=a.createWriteStream(t,{flags:"a"}),o=()=>{r.removeListener("error",i),r.removeListener("open",s)},i=t=>{try{r.close()}catch(t){}o(),n(t)},s=()=>{o(),e(r)};r.once("error",i),r.once("open",s)})}const s=n(1),a=Core.utils.fs,l=Core.utils.util,c=Core.utils.co,u=Core.utils.Lock;r.HAS_TTY=Boolean(process.stdout&&process.stdout.isTTY),r.MAX_FILE_SIZE=20<<20,r.levels={NONE:0,ERROR:1,WARNING:2,INFO:3,DEBUG:4,SPAM:5},r.levelsByVal=["none","error","warning","info","debug","spam"],r.prefixByVal=["N","E","W","I","D","S"],r.styles=["0","1;31","1;33","94","90","90"],r.prototype.set=function(t){s(t),s(this.closed),"string"!=typeof t?(null!=t.level&&(s("string"==typeof t.level),this.setLevel(t.level)),null!=t.colors&&r.HAS_TTY&&(s("boolean"==typeof t.colors),this.colors=t.colors),null!=t.console&&(s("boolean"==typeof t.console),this.console=t.console),null!=t.browser&&(s("boolean"==typeof t.browser),this.browser=t.browser),null!=t.shrink&&(s("boolean"==typeof t.shrink),this.shrink=t.shrink),null!=t.filename&&(s("string"==typeof t.filename,"Bad file."),this.filename=t.filename)):this.setLevel(t)},r.prototype.open=async function(){const t=await this.locker.lock();try{return await this._open()}finally{t()}},r.prototype._open=async function(){this.filename?this.stream?this.closed=!1:a.unsupported?this.closed=!1:(this.shrink&&await this.truncate(),this.stream=await i(this.filename),this.stream.once("error",this.handleError.bind(this)),this.closed=!1):this.closed=!1},r.prototype.close=async function(){const t=await this.locker.lock();try{return await this._close()}finally{t()}},r.prototype._close=async function(){if(null!=this.timer&&(c.clearTimeout(this.timer),this.timer=null),a.unsupported)return this.closed=!0,void(this.stream=null);if(this.stream){try{this.closing=!0,await function(t){return new Promise((e,n)=>{const r=()=>{t.removeListener("error",o),t.removeListener("close",i)},o=t=>{r(),n(t)},i=()=>{r(),e(t)};t.removeAllListeners("error"),t.removeAllListeners("close"),t.once("error",o),t.once("close",i),t.close()})}(this.stream)}finally{this.closing=!1}this.stream=null}this.closed=!0},r.prototype.truncate=async function(){if(!this.filename)return;if(a.unsupported)return;s(!this.stream);let t;try{t=await a.stat(this.filename)}catch(t){if("ENOENT"===t.code)return;throw t}const e=r.MAX_FILE_SIZE;if(t.size<=e+e/10)return;this.debug("Truncating log file to %d bytes.",e);const n=await a.open(this.filename,"r+"),o=Buffer.allocUnsafe(e);await a.read(n,o,0,e,t.size-e),await a.ftruncate(n,e),await a.write(n,o,0,e,0),await a.close(n)},r.prototype.handleError=function(t){try{this.stream.close()}catch(t){}this.stream=null,this.retry()},r.prototype.reopen=async function(){const t=await this.locker.lock();try{return await this._reopen()}finally{t()}},r.prototype._reopen=async function(){if(!this.stream&&!this.closed&&!a.unsupported){try{this.stream=await i(this.filename)}catch(t){return void this.retry()}this.stream.once("error",this.handleError.bind(this))}},r.prototype.retry=function(){s(null==this.timer),this.timer=c.setTimeout(()=>{this.timer=null,this.reopen()},1e4,this)},r.prototype.setFile=function(t){s("string"==typeof t),s(!this.stream,"Log stream has already been created."),this.filename=t},r.prototype.setLevel=function(t){const e=r.levels[t.toUpperCase()];s(null!=e,"Invalid log level."),this.level=e},r.prototype.error=function(...t){if(this.level<r.levels.ERROR)return;const e=t[0];e instanceof Error?this.logError(r.levels.ERROR,null,e):this.log(r.levels.ERROR,null,t)},r.prototype.warning=function(...t){if(this.level<r.levels.WARNING)return;const e=t[0];e instanceof Error?this.logError(r.levels.WARNING,null,e):this.log(r.levels.WARNING,null,t)},r.prototype.info=function(...t){if(this.level<r.levels.INFO)return;const e=t[0];e instanceof Error?this.logError(r.levels.INFO,null,e):this.log(r.levels.INFO,null,t)},r.prototype.debug=function(...t){if(this.level<r.levels.DEBUG)return;const e=t[0];e instanceof Error?this.logError(r.levels.DEBUG,null,e):this.log(r.levels.DEBUG,null,t)},r.prototype.spam=function(...t){if(this.level<r.levels.SPAM)return;const e=t[0];e instanceof Error?this.logError(r.levels.SPAM,null,e):this.log(r.levels.SPAM,null,t)},r.prototype.log=function(t,e,n){this.closed||this.level<t||(this.writeConsole(t,e,n),this.writeBrowser(t,e,n),this.writeStream(t,e,n))},r.prototype.context=function(t){let e=this.contexts[t];return e||(e=new o(this,t),this.contexts[t]=e),e},r.prototype.writeConsole=function(t,e,n){const o=r.levelsByVal[t];if(s(o,"Invalid log level."),!this.console)return!1;if(!process.stdout){let i=`[${o}] `;return e&&(i+=`(${e}) `),"object"==typeof n[0]?t===r.levels.ERROR?console.error(i,n[0]):console.log(i,n[0]):(i+=l.format(n,!1),t===r.levels.ERROR?(console.error(i),!0):(console.log(i),!0))}let i;if(this.colors){const e=r.styles[t];s(e),i=`[${e}m[${o}][m `}else i=`[${o}] `;return e&&(i+=`(${e}) `),i+=l.format(n,this.colors),i+="\n",t===r.levels.ERROR?process.stderr.write(i):process.stdout.write(i)},r.prototype.writeBrowser=function(t,e,n){const o=r.levelsByVal[t];if(s(o,"Invalid log level."),!this.browser)return!1;let i=`[${o}] `;return e&&(i+=`(${e}) `),"object"==typeof n[0]?t===r.levels.ERROR?console.error(i,n[0]):console.log(i,n[0]):(i+=l.format(n,!1),t===r.levels.ERROR?(console.error(i),!0):("net"!==e&&console.log(i),!0))},r.prototype.writeStream=function(t,e,n){const o=r.prefixByVal[t];if(s(o,"Invalid log level."),!this.stream)return;if(this.closing)return;let i=`[${o}:${l.date()}] `;e&&(i+=`(${e}) `),i+=l.format(n,!1),i+="\n",this.stream.write(i)},r.prototype.logError=function(t,e,n){if(this.closed)return;a.unsupported&&this.console&&t<=r.levels.WARNING&&console.error(n);let o=String(n.message).replace(/^ *Error: */,"");t!==r.levels.ERROR&&(o=`Error: ${o}`),this.log(t,e,[o]),t<=r.levels.WARNING&&this.stream&&this.stream.write(n.stack+"\n")},r.prototype.memory=function(t){const e=l.memoryUsage();this.log(r.levels.DEBUG,t,["Memory: rss=%dmb, js-heap=%d/%dmb native-heap=%dmb",e.total,e.jsHeap,e.jsHeapTotal,e.nativeHeap])},o.prototype.open=function(){return this.logger.open()},o.prototype.close=function(){return this.logger.close()},o.prototype.setFile=function(t){this.logger.setFile(t)},o.prototype.setLevel=function(t){this.logger.setLevel(t)},o.prototype.error=function(...t){if(this.logger.level<r.levels.ERROR)return;const e=t[0];e instanceof Error?this.logError(r.levels.ERROR,e):this.log(r.levels.ERROR,t)},o.prototype.warning=function(...t){if(this.logger.level<r.levels.WARNING)return;const e=t[0];e instanceof Error?this.logError(r.levels.WARNING,e):this.log(r.levels.WARNING,t)},o.prototype.info=function(...t){if(this.logger.level<r.levels.INFO)return;const e=t[0];e instanceof Error?this.logError(r.levels.INFO,e):this.log(r.levels.INFO,t)},o.prototype.debug=function(...t){if(this.logger.level<r.levels.DEBUG)return;const e=t[0];e instanceof Error?this.logError(r.levels.DEBUG,e):this.log(r.levels.DEBUG,t)},o.prototype.spam=function(...t){if(this.logger.level<r.levels.SPAM)return;const e=t[0];e instanceof Error?this.logError(r.levels.SPAM,e):this.log(r.levels.SPAM,t)},o.prototype.log=function(t,e){this.logger.log(t,this.module,e)},o.prototype.context=function(t){return new o(this.logger,t)},o.prototype.logError=function(t,e){this.logger.logError(t,this.module,e)},o.prototype.memory=function(){this.logger.memory(this.module)},r.global=new r,t.exports=r},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);this.node=t,this.wallet=null,this.htm=null,this.decrypt=null,this.count=0,this._tempdb=null,this.init()}function o(t){const e=c.emptyInput(t);if(!(e instanceof Array))return!0;for(let t in e)c.tooltip(e[t],"*Required");return!1}function i(t,e){if(h.isName($(t).val()))return!0;const n=$(e).parent().parent(),r=`<span>${w.Credential.Auth.error.invalid_name.text_1}<br>${w.Credential.Auth.error.invalid_name.text_2}\n    <br>${w.Credential.Auth.error.invalid_name.text_3}</span><a class="button" cancel>${w.Auth.Button.try_again}</a>`,o=c.modalBox(n,r,{transformZ:!0,title:w.Credential.Auth.error.invalid_name.title});$("a[cancel], i").unbind("click").on("click",function(){$(o).css("-webkit-transform",""),$("modalbox").remove()})}function s(t,e){try{return p.wmcoin(t)}catch(t){const n=c.modalBox(e,'<span>Too many decimal point for amount.</span><a class="button" cancel>Try Again</a>',{transformZ:!0,title:"Invalid Amount"});return $("a[cancel], i").unbind("click").on("click",function(){$(n).css("-webkit-transform",""),$("modalbox").remove()}),!1}}n(1);const a=n(23),l=n(0),c=n(16),u=n(18),h=Core.common,p=(Core.primitives.Address,Core.wmcc.Amount),d=Core.protocol.policy,{dialog:f}=n(2).remote,m=(Core.crypto.digest,Core.crypto.secp256k1,Core.crypto.ccmp,n(15)),g=n(33),y=n(34),w=n(4),b=n(25),v={root:"../../",filename:"app.asar",link:"https://raw.githubusercontent.com/WorldMobileCoin/wmcc-desktop/master/update/app.json"};window.addEventListener("unhandledrejection",function(t,e){console.error(t.reason.stack)});const _=[["click",".s_wallet_create","_createWallet"],["click",".s_wallet_login","_loginWallet"],["click",".s_wallet_reset","_resetWallet"],["click",".s_secret_reset","_resetSecret"],["click",".s_createTx","_createTx"],["click",".s_requestTx","_requestTx"],["click",".s_resetSendCoin","_resetSendCoin"],["click",".s_signMessage","_signMessage"],["click",".s_verifyMessage","_verifyMessage"],["click",".s_wallet_getotp","_wallet_getotp"],["click",".s_wallet_changesecret","_wallet_changesecret"],["click",".s_wallet_updatesecret","_wallet_updatesecret"],["click",".s_backupWallet","_backupWallet"],["click",".s_restoreWallet","_restoreWallet"],["dragover dragleave dragenter drop",".s_dragdropWallet","_dragdropWallet"],["keypress","body","_enterPress"],["keyup","body","_escapePress"]];r.prototype.init=function(){const t=this;for(let e in _)$(document).on(_[e][0],_[e][1],function(n){t[_[e][2]](n)})},r.prototype._createWallet=async function(t){const e=$(t.target);e.prop("disabled",!0);o('input[name="name"], input[name="dob"], input[name*="question_"], input[name*="answer_"]')&&i('input[name="name"]',e)&&await this.createWallet(e),e.prop("disabled",!1)},r.prototype._loginWallet=async function(t){const e=$(t.target);e.prop("disabled",!0);const n=$('input[name="answer"');if(!o(`select[name="name"], input[name="dob"]${n.length?', input[name="answer"]':""}`))return e.prop("disabled",!1),!1;n.length?await this.processAnswer(e):await this.loadWallet(),e.prop("disabled",!1)},r.prototype._resetWallet=function(t){const e=t.target?$(t.target):$(t);(e.closest("h1 + holder").length?e.closest("h1 + holder"):e.closest("menu + content")).prev().find('tabbutton[active="true"], menubutton[active="true"]').removeAttr("active").trigger("click")},r.prototype._resetSecret=function(t){this._resetWallet(t)},r.prototype._createTx=async function(t){let e=[];const n=$(t.target).parent().parent(),r=n.find("table.outputs"),o=n.find(".address:first"),i=n.find('input[coin="wmcc"]');let a;if(o.val()&&i.val()&&!o.hasClass("error")&&!i.hasClass("error")){if(!(a=s(i.val().toString(),n)))return;e.push({value:a,address:o.val()})}if(r&&$("tr:not(:first-child)",r).each(function(){const t=$(this).children("td:first").html(),r=$(this).children("td:nth-child(2)").html();(a=s(r,n))&&e.push({value:a,address:t})}),!e.length)return;e=function(t){return[...t.reduce((t,e)=>{let n=t.get(e.address)||0;return t.set(e.address,e.value+n),t},new Map)].map(([t,e])=>({address:t,value:e}))}(e);const l=n.find('input[coin="rate"]');let u;try{u=p.wmcoin(l.val())}catch(t){return l.addClass("error"),void l.next().next().next().html("Too many decimal places.")}const h={outputs:e,rate:u};try{const n=await this.wallet.createTX(h);if(await this.wallet.sign(n,this.decrypt.passphrase.toString("hex")),!n.isSigned())throw new Error("TX could not be fully signed.");const r=n.toTX();if(r.getSigopsCost(n.view)>d.MAX_TX_SIGOPS_COST)throw new Error("TX exceeds policy sigops.");if(r.getWeight()>d.MAX_TX_WEIGHT)throw new Error("TX exceeds policy weight.");const o=e.length>1?Object.values(e).reduce((t,e)=>({value:t.value+e.value})):e[0],i=r.getFee(n.view),s=o.value+i,a=r.getRate(n.view);if(r.getMinFee()>i)throw new Error(`Fee below minimum value. <br>Minimum: ${p.wmcc(r.getMinFee())} wmcc, but got ${p.wmcc(i)} wmcc`);const l=`<span class="tx-details">${`\n      <table>\n        <tr><th colspan="2">Transaction Summary</th></tr>\n        <tr><td>Transaction Id</td><td long title="${r.txid()}"><a>: ${r.txid()}</a></td></tr>\n        <tr><td>Inputs Count</td><td>: ${r.inputs.length}</td></tr>\n        <tr><td>Outputs Count</td><td>: ${r.outputs.length}</td></tr>\n        <tr><td>Transaction Amount</td><td>: ${p.wmcc(o.value)} wmcc</td></tr>\n        <tr><td>Transaction Fee</td><td>: ${p.wmcc(i)} wmcc</td></tr>\n        <tr><td>Transaction Rate</td><td>: ${p.wmcc(a)} wmcc/kb</td></tr>\n        <tr><td>Net Amount</td><td>: ${p.wmcc(s)} wmcc</td></tr>\n      </table>\n    `}<i class="glyph-icon flaticon-otp"></i>\n      <input type="text" name="otp" class="r_fixedNumber" maxlength="6" placeholder="One Time Password (OTP)"><result></result>\n      <a class="button" confirm>Confirm</a></span>`,u=c.modalBox("leftcontain",l,{transformZ:!0,title:"Transaction Confirmation",type:"confirm"});$("i.flaticon-remove").unbind("click").on("click",function(){$(u).css("-webkit-transform",""),$("modalbox").remove()});const f=this;$("a[confirm]").unbind("click").on("click",async function(t){const e=$(t.target).prev(),n=$(t.target).prev().prev().val();if(!n)return e.html('<span class="error">Error: OTP is required.</span>');if(!f.node.auth.getPassphrase(n))return e.html(`<span class="error">Error: Invalid OTP, number of tried (${f.node.auth.otp.retry} of ${f.node.auth.otp.maxtry})</span>`);$(t.target).remove(),await f.wallet.db.addTX(r),f.wallet.logger.debug("Sending wallet tx (%s): %s",f.wallet.id,r.txid()),await f.wallet.db.send(r);const{otp:o}=f.node.auth.getPassphrase(n,!0);return e.html(`<span>Transaction Sent! Your new OTP: ${o} <i class="glyph-icon flaticon-copy s_resetSendCoin" value="${o}" title="Copy to clipboard"></i>\n        <i class="glyph-icon flaticon-continue s_resetSendCoin s_enterPress" value="${o}" title="Continue without copy"></i></span>`)})}catch(t){const e=`<span>${t.message}</span><a class="button" cancel>Try Again</a>`,n=c.modalBox("leftcontain",e,{transformZ:!0,title:t.type||"TransactionError"});$("a[cancel], i").unbind("click").on("click",function(){$(n).css("-webkit-transform",""),$("modalbox").remove()})}},r.prototype._requestTx=async function(t){const e=$(t.target),n="I"===e.prop("tagName")?e.parent().parent().parent():e.parent().parent(),r=(n.find('input[coin="wmcc"]').val(),n.find("textarea").val(),c.modalBox(n,'<span>Request payment via URI will be available <br>on next major update.</span><a class="button" cancel>Close</a>',{transformZ:!0,title:"Not Available"}));$("a[cancel], i").unbind("click").on("click",function(){$(r).css("-webkit-transform",""),$("modalbox").remove()})},r.prototype._resetSendCoin=function(){$('menubutton[page="menu-top_send-receive-coin"]').removeAttr("active").trigger("click")},r.prototype._signMessage=async function(t){const e=$(t.target).parent().parent(),n=e.find(".address").eq(0).val(),r=e.find(".message").eq(0).val(),o=e.find(".otp").eq(0).val(),i=e.find(".signature").eq(0),s=e.find("result").eq(0);if(s.html(""),i.val(""),e.find(".address").eq(0).hasClass("error"))return;if(!n||!r||!o)return s.html('<span class="error">Error: Address, Message and OTP are required.</span>');const a=this.node.auth.getPassphrase(o);if(!a)return s.html(`<span class="error">Error: Invalid OTP, number of tried (${this.node.auth.otp.retry} of ${this.node.auth.otp.maxtry})</span>`);try{const e=await this.wallet.getPrivateKey(n,a.toString("hex"));if(!e)return s.html('<span class="error">Error: Address is not owned by this wallet.</span>');const l=y.sign(r,e.getPrivateKey(),!0),{otp:c}=this.node.auth.getPassphrase(o,!0);return i.val(l.toString("base64")),s.html(`<span>Your new OTP: ${c} <i class="glyph-icon flaticon-copy" value="${c}" title="Copy to clipboard"></i></span>`)}catch(t){return s.html(`<span class="error">${t}</span>`)}},r.prototype._verifyMessage=function(t){const e=$(t.target).parent().parent(),n=e.find(".address").eq(0).val(),r=e.find(".message").eq(0).val(),o=e.find(".signature").eq(0).val(),i=e.find("result").eq(0);if(i.html(""),!n||!r||!o)return i.html('<span class="error">Error: Address, Message and Signature are required.</span>');try{return y.verify(r,n,o)?i.html("<span>The signature is valid for the address and message.</span>"):i.html('<span class="error">Message failed to verify!</span>')}catch(t){return i.html(`<span class="error">${t}</span>`)}},r.prototype._wallet_getotp=function(t){const e=$(t.target),n=e.parent(),r=n.find('[name="otp"]').eq(0).val(),o=n.find("result").eq(0);if(!r)return;const{passphrase:i,otp:s}=this.node.auth.getPassphrase(r,!0);return i?(e.remove(),o.html(`<span>Your new OTP: ${s} <i class="glyph-icon flaticon-copy s_wallet_changesecret" value="${s}" title="Copy to clipboard"></i>\n    <i class="glyph-icon flaticon-continue s_wallet_changesecret s_enterPress" value="${s}" title="Continue without copy"></i></span>`)):o.html(`<span class="error">Error: Invalid OTP, number of tried (${this.node.auth.otp.retry} of ${this.node.auth.otp.maxtry})</span>`)},r.prototype._wallet_changesecret=function(t){const e=$(t.target).parent().parent().parent().parent(),n=e.find('[name="name"]').eq(0),r=e.find('[name="dob"]').eq(0),o=this.node.auth.hsm.salt.toString("utf8"),i=e.find("walletcontent");i.eq(0).prop("hidden",!0),i.eq(1).removeAttr("hidden"),n.val(this.wallet.id),r.val(o)},r.prototype._wallet_updatesecret=async function(t){const e=$(t.target),n=e.parent().parent().parent().find(".s_wallet_changesecret").eq(0).attr("value"),r=this.node.auth.getPassphrase(n);if(o('input[name="name"], input[name="dob"], input[name*="question_"], input[name*="answer_"]')&&i('input[name="name"]',e)){const t=$('input[name="name"]').val(),n=$('input[name="dob"]').val();let o=[],i={};$('input[name*="question_"], input[name*="answer_"]').each(function(t){t%2==0?i.question=$(this).val():(i.answer=$(this).val(),o.push(i),i={})});const s=await this.node.auth.hsm.encrypt(t,n,o),{lock:a,chksum:l}=u.toObject(s);this.wallet.lock=a,this.wallet.chksum=l,await this.wallet.setPassphrase(r.toString("hex"),s.passphrase.toString("hex")),await this.node.auth.hsm.destroy(),this.hsm={},this._resetWallet(e)}},r.prototype._backupWallet=function(t){const e=$(t.target).parent().parent(),n=e.find('input[type="password"]'),r=e.find('input[name="compress-level"]:checked').val();if(e.find("p").html(""),e.find("result").html(""),e.find(".error").removeClass("error"),n.eq(0).val()!==n.eq(1).val())return n.eq(1).addClass("error"),void n.eq(1).next().html("Password don't match!");const o=this;f.showOpenDialog({properties:["openDirectory"]},async function(t){if(!t)return;const i={input:o.node.walletdb.db.location,output:l.join(t[0],`DONT_RENAME_${o.node.walletdb.suffix}.bak`),level:r,password:n.eq(0).val()},s=new a(i),c=await s.compress();e.find("result").html(`<span>File saved to <a title="${c.path}">${c.path}</a></span>`)})},r.prototype._restoreWallet=function(t){const e=$(t.target).parent().parent().parent().parent(),n=this;f.showOpenDialog({properties:["openFile"]},async function(t){t&&n.restoreWallet(t[0],e)})},r.prototype._dragdropWallet=function(t){t.preventDefault(),t.stopPropagation();const e=$(t.target).closest("dragdrop"),n=e.parent().parent().parent();if("dragover"===t.type)e.css({"background-color":"#DDFFDD"});else if("dragleave"===t.type)e.css({"background-color":"#f9f9f9"});else if("drop"===t.type){const r=t.originalEvent.dataTransfer.files[0].path;this.restoreWallet(r,n),e.css({"background-color":"#f9f9f9"})}},r.prototype.restoreWallet=function(t,e){let n,r;const o=this.node.auth.wallets;try{r=l.parse(t).name.replace("DONT_RENAME_",""),n=this.node.auth.fromSuffix(r)}catch(t){const n=c.modalBox(e,'<span>Invalid wallet backup (.bak) file.</span><a class="button">Try Again</a>',{transformZ:!0,title:"Invalid File"});return void $("a.button, i").unbind("click").on("click",async function(){$(n).css("-webkit-transform",""),$("modalbox").remove()})}if(o.includes(n)){const o=`<span>Wallet <a>${n}</a> is already exists. Do you want to overwrite it?\n      <label>Warning: If you overwrite, all data in the existing wallet will be lost.</label>\n      </span><a class="button" overwrite>Overwrite</a><a class="button" cancel>Cancel</a>`,i=c.modalBox(e,o,{transformZ:!0,title:"Wallet Exists"}),s=this;$("a.button, i").unbind("click").on("click",function(){$(i).css("-webkit-transform",""),$("modalbox").remove(),this.hasAttribute("overwrite")&&s.renderZipPassword(t,r,e,n)})}else this.renderZipPassword(t,r,e,n)},r.prototype.renderZipPassword=function(t,e,n,r){const o=c.modalBox(n,'<span>Enter your password if the password was set:\n    <input type="password" />\n    </span><a class="button" next>Next</a>',{transformZ:!0,title:"Wallet .bak Password",type:"confirm"}),i=this;$("a.button, i").unbind("click").on("click",async function(){const s=$(this).prev().find("input").eq(0).val();if($(o).css("-webkit-transform",""),$("modalbox").remove(),this.hasAttribute("next")){const o={input:t,output:l.join(i.node.walletdb.options.location,`${e}.ldb`),password:s},u=new a(o);u.on("error",t=>{const e=`<span>${t.message}</span><a class="button">Try Again</a>`,r=c.modalBox(n,e,{transformZ:!0,title:t.type});$("a.button, i").unbind("click").on("click",async function(){$(r).css("-webkit-transform",""),$("modalbox").remove()})}),u.on("done",()=>{const t=`<span>Your wallet <a>${r}</a> account successfully restored!</span><a class="button">Ok</a>`,e=c.modalBox(n,t,{transformZ:!0,title:"Wallet Successfully Restored",type:"confirm"});$("a.button, i").unbind("click").on("click",async function(){$(e).css("-webkit-transform",""),$("modalbox").remove()})}),await u.decompress()}})},r.prototype.createWallet=async function(t){const e=$('input[name="name"]').val(),n=$('input[name="dob"]').val();let r=[],o={};if($('input[name*="question_"], input[name*="answer_"]').each(function(t){t%2==0?o.question=$(this).val():(o.answer=$(this).val(),r.push(o),o={})}),this.node.auth.wallets.includes(e)){const n=t.parent().parent(),r=`<span>${w.args(w.Credential.Auth.error.wallet_name_exists.text_1,[`<b style="font-size: 14px;">${e}</b>`])}<br>${w.Credential.Auth.error.wallet_name_exists.text_2}</span><a class="button" cancel>${w.Auth.Button.cancel}</a>`,o=c.modalBox(n,r,{transformZ:!0,title:w.Credential.Auth.error.wallet_name_exists.title});$("a[cancel], i").unbind("click").on("click",function(){$(o).css("-webkit-transform",""),$("modalbox").remove()})}else{const o=Core.walletdb(this.node.walletdb.options);await this.node.ensure(),await this.node.auth.saveWallet(o,this.node.chain,e,n,r),this._resetWallet(t[0])}},r.prototype.loadWallet=async function(){const t=$('select[name="name"]'),e=t.find("option:selected").val(),n=$('input[name="dob"]');this._tempdb=Core.walletdb(this.node.walletdb.options);const r=this.node.auth.toSuffix(e);this._tempdb.suffix(r),this._tempdb.loaded||(await this.node.ensure(),await this.node.auth.tempopen(this._tempdb,this.node.chain)),this.wallet=await this._tempdb.get(e),this.hsm=this.node.auth.hsm,this.decrypt=await this.hsm.decrypt(e,n.val(),this.wallet.lock),this.decrypt.question&&(this.count=1,this.renderHint(),t.attr("disabled","disabled"),n.attr("disabled","disabled")),await this.node.auth.tempclose(this._tempdb)},r.prototype.renderHint=function(){$("render").html(`<holder><i class="glyph-icon flaticon-hint"><counter>${this.count}</counter></i>\n    <input type="text" name="question" value="${this.decrypt.question.toString().replace(/"/g,"&quot;")}" disabled>\n    </holder><holder><i class="glyph-icon flaticon-answer"><counter>${this.count}</counter></i>\n    <input type="password" name="answer" placeholder="${w.Auth.Login.your_answer}"></holder>`),this.count++},r.prototype.processAnswer=async function(t){const e=$('input[name="answer"]').val();if(this.decrypt=await this.hsm.setAnswer(e),this.decrypt.question)return void this.renderHint();if(this.wallet.chksum.toString()===this.decrypt.passphrase.slice(0,4).toString()){const e=this.node.auth.getOTP(this.decrypt.passphrase);return this.node.auth.otp.enable?await this.renderOTP(e,t,this.wallet):await this.setupNode(this.wallet),void(0===this.node.miner.addresses.length&&this.node.miner.addAddress(this.wallet.getReceive("hex").toString()))}const n=t.parent(),r=`<span>${w.Credential.Auth.error.invalid_credential.text_1}<br>${w.Credential.Auth.error.invalid_credential.text_2}</span>\n    <a class="button">${w.Auth.Button.try_again}</a>`,o=c.modalBox(n,r,{transformZ:!0,title:w.Credential.Auth.error.invalid_credential.title}),i=$(o).find("modalbox").find("i, a"),s=this;for(let e=0;e<i.length;e++)$(i[e]).unbind("click").on("click",function(){$(o).css("-webkit-transform",""),s._resetWallet(t)})},r.prototype.renderOTP=async function(t,e,n){this.node.auth.logged&&$("body").prepend('<div id="fullmodal" style="height:100%;width:100%;background:rgba(0,0,0,0.3);position:absolute;z-index:1;"></div>');let r="<span><a>Click icon below to copy OTP to clipboard<br>or click Close to continue without copying them.</a><br>";r+=`<b>${t}</b><i class="glyph-icon flaticon-copy" title="Copy to clipboard" value="${t}"></i><br>`,r+='<note>** Please make sure to write down the OTP somewhere.</note><br><a class="button s_enterPress">Close</a></span>';const o=c.modalBox(e.parent(),r,{transformZ:!0,title:"One Time Password (OTP)",type:"confirm"}),i=$(o).find("modalbox").find("i, a.button");$(o).children().addClass("otp");const s=this;for(let t=0;t<i.length;t++)$(i[t]).unbind("click").on("click",async function(){await s.setupNode(n),$("body").find("#fullmodal").remove()})},r.prototype.setupNode=async function(t){this.node.info.wallet=t,await this.node.walletdb.unbind(),await this.node.close(),this.node.walletdb=this._tempdb,this.node.miner.address=t.getAddress(),this.node.attach=new g(this.node),await this.node.ensure(),await this.node.open(),await this.hsm.destroy(),await this.node.connect(),this.node.auth.logged=!0,this.node.auth.load(),m.init(this.node),this.updater=new b(v),this.updater.start();try{await t.zap(t.account.name,d.MAX_TX_SIGOPS_COST)}catch(t){}this.node.startSync()},r.prototype._enterPress=function(t){13==t.keyCode&&$(".s_enterPress").addClass("active").delay(100).queue(function(){$(this).removeClass("active").click().dequeue()})},r.prototype._escapePress=function(t){27==t.keyCode&&$(".s_escapePress").click()},t.exports=r},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);s.call(this),this.options=new o(t),this.input=this.options.input,this.output=this.options.output,this.level=this.options.level,this.password=this.options.password,this.files=this.options.files,this.locker=new d}function o(t){if(!(this instanceof o))return new o(t);this.input=null,this.output=null,this.level=5,this.password=null,this.files=[],t&&this.fromOptions(t)}const i=n(1),s=n(12),a=n(17),l=n(24),c=n(6),u=n(0),{PassThrough:h}=n(3),p=Core.utils.encoding,d=Core.utils.Lock;Object.setPrototypeOf(r.prototype,s.prototype),r.prototype.addFiles=function(t){i(t instanceof Array);for(let e of t)this.addFile(e)},r.prototype.addFile=function(t){i("string"==typeof t),"LOCK"!==t&&(this.files.includes(t)||this.files.push(t))},r.prototype.removeFiles=function(t){i(t instanceof Array);for(let e of t)this.addFile(e)},r.prototype.remove=function(t){i("string"==typeof t),this.files=this.files.filter(e=>e!==t)},r.prototype.compress=async function(){const t=await this.locker.lock();try{return await this._compress()}finally{t()}},r.prototype._compress=async function(){const t=await this.readDir(this.input);t.length&&this.addFiles(t);const e=this.compile();return this.zip(e)},r.prototype.decompress=async function(){const t=await this.locker.lock();try{await this._decompress()}finally{t()}},r.prototype._decompress=async function(){const t=await this.readFile(this.input),e=this.unzip(t);this.mkdirp(this.output),this.readBuffer(e)},r.prototype.readBuffer=function(t){const e=this;let n=Buffer.alloc(0);t.on("error",function(t){e.emit("error",{type:"Wrong Password",message:"The password you have entered is incorrect. Please try again."})}).on("data",function(t){n=Buffer.concat([n,t])}).on("end",async function(){let t=1,r=0;const o=n.readInt16LE(t);try{for(let i=0;i<o;i++){t=0===i?3:r+t+4,r=n.readInt8(t);const s=n.slice(t+1,r+t+1);t=r+t+1,r=n.readInt32LE(t);const a=n.slice(t+4,r+t+4);await e.writeFile(s.toString("utf8"),a),i===o-1&&e.emit("done")}}catch(t){e.emit("error",{type:"File Corrupted",message:"The file is corrupted and cannot be opened."})}})},r.prototype.writeFile=function(t,e){const n=u.join(this.output,t);return new Promise(function(t,r){c.writeFile(n,e,e=>{e?r(e):t()})})},r.prototype.readDir=function(t){return new Promise(function(e,n){c.readdir(t,(t,r)=>{t?n(t):e(r)})})},r.prototype.readFile=function(t){return new Promise(function(e,n){c.readFile(t,(t,r)=>{t?n(t):e(r)})})},r.prototype.mkdirp=function(t,e){const n=u.dirname(t);c.existsSync(n)||this.mkdirp(n),c.existsSync(t)&&!e&&this.backup(t);try{c.mkdirSync(t)}catch(t){}},r.prototype.backup=async function(t){const e=this.output,n=this.input,r=t.split(u.sep),o=new Date(Date.now()).toISOString().replace(/:/g,"-");r[r.length-1]=o+"-"+r[r.length-1],r.splice(r.length-1,0,"backup");const i=u.join.apply(null,r);r.splice(r.length-1,1);const s=u.join.apply(null,r);this.mkdirp(s,!0),this.output=i,this.input=t,await this.compress(),this.output=e,this.input=n,this.mkdirp(t,!0)},r.prototype.unzip=function(t){const e=a.createDecipher("aes128",this.password),n=new h,r=l.createGunzip();return n.end(t),n.pipe(e).pipe(r)},r.prototype.compile=function(){const t=p.U8(1),e=p.U16(this.files.length);let n=Buffer.concat([t,e]);for(let t of this.files){const e=u.join(this.input,t),r=c.readFileSync(e),o=p.U32(r.length),i=Buffer.from(t,"utf8");n=Buffer.concat([n,Buffer.from([i.length]),i]),n=Buffer.concat([n,o,r])}return n},r.prototype.zip=function(t){i(t instanceof Buffer);const e=l.gzipSync(t,{level:this.level}),n=a.createCipher("aes128",this.password),r=c.createWriteStream(this.output),o=new h;return o.end(e),o.pipe(n).pipe(r)},o.prototype.fromOptions=function(t){if(null!=t.input&&(i("string"==typeof t.input),this.input=t.input),null!=t.output&&(i("string"==typeof t.output),this.output=t.output),null!=t.level&&("string"==typeof t.level&&(t.level=parseInt(t.level)),i("number"==typeof t.level),this.level=t.level),null!=t.password&&(i("string"==typeof t.password),this.password=t.password),null!=t.files)if(t.files instanceof Array)for(let e of t.files)i("string"==typeof e),this.files.includes(e)&&this.files.push(e);else i("string"==typeof t.files),this.files.push(t.files)},process.on("uncaughtException",function(t){}),t.exports=r},function(t,e){t.exports=require("zlib")},function(module,exports,__webpack_require__){"use strict";function Updater(t){if(!(this instanceof Updater))return new Updater(t);AsyncObject.call(this),this.tasks=[],this.init(t)}function isOnline(t,e){"function"==typeof t&&(e=t,t={}),t.server=t.server||"199.7.83.42",t.timeout=t.timeout||400;const n=new Buffer([0,0,1,0,0,1,0,0,0,0,0,0,0,0,2,0,1]);let r=Diagram.createSocket("udp4"),o=null;r.on("message",function(n,i){e(null,n&&n.length>=2&&i.address===t.server),o&&clearTimeout(o),r&&r.close(),r=null}),r.send(n,0,n.length,53,t.server,function(){o=setTimeout(function(){e(null,!1),r&&r.close(),r=null},t.timeout)})}function waitElement(t,e){$(t).length?e($(t)):setTimeout(()=>{waitElement(t,e)},1)}const AsyncObject=Core.utils.AsyncObject,OS=__webpack_require__(8),FS=__webpack_require__(6),Path=__webpack_require__(0),Diagram=__webpack_require__(50),{app:app}=__webpack_require__(2).remote,SemVer=__webpack_require__(51),Got=__webpack_require__(52),Zlib=__webpack_require__(24),Crypto=__webpack_require__(17);Object.setPrototypeOf(Updater.prototype,AsyncObject.prototype),Updater.prototype.init=function(t){const e={tmpdir:OS.tmpdir(),headers:{},name:app.getName()};this.options=Object.assign({},e,t),this.options.cacheDir=Path.resolve(this.options.tmpdir,this.options.name),this.options.headers["user-agent"]=this.options.headers["user-agent"]||"wmcc-updater/v1.0.1-beta.1 (https://github.com/WorldMobileCoin/wmcc-updater)",FS.existsSync(this.options.cacheDir)||FS.mkdirSync(this.options.cacheDir),this.setFeedURL(Path.join(__dirname,this.options.root+this.options.filename),this.options.link)},Updater.prototype.setFeedURL=function(t,e){Path.isAbsolute(t)||(t=Path.resolve(app.getAppPath(),t));const n=Path.basename(t,".asar");this.tasks.push({name:n,filename:t,url:e})},Updater.prototype.checkUpdate=function(){isOnline((t,e)=>t?this.emit("error",t):e?(this.manifest=[],this.emit("checking-for-update"),void Promise.all(this.tasks.map(t=>this._local(t)).map(t=>this._remote(t)).map(t=>this._compare(t)).map(t=>this._download(t))).then(t=>this._completed(t)).catch(t=>this.emit("error",t))):this.emit("completed",!1,"offline"))},Updater.prototype._local=function _local(task){try{if(task.local=eval("require")(Path.resolve(task.filename,"package.json")),!task.local.version)throw new Error("There is no version in the package.json");return task}catch(t){if("MODULE_NOT_FOUND"!==t.code)throw t;throw new Error("There is no package.json in the "+task.filename)}},Updater.prototype._remote=function(t){return this._fetchJson(t.url+"?v="+Date.now()).then(e=>(t.remote=e,t.remote.version?t:Promise.reject(new Error("There is no version in the remote"))))},Updater.prototype._compare=function(t){return t.then(t=>(t.available=SemVer.gt(SemVer.clean(t.remote.version),SemVer.clean(t.local.version)),this.emit(t.available?"available":"not-available",t),t))},Updater.prototype._download=function(t){return t.then(t=>{if(!t.available)return t;try{const e=Path.resolve(this.options.cacheDir,t.name);if(t.remote.sha1===this._getFileStamp(e))return this.manifest.push({from:e,to:t.filename}),this.emit("downloaded",t),t}catch(t){}return this._fetchFile(t.remote.url+"?v="+Date.now(),t.name).progress(e=>this.emit("progress",t,e)).then(e=>(t.remote.sha1===this._getFileStamp(e)&&this.manifest.push({from:e,to:t.filename}),this.emit("downloaded",t),t))})},Updater.prototype._completed=function(t){let e=!1;for(let n=t.length-1;n>=0;n--)t[n].available&&(e=!0);e?FS.writeFile(Path.resolve(this.options.cacheDir,"manifest.json"),JSON.stringify(this.manifest),"utf8",e=>{if(e)return fs.unlink(this.options.cacheDir);this.emit("completed",this.manifest,t),this.manifest=[]}):this.emit("completed",!1,t)},Updater.prototype._fetchJson=function(t){return Got(t,{encoding:"utf8",timeout:6e4,retries:3,json:!0,headers:this.headers}).then(t=>Promise.resolve(t.body))},Updater.prototype._fetchFile=function(t,e){let n=t=>console.log(t),r=0,o=0,i=null;const s=Path.resolve(this.options.cacheDir,e),a=new Promise((e,a)=>{Got.stream(t,{encoding:"utf8",timeout:6e4,retries:3,headers:this.headers}).on("request",t=>{i=setTimeout(()=>t&&t.abort(),36e5)}).on("response",t=>t.headers["content-length"]?r=parseInt(t.headers["content-length"],10):n(-1)).on("data",t=>n(r?(o+=t.length)/r:-1)).on("end",t=>clearTimeout(i)).on("error",(t,e,n)=>a(t)).pipe(Zlib.Gunzip()).pipe(FS.createWriteStream(s)).on("error",t=>a(t)).on("close",()=>e(s))});return a.progress=(t=>(n=t,a)),a},Updater.prototype._getFileStamp=function(t,e){e=e||"sha1";const n=FS.readFileSync(t);let r=Crypto.createHash(e);return r.update(n),r.digest("hex")},Updater.prototype.install=function(t,e){const n=t=>{if(t)throw t;setTimeout(()=>{app.relaunch({args:process.argv.slice(1)+["--relaunch"]}),app.exit(0)},e||100)};for(let e of t)this.move(e.from,`${e.to}.temp`,n)},Updater.prototype.move=function(t,e,n){FS.rename(t,e,r=>{r?"EXDEV"===r.code?this.copy(t,e,n):n(r):n()})},Updater.prototype.copy=function(t,e,n){const r=FS.createReadStream(t),o=FS.createWriteStream(e);r.on("error",n),o.on("error",n),r.on("close",function(){FS.unlink(t,n)}),r.pipe(o)},Updater.prototype.start=function(){waitElement("updatecontent",t=>{this.on("available",e=>{t.addClass("progress"),t.html('<table><tr><td><span class="loading"><span class="progress_holder"><span class="progress_bar"></span>\n        <span id="prog_status">Downloading update: 0%</span></span></span></td></tr></table>')}),this.on("not-available",e=>{t.html("<h3>Your client application is up to date.</h3>"),setTimeout(()=>{t.remove()},5e3)}),this.on("progress",(t,e)=>{const n=`${Math.round(100*e)}%`;$(".progress_bar").css("width",n),$("#prog_status").html(`Downloading update: ${n}`)}),this.on("downloaded",t=>{}),this.on("completed",(e,n)=>{if(e){t.removeClass("progress").addClass("completed"),t.html("<table><tr><td><div>Update available! WMCC Client v1.1.0-beta.1, you must restart this application to apply new update.</div></td>\n          <td><submit>Restart Now</submit></td><td></td><td><submit>Later</submit></td></tr></table>");const n=t.find("submit");n.eq(0).click(()=>{this.install(e)}),n.eq(1).click(()=>{t.remove()})}else t.html("<h3>Your client application is up to date.</h3>"),setTimeout(()=>{t.remove()},5e3)}),this.on("error",e=>{t.remove(),console.log(e)}),this.checkUpdate()})},module.exports=Updater},function(t,e,n){"use strict";t.exports=function(t){for(var e={},n=Object.keys(Object(t)),r=0;r<n.length;r++)e[n[r].toLowerCase()]=t[n[r]];return e}},function(t,e,n){"use strict";const r=["destroy","setTimeout","socket","headers","trailers","rawHeaders","statusCode","httpVersion","httpVersionMinor","httpVersionMajor","rawTrailers","statusMessage"];t.exports=((t,e)=>{const n=Object.keys(e),o=new Set(Object.keys(t).concat(r));for(const r of o)-1===n.indexOf(r)&&(e[r]="function"==typeof t[r]?t[r].bind(t):t[r])})},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);this.options=new o(t),this.network=this.options.network,this.logger=this.options.logger.context("authentication"),this.locker=new p,this.templocker=new p,this.hsm=new a({alg:this.options.alg,hash:this.options.hash,iter:this.options.iter,r:this.options.r,p:this.options.p,length:this.options.length}),this.otp=new l(this.options.otp),this.opened=!1,this.logged=!1,this.maxLock=10,this.wallets=[],this.load()}function o(t){if(!(this instanceof o))return new o(t);this.network=h.primary,this.logger=c.global,this.otp=!0,t&&this.fromOptions(t)}const i=n(17),s=n(1),a=n(18),l=n(29),c=n(21),u=Core.utils.fs,h=Core.protocol.Network,p=Core.utils.Lock;r.prototype.load=function(){this.logged?$("body").html("<menu><topmenu category='menu' module='top' tag='topmenu' active='true'></topmenu></menu><content></content>\n      <updater category='update' module='update' tag='updater' active='true'></updater>\n      <notification category='notification' module='main' tag='notification' active='true'></notification>"):$("body").html("<logo><img src='../image/head_logo.png'></logo><menu><tabs category='menu' module='auth' tag='tabs' active='true'></tabs></menu>\n      <content></content><copyright>WMCC Application &copy; World Mobile Coin</copyright>\n      \x3c!--<updater category='update' module='update' tag='updater' active='true'></updater>--\x3e")},r.prototype.open=async function(t,e){const n=await this.locker.lock();try{return await this._open(t,e)}finally{n()}},r.prototype._open=async function(t,e){s("object"==typeof t),s("object"==typeof e),e.loaded||await e.open(),await t.open(),this.opened=!0},r.prototype.tempopen=async function(t,e){const n=await this.templocker.lock();try{return await this._tempopen(t,e)}finally{n()}},r.prototype._tempopen=async function(t,e){s("object"==typeof t),s("object"==typeof e),e.loaded||await e.open();const n=t.bound;this.opened&&(t.bound=!0),await t.db.open(),t.bound=n,this.opened=!0},r.prototype.tempclose=async function(t,e){const n=await this.templocker.lock();try{return await this._tempclose(t,e)}finally{n()}},r.prototype._tempclose=async function(t,e){s("object"==typeof t),await t.db.close(),e&&(s("object"==typeof e),await e.close()),this.opened=!1},r.prototype.close=async function(t,e){const n=await this.locker.lock();try{return await this._close(t,e)}finally{n()}},r.prototype._close=async function(t,e){s("object"==typeof t),await t.close(),e&&(s("object"==typeof e),await e.close()),this.opened=!1},r.prototype.render=async function(t,e){const n=e.info.wallet?e.info.wallet.account.id:null,r=t.list(),o=[];if(r.length>0){for(let t of r){const e=t.split(".").shift();try{const t=this.fromSuffix(e);if(t===n)continue;o.push(t)}catch(t){}}o.sort();for(let t of o)$('select[name="name"]').append(`<option value="${t}">${t}</option>`),this.wallets=this.wallets.filter(e=>e!==t).concat([t])}this.wallets.length>0||$('menubutton[category="auth"][module="create"]').trigger("click")},r.prototype.saveWallet=async function(t,e,n,r,o){let i=await this.hsm.encrypt(n,r,o);const s=this.toSuffix(n);t.suffix(s),await this.ensure(t.db.db.location),await this.open(t,e),await t.set({id:n,hsm:i}),await this.hsm.destroy(),await this.close(t),i={}},r.prototype.ensure=function(t){return u.unsupported?Promise.resolve():u.mkdirp(t)},r.prototype.getOTP=function(t){return this.otp.encode(t)},r.prototype.getPassphrase=function(t,e){return this.otp.decode(t,e)},r.prototype.isOtpEnabled=function(){return this.otp.isEnabled()},r.prototype.getMaxLock=function(){return this.maxLock},r.prototype.toSuffix=function(t){const e=i.createCipher("aes128","wmcc-wallet");return`${e.update(t,"utf8","hex")}${e.final("hex")}`},r.prototype.fromSuffix=function(t){const e=i.createDecipher("aes128","wmcc-wallet");return`${e.update(t,"hex","utf8")}${e.final("utf8")}`},r.prototype.destroy=function(){this.opened=!1,this.logged=!1},o.prototype.fromOptions=function(t){null!=t.network&&(this.network=h.get(t.network)),null!=t.logger&&(s("object"==typeof t.logger),this.logger=t.logger),null!=t.otp&&(s("boolean"==typeof t.otp),this.otp=t.otp),null!=t.alg&&(s("string"==typeof t.alg||"number"==typeof t.alg),this.alg=t.alg),null!=t.hash&&(s("string"==typeof t.hash||"number"==typeof t.hash),this.hash=t.hash),null!=t.iter&&(s("number"==typeof t.iter),this.iter=t.iter),null!=t.r&&(s("number"==typeof t.r),this.r=t.r),null!=t.p&&(s("number"==typeof t.p),this.p=t.p),null!=t.length&&(s("number"==typeof t.length),this.length=t.length)},o.fromOptions=function(t){return(new o).fromOptions(t)},t.exports=r},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);this.enable=t,this.code=null,this.key=null,this.retry=0,this.maxtry=5}const o=n(1),i=n(17),s=n(42),a=Core.crypto.digest;r.prototype.encode=function(t){o(t,"Passphrase required.");const e=function(t,e){return Math.floor(Math.random()*(e-t+1))+t}(1e3,9999);this.code=i.randomBytes(16).toString("hex");const n=this._generateCode(e);return this.key=s.encrypt(t,n),e},r.prototype.decode=function(t,e){o(this.code,"OTP must be instantiate first");let n;const r=this._generateCode(t);try{n=Buffer.from(s.decrypt(this.key,r),"ascii")}catch(t){return this.retry++,this.retry>this.maxtry-1&&setTimeout(()=>{location.reload()},2e3),!1}if(this.retry=0,e){return{passphrase:n,otp:this.encode(n)}}return n},r.prototype._generateCode=function(t){o(t,"OTP required.");let e;for(let n=0;n<t;n++)0===n&&(e=this.code),e=a.sha256(Buffer.from(e)).toString("ascii");return e},r.prototype.isEnabled=function(){return this.enable},t.exports=r},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);c("string"==typeof t),c(t.length>0),this.module=t,this.network="mainnet",this.prefix=u.join(f,`.${t}`),this.options=Object.create(null),this.data=Object.create(null),this.env=Object.create(null),this.args=Object.create(null),this.argv=[],this.pass=[],this.query=Object.create(null),this.hash=Object.create(null)}function o(t){return Array.isArray(t)&&(t=t[0]),"number"==typeof t?`Argument #${t}`:t}function i(t){try{t=(t=decodeURIComponent(t)).replace(/\+/g," ")}catch(t){}return t=t.replace(/\0/g,"")}function s(t){return/^[a-z0-9]+$/.test(t)}function a(t){return/^[a-zA-Z0-9]+$/.test(t)}function l(t){return!!a(t)&&!/[A-Z]/.test(t)}const c=n(1),u=n(0),h=n(8),p=Core.utils.fs,d=Core.util,f=h.homedir?h.homedir():"/";r.alias={seed:"seeds",node:"nodes",n:"network"},r.prototype.inject=function(t){for(const e of Object.keys(t)){const n=t[e];switch(e){case"hash":case"query":case"env":case"argv":case"config":continue}this.set(e,n)}},r.prototype.load=function(t){t.hash&&this.parseHash(t.hash),t.query&&this.parseQuery(t.query),t.env&&this.parseEnv(t.env),t.argv&&this.parseArg(t.argv),this.network=this.getNetwork(),this.prefix=this.getPrefix()},r.prototype.open=function(t){if(p.unsupported)return;const e=this.getFile(t);let n;try{n=p.readFileSync(e,"utf8")}catch(t){if("ENOENT"===t.code)return;throw t}this.parseConfig(n),this.network=this.getNetwork(),this.prefix=this.getPrefix()},r.prototype.set=function(t,e){c("string"==typeof t,"Key must be a string."),null!=e&&(t=(t=t.replace(/-/g,"")).toLowerCase(),this.options[t]=e)},r.prototype.has=function(t){return"number"==typeof t?(c(t>=0,"Index must be positive."),!(t>=this.argv.length)):(c("string"==typeof t,"Key must be a string."),t=t.replace(/-/g,""),t=t.toLowerCase(),null!=this.hash[t]||(null!=this.query[t]||(null!=this.args[t]||(null!=this.env[t]||(null!=this.data[t]||null!=this.options[t])))))},r.prototype.get=function(t,e){if(void 0===e&&(e=null),Array.isArray(t)){const n=t;for(const t of n){const e=this.get(t);if(null!==e)return e}return e}return"number"==typeof t?(c(t>=0,"Index must be positive."),t>=this.argv.length?e:null!=this.argv[t]?this.argv[t]:e):(c("string"==typeof t,"Key must be a string."),t=t.replace(/-/g,""),t=t.toLowerCase(),null!=this.hash[t]?this.hash[t]:null!=this.query[t]?this.query[t]:null!=this.args[t]?this.args[t]:null!=this.env[t]?this.env[t]:null!=this.data[t]?this.data[t]:null!=this.options[t]?this.options[t]:e)},r.prototype.typeOf=function(t){const e=this.get(t);return null===e?"null":typeof e},r.prototype.str=function(t,e){const n=this.get(t);if(void 0===e&&(e=null),null===n)return e;if("string"!=typeof n)throw new Error(`${o(t)} must be a string.`);return n},r.prototype.int=function(t,e){let n=this.get(t);if(void 0===e&&(e=null),null===n)return e;if("string"!=typeof n){if("number"!=typeof n)throw new Error(`${o(t)} must be an int.`);if(!Number.isSafeInteger(n))throw new Error(`${o(t)} must be an int.`);return n}if(!/^\-?\d+$/.test(n))throw new Error(`${o(t)} must be an int.`);if(n=parseInt(n,10),!Number.isSafeInteger(n))throw new Error(`${o(t)} must be an int.`);return n},r.prototype.uint=function(t,e){const n=this.int(t);if(void 0===e&&(e=null),null===n)return e;if(n<0)throw new Error(`${o(t)} must be a uint.`);return n},r.prototype.float=function(t,e){let n=this.get(t);if(void 0===e&&(e=null),null===n)return e;if("string"!=typeof n){if("number"!=typeof n)throw new Error(`${o(t)} must be a float.`);if(!isFinite(n))throw new Error(`${o(t)} must be a float.`);return n}if(!/^\-?\d*(?:\.\d*)?$/.test(n))throw new Error(`${o(t)} must be a float.`);if(!/\d/.test(n))throw new Error(`${o(t)} must be a float.`);if(n=parseFloat(n),!isFinite(n))throw new Error(`${o(t)} must be a float.`);return n},r.prototype.ufloat=function(t,e){const n=this.float(t);if(void 0===e&&(e=null),null===n)return e;if(n<0)throw new Error(`${o(t)} must be a positive float.`);return n},r.prototype.fixed=function(t,e,n){const r=this.float(t);if(void 0===n&&(n=null),null===r)return n;try{return d.fromFloat(r,e||0)}catch(e){throw new Error(`${o(t)} must be a fixed number.`)}},r.prototype.ufixed=function(t,e,n){const r=this.fixed(t,e);if(void 0===n&&(n=null),null===r)return n;if(r<0)throw new Error(`${o(t)} must be a positive fixed number.`);return r},r.prototype.bool=function(t,e){const n=this.get(t);if(void 0===e&&(e=null),null===n)return e;if("number"==typeof n){if(1===n)return!0;if(0===n)return!1}if("string"!=typeof n){if("boolean"!=typeof n)throw new Error(`${o(t)} must be a boolean.`);return n}if("true"===n||"1"===n)return!0;if("false"===n||"0"===n)return!1;throw new Error(`${o(t)} must be a boolean.`)},r.prototype.buf=function(t,e,n){const r=this.get(t);if(n||(n="hex"),void 0===e&&(e=null),null===r)return e;if("string"!=typeof r){if(!Buffer.isBuffer(r))throw new Error(`${o(t)} must be a buffer.`);return r}const i=Buffer.from(r,n);if(i.length!==Buffer.byteLength(r,n))throw new Error(`${o(t)} must be a ${n} string.`);return i},r.prototype.array=function(t,e){const n=this.get(t);if(void 0===e&&(e=null),null===n)return e;if("string"!=typeof n){if(!Array.isArray(n))throw new Error(`${o(t)} must be an array.`);return n}const r=n.trim().split(/\s*,\s*/),i=[];for(const t of r)0!==t.length&&i.push(t);return i},r.prototype.obj=function(t,e){const n=this.get(t);if(void 0===e&&(e=null),null===n)return e;if("object"!=typeof n)throw new Error(`${o(t)} must be an object.`);return n},r.prototype.func=function(t,e){const n=this.get(t);if(void 0===e&&(e=null),null===n)return e;if("function"!=typeof n)throw new Error(`${o(t)} must be a function.`);return n},r.prototype.path=function(t,e){let n=this.str(t);if(void 0===e&&(e=null),null===n)return e;switch(n[0]){case"~":n=u.join(f,n.substring(1));break;case"@":n=u.join(this.prefix,n.substring(1))}return u.normalize(n)},r.prototype.mb=function(t,e){const n=this.uint(t);return void 0===e&&(e=null),null===n?e:1024*n*1024},r.prototype.getNetwork=function(){let t=this.str("network");return t||(t="mainnet"),c(s(t),"Bad network."),t},r.prototype.getPrefix=function(){let t=this.str("prefix");if(t)return"~"===t[0]&&(t=u.join(f,t.substring(1))),t;t=u.join(f,`.${this.module}`);const e=this.str("network");return e&&(c(s(e),"Bad network."),"mainnet"!==e&&(t=u.join(t,e))),u.normalize(t)},r.prototype.getFile=function(t){const e=this.str("config");return e||u.join(this.prefix,t)},r.prototype.ensure=function(){return p.unsupported?Promise.resolve():p.mkdirp(this.prefix)},r.prototype.location=function(t){return u.join(this.prefix,t)},r.prototype.parseConfig=function(t){c("string"==typeof t,"Config must be text."),65279===t.charCodeAt(0)&&(t=t.substring(1)),t=(t=(t=t.replace(/\r\n/g,"\n")).replace(/\r/g,"\n")).replace(/\\\n/g,"");let e=!0,n=!1,o=0;for(const i of t.split("\n")){const t=i.trim();if(o+=1,0===t.length)continue;if("#"===t[0])continue;const s=t.indexOf("="),a=t.indexOf(":");let c=-1;if(-1!==a&&(a<s||-1===s)){if(n&&!e)throw new Error(`Expected '=' on line ${o}: "${t}".`);c=a,n=!0,e=!0}else{if(-1===s){const n=e?":":"=";throw new Error(`Expected '${n}' on line ${o}: "${t}".`)}if(n&&e)throw new Error(`Expected ':' on line ${o}: "${t}".`);c=s,n=!0,e=!1}let u=t.substring(0,c).trim();if(u=u.replace(/\-/g,""),!l(u))throw new Error(`Invalid option on line ${o}: ${u}.`);const h=t.substring(c+1).trim();if(0===h.length)continue;const p=r.alias[u];p&&(u=p),this.data[u]=h}},r.prototype.parseArg=function(t){t&&"object"==typeof t||(t=process.argv),c(Array.isArray(t));let e=null,n=!1;for(let o=2;o<t.length;o++){const i=t[o];if(c("string"==typeof i),"--"===i){n=!0;continue}if(n){this.pass.push(i);continue}if(0===i.length){e=null;continue}if(0===i.indexOf("--")){const t=i.indexOf("=");let n=null,o=null,s=!1;if(-1!==t?(n=i.substring(2,t),o=i.substring(t+1),e=null,s=!1):(n=i.substring(2),o="true",e=null,s=!0),n=n.replace(/\-/g,""),!l(n))throw new Error(`Invalid argument: --${n}.`);if(0===o.length)continue;if(n.length>1){const t=r.alias[n];t&&(n=t)}this.args[n]=o,s&&(e=n);continue}if("-"===i[0]){e=null;for(let t=1;t<i.length;t++){let n=i[t];if((n<"a"||n>"z")&&(n<"A"||n>"Z")&&(n<"0"||n>"9")&&"?"!==n)throw new Error(`Invalid argument: -${n}.`);const o=r.alias[n];o&&(n=o),this.args[n]="true",e=n}continue}const s=i;0!==s.length?e?(this.args[e]=s,e=null):this.argv.push(s):e=null}},r.prototype.parseEnv=function(t){let e=this.module;e=(e=e.toUpperCase()).replace(/-/g,"_"),e+="_",t&&"object"==typeof t||(t=process.env),c(t&&"object"==typeof t);for(let n of Object.keys(t)){const o=t[n];if(c("string"==typeof o),d.startsWith(n,e)&&(n=n.substring(e.length),n=n.replace(/_/g,""),function(t){return!!a(t)&&!/[a-z]/.test(t)}(n)&&0!==o.length)){if((n=n.toLowerCase()).length>1){const t=r.alias[n];t&&(n=t)}this.env[n]=o}}},r.prototype.parseQuery=function(t){if("string"!=typeof t){if(!global.location)return{};if("string"!=typeof(t=global.location.search))return{}}return this.parseForm(t,this.query)},r.prototype.parseHash=function(t){if("string"!=typeof t){if(!global.location)return{};if("string"!=typeof(t=global.location.hash))return{}}return this.parseForm(t,this.hash)},r.prototype.parseForm=function(t,e){if(c("string"==typeof t),0===t.length)return;let n="?";e===this.hash&&(n="#"),t[0]===n&&(t=t.substring(1));for(const n of t.split("&")){const t=n.indexOf("=");let o,s;if(-1!==t?(o=n.substring(0,t),s=n.substring(t+1)):(o=n,s="true"),o=i(o),o=o.replace(/\-/g,""),!l(o))continue;if(0===(s=i(s)).length)continue;const a=r.alias[o];a&&(o=a),e[o]=s}},t.exports=r},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);i.call(this),this.config=new h("wmcc"),this.config.inject(t),this.config.load(t),t.config&&this.config.open("wmcc.conf"),this.network=a.get(this.config.network),this.startTime=-1,this.bound=[],this.plugins=Object.create(null),this.stack=[],this.logger=null,this.workers=null,this.spv=!1,this.chain=null,this.fees=null,this.mempool=null,this.pool=null,this.miner=null,this.http=null,this.wallet=null,this.init()}const o=n(1),i=Core.utils.AsyncObject,s=Core.utils.util,a=Core.protocol.Network,l=Core.workers.WorkerPool,c=Core.crypto.secp256k1,u=Core.native,h=n(30),p=n(21);Object.setPrototypeOf(r.prototype,i.prototype),r.prototype.initOptions=function(){let t=new p;const e=this.config;e.has("logger")&&(t=e.obj("logger")),t.set({filename:e.bool("log-file")?e.location("debug.log"):null,level:e.str("log-level"),console:e.bool("log-console"),browser:e.bool("log-browser"),shrink:e.bool("log-shrink")}),this.logger=t.context("node"),this.workers=new l({enabled:e.bool("workers"),size:e.uint("workers-size"),timeout:e.uint("workers-timeout"),file:e.str("worker-file")})},r.prototype.init=function(){this.initOptions(),this.on("error",()=>{}),this.workers.on("spawn",t=>{this.logger.info("Spawning worker process: %d.",t.id)}),this.workers.on("exit",(t,e)=>{this.logger.warning("Worker %d exited: %s.",e.id,t)}),this.workers.on("log",(t,e)=>{this.logger.debug("Worker %d says:",e.id),this.logger.debug(t)}),this.workers.on("error",(t,e)=>{e?this.logger.error("Worker %d error: %s",e.id,t.message):this.emit("error",t)}),this.hook("preopen",()=>this.handlePreopen()),this.hook("preclose",()=>this.handlePreclose()),this.hook("open",()=>this.handleOpen()),this.hook("close",()=>this.handleClose())},r.prototype.ensure=function(){return this.config.ensure()},r.prototype.location=function(t){return this.config.location(t)},r.prototype.handlePreopen=async function(){await this.logger.open(),await this.workers.open(),this.bind(this.network.time,"offset",t=>{this.logger.info("Time offset: %d (%d minutes).",t,t/60|0)}),this.bind(this.network.time,"sample",(t,e)=>{this.logger.debug("Added time data: samples=%d, offset=%d (%d minutes).",e,t,t/60|0)}),this.bind(this.network.time,"mismatch",()=>{this.logger.warning("Adjusted time mismatch!"),this.logger.warning("Please make sure your system clock is correct!")})},r.prototype.handleOpen=async function(){this.startTime=s.now(),c.binding||(this.logger.warning("Warning: secp256k1-node was not built."),this.logger.warning("Verification will be slow.")),u.binding||(this.logger.warning("Warning: wmcc-native was not built."),this.logger.warning("Hashing will be slow.")),this.workers.enabled||(this.logger.warning("Warning: worker pool is disabled."),this.logger.warning("Verification will be slow."))},r.prototype.handlePreclose=async function(){},r.prototype.handleClose=async function(){for(const[t,e,n]of this.bound)t.removeListener(e,n);this.bound.length=0,this.startTime=-1,await this.workers.close(),await this.logger.close()},r.prototype.bind=function(t,e,n){this.bound.push([t,e,n]),t.on(e,n)},r.prototype.error=function(t){this.logger.error(t),this.emit("error",t)},r.prototype.uptime=function(){return-1===this.startTime?0:s.now()-this.startTime},r.prototype.use=function(t){o(t,"Plugin must be an object."),o("function"==typeof t.init,"`init` must be a function."),o(!this.loaded,"Cannot add plugin after node is loaded.");const e=t.init(this);if(o(!e.open||"function"==typeof e.open,"`open` must be a function."),o(!e.close||"function"==typeof e.close,"`close` must be a function."),t.id){switch(o("string"==typeof t.id,"`id` must be a string."),t.id){case"chain":case"fees":case"mempool":case"miner":case"pool":case"rpc":case"http":case"wallet":o(!1,`${t.id} is already added.`)}o(!this.plugins[t.id],`${t.id} is already added.`),this.plugins[t.id]=e}return this.stack.push(e),"function"==typeof e.on&&e.on("error",t=>this.error(t)),e},r.prototype.has=function(t){return null!=this.plugins[t]},r.prototype.get=function(t){switch(o("string"==typeof t,"Plugin name must be a string."),t){case"chain":return o(this.chain,"chain is not loaded."),this.chain;case"fees":return o(this.fees,"fees is not loaded."),this.fees;case"mempool":return o(this.mempool,"mempool is not loaded."),this.mempool;case"miner":return o(this.miner,"miner is not loaded."),this.miner;case"pool":return o(this.pool,"pool is not loaded."),this.pool;case"rpc":return o(this.rpc,"rpc is not loaded."),this.rpc;case"http":return o(this.http,"http is not loaded."),this.http;case"wallet":return o(this.wallet,"wallet is not loaded."),this.wallet}return this.plugins[t]||null},r.prototype.require=function(t){const e=this.get(t);return o(e,`${t} is not loaded.`),e},r.prototype.loadPlugins=function(){const t=this.config.array("plugins",[]),e=this.config.func("loader");for(let n of t)"string"==typeof n&&(o(e,"Must pass a loader function."),n=e(n)),this.use(n)},r.prototype.openPlugins=async function(){for(const t of this.stack)t.open&&await t.open()},r.prototype.closePlugins=async function(){for(const t of this.stack)t.close&&await t.close()},t.exports=r},function(module,exports,__webpack_require__){"use strict";function Browser(t,e){if(!(this instanceof Browser))return new Browser(t,e);this.doc=e,this.node=null,this.submit=null,this.init(t)}const Window=__webpack_require__(11),Loader=__webpack_require__(15),Submit=__webpack_require__(22),Path=__webpack_require__(0);Browser.prototype.init=function init(node){this.node=new node.FullNode({config:!0,argv:!0,env:!0,logFile:!0,logConsole:!0,logBrowser:!0,logLevel:"debug",db:"leveldb",persistent:!0,workers:!0,listen:!0,loader:eval("require")}),this.submit=new Submit(this.node),this.doc.onload=Loader.init(this.submit.node)},module.exports=Browser},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);this.node=t,this.events=[],this.init()}n(1),Core.utils.Lock;const o=Core.wmcc.Amount;r.prototype.init=function(){const t=this,e=(e,n)=>{let r=t.events.mempool;for(let o in r)t.emit(r[o].event,"mempool",r[o].el,{tx:e,view:n})};this.node.mempool.listeners("tx").filter(t=>t.toString()===e.toString()).length&&this.node.mempool.removeListener("tx",e),this.node.mempool.on("tx",e);const n=async(e,n)=>{let r=t.events.chain;for(let e in r)t.emit(r[e].event,"chain",r[e].el)};this.node.chain.listeners("block").filter(t=>t.toString()===n.toString()).length&&this.node.chain.removeListener("block",n),this.node.chain.on("block",n);const r=()=>{let e=t.events.balance;for(let n in e)t.emit(e[n].event,"balance",e[n].el)};this.node.walletdb.listeners("hook balance").filter(t=>t.toString()===r.toString()).length&&this.node.walletdb.removeListener("hook balance",r),this.node.walletdb.on("hook balance",r);const o=e=>{let n=t.events.miner;for(let r in n)t.emit(n[r].event,"miner",n[r].el,{attempt:e})};this.node.miner.listeners("miner block").filter(t=>t.toString()===o.toString()).length&&this.node.miner.removeListener("miner block",o),this.node.miner.on("miner block",o);const i=async(e,n)=>{let r=t.events.notification;for(let o in r)t.emit(r[o].event,"notification",r[o].el,{block:e,entry:n,prepend:!0})};this.node.miner.listeners("miner found").filter(t=>t.toString()===i.toString()).length&&this.node.miner.removeListener("miner found",i),this.node.miner.on("miner found",i)},r.prototype.on=async function(t,e,n,r){this.events[e]||(this.events[e]=[]);const o={event:t,el:n};return this.events[e].filter((e,r)=>e.event===t||e.el===n).length||this.events[e].push(o),this.events[e]=this.events[e].map(t=>Object.assign(t,[o].find(e=>e&&t.event===e.event))),await this.emit(t,e,n,r)},r.prototype.add=async function(t,e,n,r){return await this.on(t,e,n,r)},r.prototype.emit=async function(t,e,n,r){try{let o;return o=r&&Object.keys(r).length?await this[t](...Object.values(r)):await this[t](),void(r&&r.append?n.append(o):r&&r.prepend?n.prepend(o):n.html(o))}catch(n){if("TypeError"!==n.name)throw n;console.log(`Unable to attach 'on' event for ${e}::${t}`)}},r.prototype.getBalance=async function(){return await this.node.info.wallet.getBalanceDetails(this.node.info.getAccountName())},r.prototype.getTotal=async function(t){const e=t||await this.getBalance();return o.text(e.total)},r.prototype.getAvailable=async function(t){const e=t||await this.getBalance();return o.text(e.available)},r.prototype.getPending=async function(t){const e=t||await this.getBalance();return o.text(e.pending)},r.prototype.getImmature=async function(t){const e=t||await this.getBalance();return o.text(e.immature)},r.prototype.getRecentTransactions=async function(){let t,e="";try{t=await this.node.info.wallet.getLast(this.node.info.wallet.account.name,5)}catch(t){return`<h2>${t}</h2>`}for(let n of t){n=await this.node.info.wallet.toDetails(n);const t=new Date(1e3*n.mtime).format("d-m-Y");let r=0,i=null;for(let t of n.inputs)t.path&&(r+=t.value,i="out"),0===n.time&&(i="out sending");if(r){r=0;for(let t of n.outputs)t.path||(r+=t.value,i="out")}else{for(let t of n.outputs)t.path&&(r+=t.value,i="in");0===n.time&&(i="in receiving"),n.tx.isCoinbase()&&(i="rig")}e+=`<holder><i class="glyph-icon flaticon-${i}"></i><span>`,e+=`<label>${t}</label><label>${o.wmcc(r,!0)} wmcc</label>`,e+=`<a><label class='r_goToExp' value="${n.hash}">Show Details</label></a></span></holder>`}return e||"<holder><h2>No recent transaction found.</h2></holder>"},r.prototype.getUnconfirmTxCount=function(){return this.node.mempool.getCount()},r.prototype.getUnconfirmTxSize=function(){return function(t){return t<1048576?(t/1024).toFixed(3):t<1073741824?(t/1024).toFixed(0):void 0}(this.node.mempool.getSize())},r.prototype.getLatestTxs=function(t,e){let n="";if(t){const e=[t.hash("hex"),t.getOutputValue()];if(!this._latesttxs.indexOf(e))return;this._latesttxs.push(e)}else this._latesttxs=[],this.node.mempool.map.forEach((t,e)=>{this._latesttxs.push([e,t.value])});const r=this._latesttxs.length,i=this._latesttxs.slice(Math.max(0,r-5),r);if(i.length){n+="<table>";for(let t=i.length-1;t>=0;t--)n+=`<tr><td><a title='${i[t][0]}' class='r_goToExp'>${i[t][0]}<a></td>`,n+=`<td>${o.wmcc(i[t][1],!0)}</td></tr>`;n+="</table>"}else n="<h2>No transaction in mempool.</h2>";return n},r.prototype.getCurrentBlock=async function(){let t="";const e=this.node.chain.height,n=this.node.chain.tip.rhash(),r=await this.node.chain.getEntry(e),i=await this.node.chain.getBlock(r.hash);return t+="<table>",t+=`<tr><td>Tip</td><td colspan='3'><a title='${n}'>${n}</a></td></tr>`,t+=`<tr><td>Hash</td><td colspan='3'><a title='${r.rhash()}' class='r_goToExp'>${r.rhash()}</a></td></tr>`,t+=`<tr><td>Height</td><td>${e}</td>`,t+=`<td>Age</td><td>${function(t,e){let n=e?t:Math.abs(Date.now()/1e3-t),r="",o={},i=0;const s={year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60,second:1};return Object.keys(s).forEach(function(t){o[t]=Math.floor(n/s[t]),n-=o[t]*s[t],o[t]&&i<1&&(i++,r+=` ${o[t]} ${t}${o[t]>1?"s":""}`)}),`${r}${e?"":" ago"}`}(r.time)}</td></tr>`,t+=`<tr><td>Txns<a></td><td>${i.txs.length}</td>`,t+=`<td>Outputs</td><td>${o.wmcc(i.getClaimed())} wmcc</td></tr>`,t+=`<tr><td>Size</td><td>${i.getVirtualSize()/1e3} kb</td>`,t+=`<td>Weight</td><td>${i.getWeight()/1e3} kwu</td></tr>`},r.prototype.destroy=async function(){},r.prototype.getMinerInfo=function(t){this._getMinerInfo&&!t&&(t=this._getMinerInfo);let e="<table>";return t?(this._getMinerInfo=t,e+=`<tr><td>Address</td><td colspan="3"><a title='${t.address}' class='r_goToExp'>${t.address}</a></td></tr>`,e+=`<tr><td>Height</td><td>${t.height}</td><td>Fees</td><td>${o.wmcc(t.fees)} wmcc</td></tr>`,e+=`<tr><td>Transactions</td><td>${t.items.length+1}</td><td>Difficulty</td><td>${function(t){let e=t>>>24&255,n=65535/(16777215&t);for(;e<29;)n*=256,e++;for(;e>29;)n/=256,e--;return n.toFixed(12)}(t.bits)}</td></tr>`):e+=`<tr><td colspan="2" class="ellipse">Address: ${this.node.info.getAddress()}</td></tr>`,e+="<table>"},r.prototype.minerFoundBlock=function(t,e){if("object"!=typeof t)return;let n="";return n+='<table class=\'minerfound\'><tr><th rowspan="3"><i class="glyph-icon flaticon-remove"></i><i class="glyph-icon flaticon-rig"></i></th>',n+='<th colspan="2">Found New Block!</th></tr>',n+=`<tr><td>Block height</td><td>: ${e.height}</td></tr>`,n+=`<tr><td>Block reward</td><td>: ${o.wmcc(t.txs[0].outputs[0].value)} wmcc</td></tr></table>`},t.exports=r},function(t,e,n){"use strict";function r(t){const e=i.hash160(t),n=Buffer.from(s.MAGIC_STRING+e,"utf8");return i.hash256(n)}const o=n(49),i=Core.crypto.digest,s=Core.http.RPCBase.MAGIC_STRING,a=Core.primitives.Address,l=Core.crypto.ccmp;t.exports={magicHash:r,sign:function(t,e,n){const i=r(t),s=o.sign(i,e);return function(t,e,n){return n&&(e+=4),Buffer.concat([Buffer.from([e+27]),t])}(s.signature,s.recovery,n)},verify:function(t,e,n){Buffer.isBuffer(n)||(n=new Buffer(n,"base64"));const s=function(t){if(65!==t.length)throw new Error("Invalid signature length");const e=t.readUInt8(0)-27;if(e>7)throw new Error("Invalid signature parameter");return{compressed:!!(4&e),recovery:3&e,signature:t.slice(1)}}(n),c=r(t),u=o.recover(c,s.signature,s.recovery,s.compressed),h=i.hash160(u),p=a.fromString(e);return l(h,p.hash)}}},function(t,e,n){"use strict";function r(t,e){if(!t)return Promise.reject(new Error("Expected a stream"));const n=(e=Object.assign({maxBuffer:1/0},e)).maxBuffer;let r,i;const s=new Promise((s,a)=>{const l=t=>{t&&(t.bufferedData=r.getBufferedValue()),a(t)};r=o(e),t.once("error",l),t.pipe(r),r.on("data",()=>{r.getBufferedLength()>n&&a(new Error("maxBuffer exceeded"))}),r.once("error",l),r.on("end",s),i=(()=>{t.unpipe&&t.unpipe(r)})});return s.then(i,i),s.then(()=>r.getBufferedValue())}const o=n(66);t.exports=r,t.exports.buffer=((t,e)=>r(t,Object.assign({},e,{encoding:"buffer"}))),t.exports.array=((t,e)=>r(t,Object.assign({},e,{array:!0})))},function(t,e,n){"use strict";function r(t,e){v=v||n(10),t=t||{},this.objectMode=!!t.objectMode,e instanceof v&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var r=t.highWaterMark,o=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new O,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(C||(C=n(40).StringDecoder),this.decoder=new C(t.encoding),this.encoding=t.encoding)}function o(t){if(v=v||n(10),!(this instanceof o))return new o(t);this._readableState=new r(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),k.call(this)}function i(t,e,n,r,o){var i=t._readableState;if(null===e)i.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,l(t)}(t,i);else{var a;o||(a=function(t,e){var n;(function(t){return $.isBuffer(t)||t instanceof E})(e)||"string"==typeof e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));return n}(i,e)),a?t.emit("error",a):i.objectMode||e&&e.length>0?("string"==typeof e||i.objectMode||Object.getPrototypeOf(e)===$.prototype||(e=function(t){return $.from(t)}(e)),r?i.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):s(t,i,e,!0):i.ended?t.emit("error",new Error("stream.push() after EOF")):(i.reading=!1,i.decoder&&!n?(e=i.decoder.write(e),i.objectMode||0!==e.length?s(t,i,e,!1):u(t,i)):s(t,i,e,!1))):r||(i.reading=!1)}return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(i)}function s(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&l(t)),u(t,e)}function a(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=R?t=R:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function l(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(A("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?b(c,t):c(t))}function c(t){A("emit readable"),t.emit("readable"),f(t)}function u(t,e){e.readingMore||(e.readingMore=!0,b(h,t,e))}function h(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(A("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function p(t){A("readable nexttick read 0"),t.read(0)}function d(t,e){e.reading||(A("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),f(t),e.flowing&&!e.reading&&t.read(0)}function f(t){var e=t._readableState;for(A("flow",e.flowing);e.flowing&&null!==t.read(););}function m(t,e){if(0===e.length)return null;var n;return e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=function(t,e,n){var r;t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():n?function(t,e){var n=e.head,r=1,o=n.data;t-=o.length;for(;n=n.next;){var i=n.data,s=t>i.length?i.length:t;if(s===i.length?o+=i:o+=i.slice(0,t),0===(t-=s)){s===i.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=i.slice(s));break}++r}return e.length-=r,o}(t,e):function(t,e){var n=$.allocUnsafe(t),r=e.head,o=1;r.data.copy(n),t-=r.data.length;for(;r=r.next;){var i=r.data,s=t>i.length?i.length:t;if(i.copy(n,n.length-t,0,s),0===(t-=s)){s===i.length?(++o,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=i.slice(s));break}++o}return e.length-=o,n}(t,e);return r}(t,e.buffer,e.decoder),n}function g(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,b(y,e,t))}function y(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function w(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}var b=n(19);t.exports=o;var v,_=n(77);o.ReadableState=r;n(12).EventEmitter;var x=function(t,e){return t.listeners(e).length},k=n(37),$=n(13).Buffer,E=global.Uint8Array||function(){},S=n(14);S.inherits=n(9);var T=n(20),A=void 0;A=T&&T.debuglog?T.debuglog("stream"):function(){};var C,O=n(80),B=n(38);S.inherits(o,k);var j=["error","close","destroy","pause","resume"];Object.defineProperty(o.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),o.prototype.destroy=B.destroy,o.prototype._undestroy=B.undestroy,o.prototype._destroy=function(t,e){this.push(null),e(t)},o.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=$.from(t,e),e=""),n=!0),i(this,t,e,!1,n)},o.prototype.unshift=function(t){return i(this,t,null,!0,!1)},o.prototype.isPaused=function(){return!1===this._readableState.flowing},o.prototype.setEncoding=function(t){return C||(C=n(40).StringDecoder),this._readableState.decoder=new C(t),this._readableState.encoding=t,this};var R=8388608;o.prototype.read=function(t){A("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return A("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?g(this):l(this),null;if(0===(t=a(t,e))&&e.ended)return 0===e.length&&g(this),null;var r=e.needReadable;A("need readable",r),(0===e.length||e.length-t<e.highWaterMark)&&A("length less than watermark",r=!0),e.ended||e.reading?A("reading or ended",r=!1):r&&(A("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=a(n,e)));var o;return null===(o=t>0?m(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&g(this)),null!==o&&this.emit("data",o),o},o.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},o.prototype.pipe=function(t,e){function n(e,h){A("onunpipe"),e===c&&h&&!1===h.hasUnpiped&&(h.hasUnpiped=!0,A("cleanup"),t.removeListener("close",s),t.removeListener("finish",a),t.removeListener("drain",p),t.removeListener("error",i),t.removeListener("unpipe",n),c.removeListener("end",r),c.removeListener("end",l),c.removeListener("data",o),d=!0,!u.awaitDrain||t._writableState&&!t._writableState.needDrain||p())}function r(){A("onend"),t.end()}function o(e){A("ondata"),m=!1;!1!==t.write(e)||m||((1===u.pipesCount&&u.pipes===t||u.pipesCount>1&&-1!==w(u.pipes,t))&&!d&&(A("false write response, pause",c._readableState.awaitDrain),c._readableState.awaitDrain++,m=!0),c.pause())}function i(e){A("onerror",e),l(),t.removeListener("error",i),0===x(t,"error")&&t.emit("error",e)}function s(){t.removeListener("finish",a),l()}function a(){A("onfinish"),t.removeListener("close",s),l()}function l(){A("unpipe"),c.unpipe(t)}var c=this,u=this._readableState;switch(u.pipesCount){case 0:u.pipes=t;break;case 1:u.pipes=[u.pipes,t];break;default:u.pipes.push(t)}u.pipesCount+=1,A("pipe count=%d opts=%j",u.pipesCount,e);var h=(!e||!1!==e.end)&&t!==process.stdout&&t!==process.stderr?r:l;u.endEmitted?b(h):c.once("end",h),t.on("unpipe",n);var p=function(t){return function(){var e=t._readableState;A("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&x(t,"data")&&(e.flowing=!0,f(t))}}(c);t.on("drain",p);var d=!1,m=!1;return c.on("data",o),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?_(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(t,"error",i),t.once("close",s),t.once("finish",a),t.emit("pipe",c),u.flowing||(A("pipe resume"),c.resume()),t},o.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n),this);if(!t){var r=e.pipes,o=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var i=0;i<o;i++)r[i].emit("unpipe",this,n);return this}var s=w(e.pipes,t);return-1===s?this:(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n),this)},o.prototype.on=function(t,e){var n=k.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&l(this):b(p,this))}return n},o.prototype.addListener=o.prototype.on,o.prototype.resume=function(){var t=this._readableState;return t.flowing||(A("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,b(d,t,e))}(this,t)),this},o.prototype.pause=function(){return A("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(A("pause"),this._readableState.flowing=!1,this.emit("pause")),this},o.prototype.wrap=function(t){var e=this._readableState,n=!1,r=this;t.on("end",function(){if(A("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&r.push(t)}r.push(null)}),t.on("data",function(o){if(A("wrapped data"),e.decoder&&(o=e.decoder.write(o)),(!e.objectMode||null!==o&&void 0!==o)&&(e.objectMode||o&&o.length)){r.push(o)||(n=!0,t.pause())}});for(var o in t)void 0===this[o]&&"function"==typeof t[o]&&(this[o]=function(e){return function(){return t[e].apply(t,arguments)}}(o));for(var i=0;i<j.length;i++)t.on(j[i],r.emit.bind(r,j[i]));return r._read=function(e){A("wrapped _read",e),n&&(n=!1,t.resume())},r},o._fromList=m},function(t,e,n){t.exports=n(3)},function(t,e,n){"use strict";function r(t,e){t.emit("error",e)}var o=n(19);t.exports={destroy:function(t,e){var n=this,i=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;i||s?e?e(t):!t||this._writableState&&this._writableState.errorEmitted||o(r,this,t):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(o(r,n,t),n._writableState&&(n._writableState.errorEmitted=!0)):e&&e(t)}))},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,n){"use strict";function r(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var r=t.entry;t.entry=null;for(;r;){var o=r.callback;e.pendingcb--,o(n),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}function o(){}function i(t,e){m=m||n(10),t=t||{},this.objectMode=!!t.objectMode,e instanceof m&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var o=t.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=o||0===o?o:i,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===t.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,r=n.sync,o=n.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,r,o){--e.pendingcb,n?(f(o,r),f(d,t,e),t._writableState.errorEmitted=!0,t.emit("error",r)):(o(r),t._writableState.errorEmitted=!0,t.emit("error",r),d(t,e))}(t,n,r,e,o);else{var i=h(n);i||n.corked||n.bufferProcessing||!n.bufferedRequest||u(t,n),r?g(c,t,n,i,o):c(t,n,i,o)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function s(t){if(m=m||n(10),!(k.call(s,this)||this instanceof m))return new s(t);this._writableState=new i(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),b.call(this)}function a(t,e,n,r,o,i){if(!n){var s=function(t,e,n){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=v.from(e,n)),e}(e,r,o);r!==s&&(n=!0,o="buffer",r=s)}var a=e.objectMode?1:r.length;e.length+=a;var c=e.length<e.highWaterMark;if(c||(e.needDrain=!0),e.writing||e.corked){var u=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:o,isBuf:n,callback:i,next:null},u?u.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else l(t,e,!1,a,r,o,i);return c}function l(t,e,n,r,o,i,s){e.writelen=r,e.writecb=s,e.writing=!0,e.sync=!0,n?t._writev(o,e.onwrite):t._write(o,i,e.onwrite),e.sync=!1}function c(t,e,n,r){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),d(t,e)}function u(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var o=e.bufferedRequestCount,i=new Array(o),s=e.corkedRequestsFree;s.entry=n;for(var a=0,c=!0;n;)i[a]=n,n.isBuf||(c=!1),n=n.next,a+=1;i.allBuffers=c,l(t,e,!0,e.length,i,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new r(e)}else{for(;n;){var u=n.chunk,h=n.encoding,p=n.callback;if(l(t,e,!1,e.objectMode?1:u.length,u,h,p),n=n.next,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=n,e.bufferProcessing=!1}function h(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function p(t,e){t._final(function(n){e.pendingcb--,n&&t.emit("error",n),e.prefinished=!0,t.emit("prefinish"),d(t,e)})}function d(t,e){var n=h(e);return n&&(!function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,f(p,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),n}var f=n(19);t.exports=s;var m,g=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:f;s.WritableState=i;var y=n(14);y.inherits=n(9);var w={deprecate:n(81)},b=n(37),v=n(13).Buffer,_=global.Uint8Array||function(){},x=n(38);y.inherits(s,b),i.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(i.prototype,"buffer",{get:w.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}();var k;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(k=Function.prototype[Symbol.hasInstance],Object.defineProperty(s,Symbol.hasInstance,{value:function(t){return!!k.call(this,t)||t&&t._writableState instanceof i}})):k=function(t){return t instanceof this},s.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},s.prototype.write=function(t,e,n){var r=this._writableState,i=!1,s=function(t){return v.isBuffer(t)||t instanceof _}(t)&&!r.objectMode;return s&&!v.isBuffer(t)&&(t=function(t){return v.from(t)}(t)),"function"==typeof e&&(n=e,e=null),s?e="buffer":e||(e=r.defaultEncoding),"function"!=typeof n&&(n=o),r.ended?function(t,e){var n=new Error("write after end");t.emit("error",n),f(e,n)}(this,n):(s||function(t,e,n,r){var o=!0,i=!1;return null===n?i=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||e.objectMode||(i=new TypeError("Invalid non-string/buffer chunk")),i&&(t.emit("error",i),f(r,i),o=!1),o}(this,r,t,n))&&(r.pendingcb++,i=a(this,r,s,t,e,n)),i},s.prototype.cork=function(){this._writableState.corked++},s.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||u(this,t))},s.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},s.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},s.prototype._writev=null,s.prototype.end=function(t,e,n){var r=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!==t&&void 0!==t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(t,e,n){e.ending=!0,d(t,e),n&&(e.finished?f(n):t.once("finish",n)),e.ended=!0,t.writable=!1}(this,r,n)},Object.defineProperty(s.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),s.prototype.destroy=x.destroy,s.prototype._undestroy=x.undestroy,s.prototype._destroy=function(t,e){this.end(),e(t)}},function(t,e,n){"use strict";function r(t){this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(p.isEncoding===d||!d(t)))throw new Error("Unknown encoding: "+t);return e||t}(t);var e;switch(this.encoding){case"utf16le":this.text=s,this.end=a,e=4;break;case"utf8":this.fillLast=i,e=4;break;case"base64":this.text=l,this.end=c,e=3;break;default:return this.write=u,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=p.allocUnsafe(e)}function o(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:-1}function i(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!=(192&e[0]))return t.lastNeed=0,"�".repeat(n);if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�".repeat(n+1);if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�".repeat(n+2)}}(this,t,e);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function s(t,e){if((t.length-e)%2==0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function a(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function l(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function c(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function u(t){return t.toString(this.encoding)}function h(t){return t&&t.length?this.write(t):""}var p=n(13).Buffer,d=p.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};e.StringDecoder=r,r.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},r.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�".repeat(this.lastTotal-this.lastNeed):e},r.prototype.text=function(t,e){var n=function(t,e,n){var r=e.length-1;if(r<n)return 0;var i=o(e[r]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--r<n?0:(i=o(e[r]))>=0?(i>0&&(t.lastNeed=i-2),i):--r<n?0:(i=o(e[r]))>=0?(i>0&&(2===i?i=0:t.lastNeed=i-3),i):0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},r.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,n){"use strict";function r(t){this.afterTransform=function(e,n){return function(t,e,n){var r=t._transformState;r.transforming=!1;var o=r.writecb;if(!o)return t.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!==n&&void 0!==n&&t.push(n);o(e);var i=t._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&t._read(i.highWaterMark)}(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function o(t){if(!(this instanceof o))return new o(t);s.call(this,t),this._transformState=new r(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(t,n){i(e,t,n)}):i(e)})}function i(t,e,n){if(e)return t.emit("error",e);null!==n&&void 0!==n&&t.push(n);var r=t._writableState,o=t._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(o.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}t.exports=o;var s=n(10),a=n(14);a.inherits=n(9),a.inherits(o,s),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,s.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},o.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var o=this._readableState;(r.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},o.prototype._destroy=function(t,e){var n=this;s.prototype._destroy.call(this,t,function(t){e(t),n.emit("close")})}},function(t,e,n){"use strict";const r=t.exports;let o,i=[],s=[];r.encrypt=function(t,e){const n=r._UTF8.stringToBytes(t),o=r._utils.randomBytes(8),i=e.constructor==String?r._PBKDF2(e,o,32,{asBytes:!0}):e;return r._internal(n,i,r._utils.bytesToWords(o)),r._utils.bytesToHex(o.concat(n))},r.decrypt=function(t,e){const n=r._utils.hexToBytes(t),o=n.splice(0,8),i=e.constructor==String?r._PBKDF2(e,o,32,{asBytes:!0}):e;return r._internal(n,i,r._utils.bytesToWords(o)),r._UTF8.bytesToString(n)},r._internal=function(t,e,n){r._keysetup(e),n&&r._ivsetup(n);let o=[];for(let e=0;e<t.length;e++){if(e%16==0){r._nextstate(),o[0]=i[0]^i[5]>>>16^i[3]<<16,o[1]=i[2]^i[7]>>>16^i[5]<<16,o[2]=i[4]^i[1]>>>16^i[7]<<16,o[3]=i[6]^i[3]>>>16^i[1]<<16;for(let t=0;t<4;t++)o[t]=16711935&(o[t]<<8|o[t]>>>24)|4278255360&(o[t]<<24|o[t]>>>8);for(let t=120;t>=0;t-=8)o[t/8]=o[t>>>5]>>>24-t%32&255}t[e]^=o[e%16]}},r._keysetup=function(t){i[0]=t[0],i[2]=t[1],i[4]=t[2],i[6]=t[3],i[1]=t[3]<<16|t[2]>>>16,i[3]=t[0]<<16|t[3]>>>16,i[5]=t[1]<<16|t[0]>>>16,i[7]=t[2]<<16|t[1]>>>16,s[0]=r._utils.rotl(t[2],16),s[2]=r._utils.rotl(t[3],16),s[4]=r._utils.rotl(t[0],16),s[6]=r._utils.rotl(t[1],16),s[1]=4294901760&t[0]|65535&t[1],s[3]=4294901760&t[1]|65535&t[2],s[5]=4294901760&t[2]|65535&t[3],s[7]=4294901760&t[3]|65535&t[0],o=0;for(let t=0;t<4;t++)r._nextstate();for(let t=0;t<8;t++)s[t]^=i[t+4&7]},r._ivsetup=function(t){const e=r._utils.endian(t[0]),n=r._utils.endian(t[1]),o=e>>>16|4294901760&n,i=n<<16|65535&e;s[0]^=e,s[1]^=o,s[2]^=n,s[3]^=i,s[4]^=e,s[5]^=o,s[6]^=n,s[7]^=i;for(let t=0;t<4;t++)r._nextstate()},r._nextstate=function(){let t=[];for(let e=0;e<8;e++)t[e]=s[e];s[0]=s[0]+1295307597+o>>>0,s[1]=s[1]+3545052371+(s[0]>>>0<t[0]>>>0?1:0)>>>0,s[2]=s[2]+886263092+(s[1]>>>0<t[1]>>>0?1:0)>>>0,s[3]=s[3]+1295307597+(s[2]>>>0<t[2]>>>0?1:0)>>>0,s[4]=s[4]+3545052371+(s[3]>>>0<t[3]>>>0?1:0)>>>0,s[5]=s[5]+886263092+(s[4]>>>0<t[4]>>>0?1:0)>>>0,s[6]=s[6]+1295307597+(s[5]>>>0<t[5]>>>0?1:0)>>>0,s[7]=s[7]+3545052371+(s[6]>>>0<t[6]>>>0?1:0)>>>0,o=s[7]>>>0<t[7]>>>0?1:0;let e=[];for(let t=0;t<8;t++){const n=i[t]+s[t]>>>0,r=65535&n,o=n>>>16,a=((r*r>>>17)+r*o>>>15)+o*o,l=((4294901760&n)*n>>>0)+((65535&n)*n>>>0)>>>0;e[t]=a^l}i[0]=e[0]+(e[7]<<16|e[7]>>>16)+(e[6]<<16|e[6]>>>16),i[1]=e[1]+(e[0]<<8|e[0]>>>24)+e[7],i[2]=e[2]+(e[1]<<16|e[1]>>>16)+(e[0]<<16|e[0]>>>16),i[3]=e[3]+(e[2]<<8|e[2]>>>24)+e[1],i[4]=e[4]+(e[3]<<16|e[3]>>>16)+(e[2]<<16|e[2]>>>16),i[5]=e[5]+(e[4]<<8|e[4]>>>24)+e[3],i[6]=e[6]+(e[5]<<16|e[5]>>>16)+(e[4]<<16|e[4]>>>16),i[7]=e[7]+(e[6]<<8|e[6]>>>24)+e[5]},r._utils={randomBytes:function(t){let e=[];for(;t>0;t--)e.push(Math.floor(256*Math.random()));return e},randomHex:function(t){return r._utils.bytesToHex(r._utils.randomBytes(t))},wordsToBytes:function(t){let e=[];for(let n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e},bytesToWords:function(t){let e=[];for(let n=0,r=0;n<t.length;n++,r+=8)e[r>>>5]|=t[n]<<24-r%32;return e},bytesToHex:function(t){let e=[];for(let n=0;n<t.length;n++)e.push((t[n]>>>4).toString(16)),e.push((15&t[n]).toString(16));return e.join("")},hexToBytes:function(t){let e=[];for(let n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},wordsToHex:function(t){return new Buffer(Buffer.from(t).toString("hex"))},rotl:function(t,e){return t<<e|t>>>32-e},endian:function(t){if(t.constructor==Number)return 16711935&r._utils.rotl(t,8)|4278255360&r._utils.rotl(t,24);for(let e=0;e<t.length;e++)t[e]=r._utils.endian(t[e]);return t}},r._UTF8={stringToBytes:function(t){return r._Binary.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){try{return decodeURIComponent(escape(r._Binary.bytesToString(t)))}catch(t){throw new Error("ERROR DECODING URI: "+t.message)}}},r._Binary={stringToBytes:function(t){let e=[];for(let n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e},bytesToString:function(t){let e=[];for(let n=0;n<t.length;n++)e.push(String.fromCharCode(t[n]));return e.join("")}},r._PBKDF2=function(t,e,n,o){function i(t,e){return r._HMAC(s,e,t,{asBytes:!0})}t.constructor==String&&(t=r._UTF8.stringToBytes(t)),e.constructor==String&&(e=r._UTF8.stringToBytes(e));const s=o&&o.hasher||r._SHA1,a=o&&o.iterations||1;let l=[],c=1;for(;l.length<n;){let n=i(t,e.concat(r._utils.wordsToBytes([c]))),o=n;for(let e=1;e<a;e++){o=i(t,o);for(let t=0;t<n.length;t++)n[t]^=o[t]}l=l.concat(n),c++}return l.length=n,o&&o.asBytes?l:o&&o.asString?r._Binary.bytesToString(l):r._utils.bytesToHex(l)},r._SHA1=function(t,e){const n=r._utils.wordsToBytes(r._SHA1._internal(t));return e&&e.asBytes?n:e&&e.asString?r._Binary.bytesToString(n):r._utils.bytesToHex(n)},r._SHA1._internal=function(t){t.constructor==String&&(t=r._UTF8.stringToBytes(t));let e=r._utils.bytesToWords(t),n=8*t.length,o=[],i=1732584193,s=-271733879,a=-1732584194,l=271733878,c=-1009589776;e[n>>5]|=128<<24-n%32,e[15+(n+64>>>9<<4)]=n;for(let t=0;t<e.length;t+=16){let n=i,r=s,u=a,h=l,p=c;for(let n=0;n<80;n++){if(n<16)o[n]=e[t+n];else{let t=o[n-3]^o[n-8]^o[n-14]^o[n-16];o[n]=t<<1|t>>>31}const r=(i<<5|i>>>27)+c+(o[n]>>>0)+(n<20?1518500249+(s&a|~s&l):n<40?1859775393+(s^a^l):n<60?(s&a|s&l|a&l)-1894007588:(s^a^l)-899497514);c=l,l=a,a=s<<30|s>>>2,s=i,i=r}i+=n,s+=r,a+=u,l+=h,c+=p}return[i,s,a,l,c]},r._HMAC=function(t,e,n,o){e.constructor==String&&(e=r._UTF8.stringToBytes(e)),n.constructor==String&&(n=r._UTF8.stringToBytes(n)),n.length>4*t._blocksize&&(n=t(n,{asBytes:!0}));let i=n.slice(0),s=n.slice(0);for(let e=0;e<4*t._blocksize;e++)i[e]^=92,s[e]^=54;const a=t(i.concat(t(s.concat(e),{asBytes:!0})),{asBytes:!0});return o&&o.asBytes?a:o&&o.asString?r._Binary.bytesToString(a):r._utils.bytesToHex(a)},t.exports=r},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);d.call(this,t),this.spv=!1,this.chain=new o({network:this.network,logger:this.logger,workers:this.workers,db:this.config.str("db"),prefix:this.config.prefix,maxFiles:this.config.uint("max-files"),cacheSize:this.config.mb("cache-size"),forceFlags:this.config.bool("force-flags"),bip91:this.config.bool("bip91"),bip148:this.config.bool("bip148"),prune:this.config.bool("prune"),checkpoints:this.config.bool("checkpoints"),coinCache:this.config.mb("coin-cache"),entryCache:this.config.uint("entry-cache"),indexTX:this.config.bool("index-tx"),indexAddress:this.config.bool("index-address")}),this.fees=new i(this.logger),this.fees.init(),this.mempool=new s({network:this.network,logger:this.logger,workers:this.workers,chain:this.chain,fees:this.fees,db:this.config.str("db"),prefix:this.config.prefix,persistent:this.config.bool("persistent-mempool"),maxSize:this.config.mb("mempool-size"),limitFree:this.config.bool("limit-free"),limitFreeRelay:this.config.uint("limit-free-relay"),requireStandard:this.config.bool("require-standard"),rejectAbsurdFees:this.config.bool("reject-absurd-fees"),replaceByFee:this.config.bool("replace-by-fee"),indexAddress:this.config.bool("index-address")}),this.pool=new a({network:this.network,logger:this.logger,chain:this.chain,mempool:this.mempool,prefix:this.config.prefix,selfish:this.config.bool("selfish"),compact:this.config.bool("compact"),bip37:this.config.bool("bip37"),bip151:this.config.bool("bip151"),bip150:this.config.bool("bip150"),identityKey:this.config.buf("identity-key"),maxOutbound:this.config.uint("max-outbound"),maxInbound:this.config.uint("max-inbound"),proxy:this.config.str("proxy"),onion:this.config.bool("onion"),upnp:this.config.bool("upnp"),seeds:this.config.array("seeds"),nodes:this.config.array("nodes"),only:this.config.array("only"),publicHost:this.config.str("public-host"),publicPort:this.config.uint("public-port"),host:this.config.str("host"),port:this.config.uint("port"),listen:this.config.bool("listen"),persistent:this.config.bool("persistent")}),this.miner=new l({network:this.network,logger:this.logger,workers:this.workers,chain:this.chain,mempool:this.mempool,address:this.config.array("coinbase-address"),coinbaseFlags:this.config.str("coinbase-flags"),preverify:this.config.bool("preverify"),maxWeight:this.config.uint("max-weight"),reservedWeight:this.config.uint("reserved-weight"),reservedSigops:this.config.uint("reserved-sigops")}),this.rpc=new u(this),c.unsupported||(this.http=new c({network:this.network,logger:this.logger,node:this,prefix:this.config.prefix,ssl:this.config.bool("ssl"),keyFile:this.config.path("ssl-key"),certFile:this.config.path("ssl-cert"),host:this.config.str("http-host"),port:this.config.uint("http-port"),apiKey:this.config.str("api-key"),noAuth:this.config.bool("no-auth")})),this.client=new f(this),this.walletdb=new h({network:this.network,logger:this.logger,workers:this.workers,client:this.client,prefix:this.config.prefix,db:this.config.str(["wallet-db","db"]),maxFiles:this.config.uint("wallet-max-files"),cacheSize:this.config.mb("wallet-cache-size"),witness:this.config.bool("wallet-witness"),checkpoints:this.config.bool("wallet-checkpoints"),startHeight:this.config.uint("wallet-start-height"),wipeNoReally:this.config.bool("wallet-wipe-no-really"),apiKey:this.config.str(["wallet-api-key","api-key"]),walletAuth:this.config.bool("wallet-auth"),noAuth:this.config.bool(["wallet-no-auth","no-auth"]),ssl:this.config.str("wallet-ssl"),host:this.config.str("wallet-host"),port:this.config.uint("wallet-port"),spv:this.spv,verify:this.spv,listen:!1}),this.auth=new p({network:this.network,logger:this.logger,walletdb:this.walletdb,chain:this.chain,otp:this.config.bool("auth-otp"),alg:this.config.str("hsm-alg"),hash:this.config.str("hsm-hash"),iter:this.config.str("hsm-iter"),r:this.config.str("hsm-r"),p:this.config.str("hsm-p"),length:this.config.str("hsm-length")}),this.http&&this.walletdb.http&&this.walletdb.http.attach(this.http),this.walletdb.rpc.attach(this.rpc),this.info=new g(this),this.attach=new m(this),this._init()}const o=Core.blockchain.Chain,i=Core.txmempool.Fees,s=Core.txmempool.Mempool,a=Core.net.Pool,l=Core.mining.Miner,c=Core.http.Server,u=Core.http.RPC,h=Core.wallet.WalletDB,p=n(28),d=n(31),f=n(44),m=n(33),g=n(45);Object.setPrototypeOf(r.prototype,d.prototype),r.prototype._init=function(){this.chain.on("error",t=>this.error(t)),this.mempool.on("error",t=>this.error(t)),this.pool.on("error",t=>this.error(t)),this.miner.on("error",t=>this.error(t)),this.walletdb.on("error",t=>this.error(t)),this.http&&this.http.on("error",t=>this.error(t)),this.mempool.on("tx",t=>{this.miner.cpu.notifyEntry(),this.emit("tx",t)}),this.chain.hook("connect",async(t,e)=>{try{await this.mempool._addBlock(t,e.txs)}catch(t){this.error(t)}this.emit("block",e),this.emit("connect",t,e)}),this.chain.hook("disconnect",async(t,e)=>{try{await this.mempool._removeBlock(t,e.txs)}catch(t){this.error(t)}this.emit("disconnect",t,e)}),this.chain.hook("reorganize",async(t,e)=>{try{await this.mempool._handleReorg()}catch(t){this.error(t)}this.emit("reorganize",t,e)}),this.chain.hook("reset",async t=>{try{await this.mempool._reset()}catch(t){this.error(t)}this.emit("reset",t)}),this.loadPlugins()},r.prototype._open=async function(){await this.chain.open(),await this.mempool.open(),await this.miner.open(),await this.pool.open(),await this.walletdb.open(),await this.openPlugins(),this.http&&await this.http.open(),this.logger.info("Node is loaded.")},r.prototype._close=async function(){this.http&&await this.http.close(),await this.closePlugins(),await this.walletdb.close(),await this.pool.close(),await this.miner.close(),await this.mempool.close(),await this.chain.close(),this.logger.info("Node is closed.")},r.prototype.scan=function(t,e,n){return this.chain.scan(t,e,n)},r.prototype.broadcast=async function(t){try{await this.pool.broadcast(t)}catch(t){this.emit("error",t)}},r.prototype.sendTX=async function(t){let e;try{e=await this.mempool.addTX(t)}catch(e){if("VerifyError"===e.type&&0===e.score)return this.error(e),this.logger.warning("Verification failed for tx: %s.",t.txid()),this.logger.warning("Attempting to broadcast anyway..."),void this.broadcast(t);throw e}if(e)return this.logger.warning("TX was orphaned in mempool: %s.",t.txid()),this.logger.warning("Attempting to broadcast anyway..."),void this.broadcast(t);this.pool.options.selfish&&this.pool.broadcast(t)},r.prototype.relay=async function(t){try{await this.sendTX(t)}catch(t){this.error(t)}},r.prototype.connect=function(){return this.pool.connect()},r.prototype.disconnect=function(){return this.pool.disconnect()},r.prototype.startSync=function(){return this.pool.startSync()},r.prototype.stopSync=function(){return this.pool.stopSync()},r.prototype.getBlock=function(t){return this.chain.getBlock(t)},r.prototype.getCoin=async function(t,e){const n=this.mempool.getCoin(t,e);return n||(this.mempool.isSpent(t,e)?null:await this.chain.getCoin(t,e))},r.prototype.getCoinsByAddress=async function(t){const e=this.mempool.getCoinsByAddress(t),n=await this.chain.getCoinsByAddress(t),r=[];for(const t of n){this.mempool.isSpent(t.hash,t.index)||r.push(t)}for(const t of e)r.push(t);return r},r.prototype.getMetaByAddress=async function(t){const e=this.mempool.getMetaByAddress(t);return(await this.chain.getMetaByAddress(t)).concat(e)},r.prototype.getMeta=async function(t){const e=this.mempool.getMeta(t);return e||await this.chain.getMeta(t)},r.prototype.getMetaView=async function(t){return-1===t.height?this.mempool.getSpentView(t.tx):this.chain.getSpentView(t.tx)},r.prototype.getTXByAddress=async function(t){const e=await this.getMetaByAddress(t),n=[];for(const t of e)n.push(t.tx);return n},r.prototype.getTX=async function(t){const e=await this.getMeta(t);return e?e.tx:null},r.prototype.hasTX=async function(t){return!!this.mempool.hasEntry(t)||await this.chain.hasTX(t)},r.prototype._on=async function(t,e,n){return await this.attach.on(t,e,n)},r.prototype._emit=async function(t,e){return await this.attach.emit(t,e)},r.prototype._call=async function(t,e,n){return n&&Object.keys(n).length?await this[e][t](...Object.values(n)):await this[e][t]()},t.exports=r},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);o.call(this),this.node=t,this.network=t.network,this.filter=null,this.listen=!1,this._init()}const o=Core.utils.AsyncObject;Object.setPrototypeOf(r.prototype,o.prototype),r.prototype._init=function(){this.node.on("connect",(t,e)=>{this.listen&&this.emit("block connect",t,e.txs)}),this.node.on("disconnect",(t,e)=>{this.listen&&this.emit("block disconnect",t)}),this.node.on("tx",t=>{this.listen&&this.emit("tx",t)}),this.node.on("reset",t=>{this.listen&&this.emit("chain reset",t)})},r.prototype._open=function(t){return this.listen=!0,Promise.resolve()},r.prototype._close=function(){return this.listen=!1,Promise.resolve()},r.prototype.getTip=function(){return Promise.resolve(this.node.chain.tip)},r.prototype.getEntry=async function(t){const e=await this.node.chain.getEntry(t);return e&&await this.node.chain.isMainChain(e)?e:null},r.prototype.send=function(t){return this.node.relay(t),Promise.resolve()},r.prototype.setFilter=function(t){return this.filter=t,this.node.pool.setFilter(t),Promise.resolve()},r.prototype.addFilter=function(t){return this.node.pool.queueFilterLoad(),Promise.resolve()},r.prototype.resetFilter=function(){return this.node.pool.queueFilterLoad(),Promise.resolve()},r.prototype.estimateFee=async function(t){return this.node.fees?this.node.fees.estimateFee(t):this.network.feeRate},r.prototype.rescan=function(t){return this.node.chain.scan(t,this.filter,(t,e)=>this.fire("block rescan",t,e))},t.exports=r},function(module,exports,__webpack_require__){"use strict";function Info(t){if(!(this instanceof Info))return new Info(t);this.info=null,this.node=t,this.wallet=t.wallet||null,this.account=t.wallet?t.wallet.account:null,this.explorer={isHome:!0}}function toDifficulty(t){let e=t>>>24&255,n=65535/(16777215&t);for(;e<29;)n*=256,e++;for(;e>29;)n/=256,e--;return n.toFixed(12)}function substract(t,e,n=8){const r=Math.pow(10,n);return(t*r-e*r).toFixed(0)/r}function sum(t,e,n=8){const r=Math.pow(10,n);return(t*r+e*r).toFixed(0)/r}function compare(t,e){const n=t.time?t.time:t.mtime,r=e.time?e.time:e.mtime;return n<r?1:r<n?-1:0}function toTxTable(t,e){let n="",r=!1;if(Object.keys(t.input).length)for(let o in t.input)o===e?(n+=`<div><span>${o}</span>`,r=!0):t.pending.includes(o)?n+=`<div><i class="glyph-icon flaticon-copy next" title="Copy"></i>\n          <span class='red address r_goToExp' title='Output from unconfirmed transaction'>${o}</span>`:n+=`<div><i class="glyph-icon flaticon-copy next" title="Copy"></i><span class='address r_goToExp'>${o}</span>`,n+=`<span class='value'>${Amount.wmcc(t.input[o],!0)} wmcc</span></div>`;else n+="<div><span class='coinbase'>No Inputs (Newly Generated Coins)</span></div>";n+=`</td><td><i class="glyph-icon flaticon-${r?"out red":"in green"}"></i></td><td>`;for(let r in t.output)n+="<div>",n+="unknown"===r?"<a class='unparsed'>Unparsed output address</a>":r===e?`<div><i class="glyph-icon flaticon-copy next" title="Copy"></i><span>${r}</span>`:`<i class="glyph-icon flaticon-copy next" title="Copy"></i><span class='address r_goToExp'>${r}</span>`,n+=`<span class='value'>${Amount.wmcc(t.output[r],!0)} wmcc</span></div>`;return n}function page(t,e,n,r){let o="";const i=e-n,s=e+n,a=parseInt(e/n+1),l=Math.ceil(t/n),{start:c,end:u}=median(a,l,10);o+=`<div class="page"><a ${0===e?'class="disable"':'class="'+r+'" offset="'+i+'" limit="'+n+'"'}>&#9668;</a>`;for(let t=c;t<u;t++)o+=`<a ${a===t+1?'class="active"':'class="'+r+'" offset="'+n*t+'" limit="'+n+'"'}>${t+1}</a>`;return o+=`<a ${s+1>t?'class="disable"':'class="'+r+'" offset="'+s+'" limit="'+n+'"'}>&#9658;</a></div>`}function age(t,e){let n=e?t:Math.abs(Date.now()/1e3-t),r="",o={},i=0;const s={year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60,second:1};return Object.keys(s).forEach(function(t){o[t]=Math.floor(n/s[t]),n-=o[t]*s[t],o[t]&&i<2&&(i++,r+=` ${o[t]} ${t}${o[t]>1?"s":""}`)}),`${r}${e?"":" ago"}`}function filtermeta(t){return t.filter(function(t,e,n){return n[e].tx._hhash!==t.tx._hhash})}function filtermeta(t){let e=[];return t.filter(function(t){return-1===e.indexOf(t.tx._hhash)&&(e.push(t.tx._hhash),!0)})}function median(t,e,n){let r=Math.max(0,t-n/2);const o=Math.min(r+n,e);return r=Math.max(0,Math.min(o-n,o)),{start:r,end:o}}const Address=Core.primitives.Address,Account=Core.wallet.Account,Amount=Core.wmcc.Amount,Encoding=Core.utils.encoding,Util=Core.utils.util,Consensus=Core.protocol.consensus,Policy=Core.protocol.policy;Info.prototype.getWalletID=function(){return this.wallet.id},Info.prototype.getAccounts=function(){return this.wallet.getAccounts()},Info.prototype.getAccount=function(){return this.wallet.account},Info.prototype.getAccountName=function(){return this.wallet.account.name},Info.prototype.getTempReceive=function(){return this.wallet.getTempReceive().toString()},Info.prototype.createReceive=async function(){const t=await this.getAccountName();await this.wallet.createReceive(t);return this.getTempReceive()},Info.prototype.estimateFee=async function(){let t=await this.node.walletdb.estimateFee();return Amount.wmcc(t)},Info.prototype.estimatePri=async function(){let t=await this.node.fees.estimatePriority();return 0===t&&(t=this.node.fees.minTrackedPri),Amount.wmcc(t)},Info.prototype.isMinerStarted=function(){return this.node.miner.cpu.running},Info.prototype.startMining=async function(){try{return await this.node.miner.cpu.start()}catch(t){}},Info.prototype.stopMining=async function(){try{return await this.node.miner.cpu.stop()}catch(t){this.node.miner.reset(!1)}},Info.prototype.getAddress=function(){return this.node.miner.getAddress().toString()},Info.prototype.getWalletInfo=async function(){let t="";const e=this.wallet.toJSON(!0);return t+=`<holder><i class="glyph-icon flaticon-wallets"></i><span>${e.id} <a>Wallet Name</a></span></holder>`,t+=`<holder><i class="glyph-icon flaticon-id"></i><span>${e.wid} <a>Wallet ID</a></span></holder>`,t+=`<holder><i class="glyph-icon flaticon-account"></i><span>${e.account.name} <a>Account Name</a></span></holder>`,t+=`<holder><i class="glyph-icon flaticon-account-lock"></i><span>${e.account.type.toUpperCase()} <a>Account Type</a></span></holder>`,t+=`<holder><i class="glyph-icon flaticon-swap"></i><span>${e.state.tx} <a>Number of Transactions</a></span></holder>`,t+=`<holder><i class="glyph-icon flaticon-network"></i><span>${e.network.toUpperCase()} <a>Network</a></span></holder>`},Info.prototype.getWalletDetails=async function(){let t="<table>";const e=this.wallet.toJSON(!0),n=e.account.accountKey,{tx:r,coin:o,confirmed:i,unconfirmed:s}=e.state;return t+=`<tr><td>Wallet Name</td><td colspan="2">${e.id}</td></tr>`,t+=`<tr><td>Wallet ID</td><td colspan="2">${e.wid}</td></tr>`,t+=`<tr><td>Wallet Key</td><td>${e.chksum.toString("hex")}★★★★★</td>`,t+='<td><i class="glyph-icon flaticon-copy" title="Copy"></i></td></tr>',t+=`<tr><td>Token</td><td title="${e.token}">${e.token.slice(0,32)}...</td>`,t+=`<td><i class="glyph-icon flaticon-copy" value="${e.token}" title="Copy"></i></td></tr>`,t+=`<tr><td>Account Name</td><td colspan="2">${e.account.name}</td></tr>`,t+=`<tr><td>Account Public Key</td><td title="${n}">${n.slice(0,32)}...</td>`,t+=`<td><i class="glyph-icon flaticon-copy" value="${n}" title="Copy"></i></td></tr>`,t+=`<tr><td>Account Type</td><td colspan="2">${e.account.type.toUpperCase()}</td></tr>`,t+=`<tr><td>Number of Transactions</td><td colspan="2">${r}</td></tr>`,t+=`<tr><td>Number of Coins</td><td colspan="2">${o}</td></tr>`,t+=`<tr><td>Confirm Balance</td><td colspan="2">${Amount.wmcc(i,!0)} wmcc</td></tr>`,t+=`<tr><td>Unconfirm Balance</td><td colspan="2">${Amount.wmcc(s,!0)} wmcc</td></tr>`,t+=`<tr><td>Network</td><td colspan="2">${e.network.toUpperCase()}</td></tr>`,t+=`<tr><td>Watch Only</td><td colspan="2">${e.watchOnly.toString().toUpperCase()}</td></tr>`,t+="</table>"},Info.prototype.getWalletHistory=async function(t,e){t=parseInt(t)||10,e=parseInt(e)||0;const n=await this.wallet.getTransactions(this.wallet.account.name,t,e);return await this.getWalletHistoryTable(n,{limit:t,offset:e})},Info.prototype.getWalletHistoryTable=async function(t,e){if(0===t.length)return`<h2>No transactions found in wallet <span>${this.wallet.id}</span> for account <span>${this.wallet.account.name}.</span></h2>`;let n="<table><tr><th>Date/Time</th><th>Status</th><th>Height</th><th>Transactions Hash</th><th>Value</th></tr>";for(let r=0;r<t.length;r++){const o=new Date(1e3*t[r].mtime).format("M j, Y, g:i a");let i;let s=0,a=!1;if(t[r].inputs[0].address)for(let e=0;e<t[r].inputs.length;e++)t[r].inputs[e].path&&(s+=t[r].inputs[e].value,a=!0,i="Sent",0===t[r].time&&(i="Sending"));for(let n=0;n<t[r].outputs.length;n++)if(t[r].outputs[n].path){if(a?s-=t[r].outputs[n].value:s+=t[r].outputs[n].value,i)continue;i="Received",0===t[r].time&&(i="Receiving"),t[r].tx.isCoinbase()&&(i=e.pending?"Staled":"Mined")}let l=0;try{l=Amount.wmcc(s)}catch(e){console.log(e),console.log(t[r]),console.log(s),l="unknown"}n+="<tr>",n+=`<td>${o}</td>`,n+=`<td>${i}</td>`,t[r].block?n+=`<td title="${Util.revHex(t[r].block)}"><a class='r_goToExp'>${t[r].height}</a></td>`:n+="<td>N/A</td>",n+=`<td title="${t[r].hash}"><a class='r_goToExp'>${t[r].hash}</a></td>`,n+=`<td>${l}</td>`,n+="</tr>"}if(n+="</table>",!e.limit)return n;const r=await this.wallet.getPending(this.wallet.account.name);return n+=page(await this.wallet.getTotal(this.wallet.account.name)-r.length,e.offset,e.limit,"r_walletGetHistory")},Info.prototype.getWalletPendingTx=async function(){const t=await this.wallet.getPendingDetails(this.wallet.account.name);return await this.getWalletHistoryTable(t,{pending:!0})},Info.prototype.setGenSearchAddress=async function(t){let e="",n=null;try{n=Address.fromString(t)}catch(n){return e+='<div class="error"><h2>Opps! Invalid address format</h2><span>',e+=`<a>${t}</a> is not a valid WMCC Address.<br>Please check and try again.</span>`,e+='<submit class="button r_genGotoAddresses">BACK</submit></div>'}if(!await this.wallet.getPath(n))return e+='<div class="error"><h2>Opps! Address not found</h2><span>Cannot find <a>',e+=`${t}</a> in this wallet (<a>${this.wallet.id}</a>).</span>`,e+='<submit class="button r_genGotoAddresses">BACK</submit></div>';await this.setExpAddress(t);const{metatx:r,coins:o}=this.explorer.details;let i=0;for(let t of o)i+=t.value;let s=0;for(let t of r)for(let e of t.tx.outputs){let t=e.getAddress()?e.getAddress().hash:Buffer.alloc(0);n.hash.equals(t)&&(s+=e.value)}const a=$('<div id="qrcode"></div>').qrcode(n.hash.toString("hex"))[0].childNodes[0].toDataURL("image/png"),l=r.length?`<i class="glyph-icon flaticon-record r_goToExp" value=${t} title="View Transactions"></i>`:"";return e+=`<div class="address"><img src="${a}"/><h2>Your WMCC Address</h2><table>`,e+=`<tr><td>Number of Transactions</td><td><span>${r.length}${l}</span></td></tr>`,e+=`<tr><td>Total Received</td><td><span>${Amount.wmcc(s,!0)} wmcc</span></td></tr>`,e+=`<tr><td>Address Hash 160</td><td><span class='address'>${n.hash.toString("hex")}</span></td></tr>`,e+=`<tr><td>Final Balance</td><td><span>${Amount.wmcc(i,!0)} wmcc</span></td></tr>`,e+="</table>",e+=`<p><a>This is Your WMCC Address.</a><a class="address">${t}</a>`,e+="<a>Share this with anyone so they can send you wmcoins.</a>",e+='<submit class="button r_genGotoAddresses">BACK</submit></p></div>'},Info.prototype.getGenAddress=async function(t=10,e=0){t=parseInt(t)||10,e=parseInt(e)||0;let n="<table><tr><th>Type</th><th>Address</th><th>Hash 160</th><th></th></tr>";const r=await this.wallet.getAccountPaths(this.wallet.account.name),o=t+e>r.length?r.length:e+t;for(let t=e;t<o;t++){const e=r[t].toAddress();n+=`<tr><td>${e.getType()}</td><td><a class='r_genGotoAddress' title='${e}'>${e}</a></td>`,n+=`<td><a title='${r[t].hash}'>${r[t].hash}</a></td>`,n+=`<td><i class="glyph-icon flaticon-copy r_genCopyAddress" value="${e}" title="Copy to clipboard"></i>`,n+='<i class="glyph-icon flaticon-gear r_walletManageAddress" title="Manage address"></i></td></tr>'}n+="</table>";return n+=page(r.length,e,t,"r_genGotoAddresses")},Info.prototype.getExpLatestBlocks=async function(t=5){if(!this.explorer.isHome)return"";const e=this.node.chain.height,n=parseInt(t);let r="<h1>Latest Blocks</h1><table class='home'><tr><th>Height</th><th>Age</th><th>Transactions</th><th>Total Output (wmcc)</th><th>Size (kb)</th><th>Weight (kwu)</th></tr>";for(let t=e;t>e-n&&t>-1;t--){const e=await this.node.chain.getEntry(t),n=await this.node.chain.getBlock(e.hash);r+=`<tr><td class='block r_goToExp'>${e.height}</td>`,r+=`<td>${age(e.time)}</td>`,r+=`<td>${n.txs.length}</td>`,r+=`<td>${Amount.wmcc(n.getClaimed())}</td>`,r+=`<td>${n.getVirtualSize()/1e3}</td>`,r+=`<td>${n.getWeight()/1e3}</td></tr>`}return r+="</table>"},Info.prototype.getExpLatestTransaction=async function(t=10){if(!this.explorer.isHome)return"";let e="<h1>Latest Transactions</h1>";if(!this.node.mempool.map.size)return e+'<h2 class="empty">No latest transaction found.</h2>';const n=parseInt(t);let r=0;return e+="<table class='home'><tr><th>Transaction Hash</th><th>Size (bytes)</th><th>Value (wmcc)</th></tr>",this.node.mempool.map.forEach((t,o)=>{n>r&&(e+=`<tr><td class='tx r_goToExp'>${o}</td>`,e+=`<td>${t.size}</td>`,e+=`<td>${Amount.wmcc(t.value,!0)}</td></tr>`,r++)}),e+="</table>"},Info.prototype.setExpBlockByHeight=async function(t){try{const e=parseInt(t,10),n=await this.node.chain.getEntry(e),r=await this.node.chain.getBlock(n.hash);return this.explorer.details={entry:n,block:r},n.height||!1}catch(t){return!1}},Info.prototype.setExpBlockByHash=async function(t){try{const e=await this.node.chain.getEntry(Util.revHex(t)),n=await this.node.chain.getBlock(Util.revHex(t));return this.explorer.details={entry:e,block:n},e.rhash()||!1}catch(t){return!1}},Info.prototype.getExpBlockByHeight=function(t){const{entry:e}=this.explorer.details;return e?e.height:this.setExpBlockByHeight(t||this.node.chain.tip.height)},Info.prototype.getExpHash=function(){return this.explorer.details.entry.rhash()},Info.prototype.getExpPrevHash=function(){const{entry:t}=this.explorer.details;return t.prevBlock!==Encoding.NULL_HASH?Util.revHex(t.prevBlock):null},Info.prototype.getExpNextHash=async function(){const{entry:t}=this.explorer.details,e=await this.node.chain.getNextHash(t.hash);return e?Util.revHex(e):null},Info.prototype.getExpMerkleRoot=function(){const{entry:t}=this.explorer.details;return Util.revHex(t.merkleRoot)},Info.prototype.getExpChainwork=function(){const{entry:t}=this.explorer.details;return t.chainwork.toString("hex",64)},Info.prototype.getExpTxCount=function(){const{block:t}=this.explorer.details;return t.txs.length},Info.prototype.getExpHeight=function(){return this.explorer.details.entry.height},Info.prototype.getExpTimestamp=function(){const{entry:t}=this.explorer.details;return`${new Date(1e3*t.time).format("F j, Y, h:i:s A")}`},Info.prototype.getExpDifficulty=function(){return toDifficulty(this.getExpBits())},Info.prototype.getExpBits=function(){return this.explorer.details.entry.bits},Info.prototype.getExpNonce=function(){return this.explorer.details.entry.nonce},Info.prototype.getExpConfirmation=function(){const{entry:t}=this.explorer.details;return this.node.chain.height-t.height+1},Info.prototype.getExpVersion=function(){const{entry:t}=this.explorer.details;return`0x${Util.hex32(t.version)}`},Info.prototype.getExpSize=function(){const{block:t}=this.explorer.details;return`${t.getVirtualSize()} bytes`},Info.prototype.getExpWeight=function(){const{block:t}=this.explorer.details;return`${t.getWeight()} bytes`},Info.prototype.getExpTotalOut=function(){const{txs:t}=this.explorer.details.block;let e=0;for(let n of t)for(let t of n.outputs)e+=t.value;return`${Amount.wmcc(e,!0)} wmcc`},Info.prototype.getExpFee=function(){const{txs:t}=this.explorer.details.block,{height:e}=this.explorer.details.entry;if(0===e)return"0 wmcc";for(let n of t)if(n.isCoinbase()){const t=Consensus.getReward(e),r=n.outputs[0].value;return`${Amount.wmcc(r-t,!0)} wmcc`}},Info.prototype.getExpTransactions=async function(){let t="",e=null;const{time:n}=this.explorer.details.block,{txs:r}=this.explorer.details.block;for(let o of r){const r=new Date(1e3*n).format("M d, Y, g:i:s A"),i=Util.revHex(o.txid());t+='<table class="transaction"><colgroup><col/><col/><col/></colgroup>',t+=`<tr><th colspan="2"><a class='tx r_goToExp'>${i}</a><i class="glyph-icon flaticon-copy" value=${i} title="Copy"></i>\n      </th><th>${r}</th></tr><tr><td>`;const{details:s,totalout:a,totalin:l}=await this.toDetails(o);t+=toTxTable(s),t+=`</td></tr><tr><td colspan='2'>${e=o.isCoinbase()?`(Size: ${o.getVirtualSize()} bytes)`:`(Fee: ${Amount.wmcc(l-a,!0)} wmcc, Size: ${o.getVirtualSize()} bytes)`}</td><td>${Amount.wmcc(a,!0)} wmcc</td></tr></table>`}return t},Info.prototype.setExpAddress=async function(t){try{const e=Address.fromString(t),n=await this.node.chain.getMetaByAddress(t),r=await this.node.chain.getCoinsByAddress(t),o=await this.node.mempool.getAllMetaByAddress(e);return n.push.apply(n,filtermeta(o)),n.sort(compare),this.explorer.details={address:e,metatx:n,coins:r},e||!1}catch(t){return!1}},Info.prototype.getExpAddress=function(){return`(${this.explorer.details.address})`},Info.prototype.getExpAddressSummary=function(){const{address:t,metatx:e,coins:n}=this.explorer.details;let r="",o=0;const i=$('<div id="qrcode"></div>').qrcode(t.hash.toString("hex"))[0].childNodes[0].toDataURL("image/png");for(let t of n)o+=t.value;let s=0;for(let n of e)for(let e of n.tx.outputs){let n=e.getAddress()?e.getAddress().hash:Buffer.alloc(0);t.hash.equals(n)&&(s+=e.value)}return r+='<table class="summary address"><tr><th colspan="5">Summary</th></tr>',r+=`<tr><td>Number of Transactions</td><td><span>${e.length}</span></td><td></td>`,r+=`<td>Total Received</td><td><span>${Amount.wmcc(s,!0)} wmcc</span></td></tr>`,r+=`<tr><td>Address Hash 160</td><td><span class='address'>${t.hash.toString("hex")}</span></td><td></td>`,r+=`<td>Final Balance</td><td><span>${Amount.wmcc(o,!0)} wmcc</span></td></tr>`,r+=`</table><img src="${i}"/>`},Info.prototype.getExpAdressTransactions=async function(){let t="",e=null;const{metatx:n,address:r}=this.explorer.details;for(let o of n){const n=new Date(1e3*(o.time||o.mtime)).format("M d, Y, g:i:s A"),i=o.tx.txid();t+='<table class="transaction"><colgroup><col/><col/><col/></colgroup>',t+=`<tr><th colspan="2"><a class='tx r_goToExp${o.block?"":" red' title='Unconfirmed transaction"}'>${Util.revHex(i)}</a>\n      <i class="glyph-icon flaticon-copy" value=${Util.revHex(i)} title="Copy"></i></th><th>${n}</th></tr><tr><td>`;const{details:s,totalout:a,totalin:l}=await this.toDetails(o.tx);t+=toTxTable(s,r.toString()),t+=`</td></tr><tr><td colspan='2'>${e=o.tx.isCoinbase()?`(Size: ${o.tx.getVirtualSize()} bytes)`:`(Fee: ${Amount.wmcc(l-a,!0)} wmcc, Size: ${o.tx.getVirtualSize()} bytes)`}</td><td>${Amount.wmcc(a,!0)} wmcc</td></tr></table>`}return t||`<div class='empty'>No transaction found for address: <a>${r}</a></div>`},Info.prototype.setExpTransaction=async function(t){try{return this.explorer.details=await this.node.chain.getMeta(t),this.explorer.details||!1}catch(t){return!1}},Info.prototype.getExpTransaction=function(){return`(${Util.revHex(this.explorer.details.tx.txid())})`},Info.prototype.getExpTransactionSummary=async function(){let t="";const{tx:e,time:n,mtime:r,height:o,block:i}=this.explorer.details,s=new Date(1e3*(n||r)).format("M d, Y, g:i:s A"),{details:a,totalout:l,totalin:c}=await this.toDetails(e);let u=0,h=0;e.isCoinbase()||(u=Amount.wmcc(c,!0),h=c-l);const p=h>0?Amount.wmcc(Policy.getRate(e.getVirtualSize(),h),!0):0,d=h>0?Amount.wmcc(Policy.getRate(e.getWeight(),h),!0):0,f=o<0?"N/A":o,m=o<0?"":Util.revHex(i),g=o<0?"Unconfirmed Transaction":this.node.chain.height-o+1;return t+='<table class="summary"><tr><th colspan="5">Summary</th></tr>',t+=`<tr><td>Size</td><td><span>${e.getVirtualSize()} bytes</span></td><td></td>`,t+=`<td>Total Input</td><td><span>${u} wmcc</span></td></tr>`,t+=`<tr><td>Weight</td><td><span>${e.getWeight()} bytes</span></td><td></td>`,t+=`<td>Total Output</td><td><span>${Amount.wmcc(l,!0)} wmcc</span></td></tr>`,t+=`<tr><td>Received Time</td><td><span>${s}</span></td><td></td>`,t+=`<td>Fees</td><td><span>${Amount.wmcc(h,!0)} wmcc</span></td></tr>`,t+=`<tr><td>Included In Block</td><td><span${o<0?"":" class='block r_goToExp"}' title='${m}'>${f}</span></td><td></td>`,t+=`<td>Fee per kilobyte</td><td><span>${p} wmcc/kb</span></td></tr>`,t+=`<tr><td>Confirmations</td><td><span>${g}</span></td><td></td>`,t+=`<td>Fee per weight unit</td><td><span>${d} wmcc/kwu</span></td></tr>`,t+="</table>"},Info.prototype.getExpTransactionTable=async function(){let t="";const{tx:e}=this.explorer.details,n=Util.revHex(e.txid());t+='<table class="transaction"><colgroup><col/><col/><col/></colgroup>',t+=`<tr><th colspan="3"><a class='tx'>${n}</a><i class="glyph-icon flaticon-copy" value=${n} title="Copy"></i></th></tr><tr><td>`;const{details:r}=await this.toDetails(e);return t+=toTxTable(r),t+="</td></tr></table>"},Info.prototype.getExpScripts=function(){let t="";const{inputs:e,outputs:n}=this.explorer.details.tx;t+='<div class="scripts">',"coinbase"===e[0].getType()?t+="<h2>Coinbase</h2>":t+="<h2>Input Scripts</h2><div>";for(let n of e){const e=n.script.toJSON(),r=n.witness.toString(),o=n.script.getCommitment();e&&(t+=`<h3>${n.script.getInputTypeVal()}</h3>`,t+=`<p>${e}</p>`),o&&(t+="<h3>Commitment hash</h3>",t+=`<p>${o.toString("hex")}</p>`),r&&(t+=`<h3>${n.witness.getInputTypeVal()}</h3>`,t+=`<p>${r}</p>`)}t+='</div><div class="scripts"><h2>Output Scripts</h2>';for(let e of n){t+=`<h3>${e.getType()}</h3>`,t+=`<span>${e.script.toString()}</span>`;const n=e.script.getCommitment();n&&(t+="<h3>Commitment hash</h3>",t+=`<span>${n.toString("hex")}</span>`)}return`${t}</div>`},Info.prototype.setExpPending=async function(t){try{return this.explorer.details=await this.node.mempool.getMeta(t),this.explorer.details||!1}catch(t){return!1}},Info.prototype.getExpPending=function(){return`(${Util.revHex(this.explorer.details.tx.txid())})`},Info.prototype.toDetails=async function(t){let e=0,n=0,r=null;const o={output:{},input:{},pending:[]};for(let e of t.inputs){if(t.isCoinbase())continue;const i=await this.node.chain.getTX(e.prevout.hash);i?r=i.outputs:(r=await this.node.mempool.getTX(e.prevout.hash).outputs,o.pending.push(`${r[e.prevout.index].getAddress()}`));const s=r[e.prevout.index].value,a=`${r[e.prevout.index].getAddress()}`;o.input[a]?o.input[a]+=s:o.input[a]=s,n+=s}for(let n of t.outputs){const t=n.script.getAddress()?`${n.script.getAddress()}`:"unknown";o.output[t]?o.output[t]+=n.value:o.output[t]=n.value,e+=n.value}return{details:o,totalin:n,totalout:e}},Info.prototype.isExpHome=function(t){this.explorer.isHome=t},Info.prototype.resetExplorer=function(){this.explorer.details=!1},Info.prototype.getInfoUpdate=function(){let t;const e=__webpack_require__(103).update,n=e.major,r=e.minor;t=`<h2>Major Update ${n.version}</h2><table>`;for(let e of n.info)t+=`<tr><td>${e}</td></tr>`;t+=`</table><h2>Minor Update ${r.version}</h2><table>`;for(let e of r.info)t+=`<tr><td>${e}</td></tr>`;return t+="</table>"},Info.prototype.getInfoClient=function getInfoClient(){let html;const OS=__webpack_require__(8),App=eval("require")("../package.json"),Core=eval("require")("../node_modules/wmcc-core/package.json");return html="<h2>Application Information</h2><table>",html+=`<tr><td>Client Name</td><td>${App.name}</td></tr>`,html+=`<tr><td>Client Version</td><td>${App.version}</td></tr>`,html+=`<tr><td>Operating System</td><td>${OS.type()} ${OS.release()} ${OS.arch()}</td></tr>`,html+=`<tr><td>Release Date</td><td>${App.release}</td></tr></table>`,html+="<h2>Core Information</h2><table>",html+=`<tr><td>Client Name</td><td>${Core.name}</td></tr>`,html+=`<tr><td>Client Version</td><td>${Core.version}</td></tr>`,html+=`<tr><td>Release Date</td><td>${Core.release}</td></tr></table>`},Info.prototype.getInfoServer=async function(){let t;const e=Core.http.Client(),n=await e.getInfo(),r=new Date(1e3*n.time.system).format("M j, Y, g:i a"),o=new Date(1e3*this.node.chain.tip.time).format("M j, Y, g:i a");return t=`<h2>General</h2><table><tr><td>Version</td><td>${n.version}</td></tr>`,t+=`<tr><td>Network</td><td>${n.network}</td></tr>`,t+=`<tr><td>Data Directory</td><td>${this.node.chain.db.options.prefix}</td></tr>`,t+=`<tr><td>Time</td><td>${r}</td></tr>`,t+=`<tr><td>Uptime</td><td>${age(n.time.uptime,!0)}</td></tr>`,t+="</table><h2>Network</h2><table>",t+=`<tr><td>Host</td><td>${n.pool.host}</td></tr>`,t+=`<tr><td>Port</td><td>${n.pool.port}</td></tr>`,t+=`<tr><td>Agent</td><td>${n.pool.agent}</td></tr>`,t+=`<tr><td>Services</td><td>${n.pool.services}</td></tr>`,t+=`<tr><td>Number of Connections</td><td>In: ${n.pool.inbound} / Out: ${n.pool.outbound}</td></tr>`,t+="</table><h2>Block Chain</h2><table>",t+=`<tr><td>Current Height</td><td>${n.chain.height}</td></tr>`,t+=`<tr><td>Last Block Time</td><td>${o}</td></tr>`,t+=`<tr><td>Progress</td><td>${(100*n.chain.progress).toFixed(2)} <a style='font-family:Ubuntu, sans-serif;'>%</a></td></tr>`,t+="</table><h2>Mempool</h2><table>",t+=`<tr><td>Number of Transactions</td><td>${n.mempool.tx}</td></tr>`,t+=`<tr><td>Memory Usage</td><td>${n.mempool.size}</td></tr></table>`},Info.prototype.getInfoPublicIP=async function(){return await Core.net.external.getIPv4()},module.exports=Info},function(t,e){},function(t,e,n){"use strict";const r=e;wmcc_core.cache=function(){},r.Browser=n(48),r.browser=n(32),r.eventbind=n(16),r.loader=n(15),r.submit=n(22),r.worker=n(100),r.window=n(11),r.credential=n(101),r.auth=n(28),r.hsm=n(18),r.otp=n(29),r.rabbit=n(42),r.Node=n(102),r.config=n(30),r.fullnode=n(43),r.hook=n(104),r.info=n(45),r.logger=n(21),r.node=n(31),r.nodeclient=n(44),r.spvnode=n(46),r.tools=n(105),r.language=n(4),r.message=n(34),r.update=n(106),r.updater=n(25),r.installer=n(7),r.utils=n(107),r.zlib=n(23),global.wmcc_desktop=r},function(t,e,n){"use strict";e.Browser=n(32),e.Window=n(11),e.Loader=n(15),e.EventBind=n(16),e.Submit=n(22)},function(t,e){t.exports=require("secp256k1")},function(t,e){t.exports=require("dgram")},function(t,e){function n(t,e){if(t instanceof r)return t;if("string"!=typeof t)return null;if(t.length>_)return null;if(!(e?k[U]:k[M]).test(t))return null;try{return new r(t,e)}catch(t){return null}}function r(t,e){if(t instanceof r){if(t.loose===e)return t;t=t.version}else if("string"!=typeof t)throw new TypeError("Invalid Version: "+t);if(t.length>_)throw new TypeError("version is longer than "+_+" characters");if(!(this instanceof r))return new r(t,e);v("SemVer",t,e),this.loose=e;var n=t.trim().match(e?k[U]:k[M]);if(!n)throw new TypeError("Invalid Version: "+t);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>x||this.major<0)throw new TypeError("Invalid major version");if(this.minor>x||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>x||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(function(t){if(/^[0-9]+$/.test(t)){var e=+t;if(e>=0&&e<x)return e}return t}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}function o(t,e){var n=ct.test(t),r=ct.test(e);return n&&r&&(t=+t,e=+e),n&&!r?-1:r&&!n?1:t<e?-1:t>e?1:0}function i(t,e,n){return new r(t,n).compare(new r(e,n))}function s(t,e,n){return i(t,e,n)>0}function a(t,e,n){return i(t,e,n)<0}function l(t,e,n){return 0===i(t,e,n)}function c(t,e,n){return 0!==i(t,e,n)}function u(t,e,n){return i(t,e,n)>=0}function h(t,e,n){return i(t,e,n)<=0}function p(t,e,n,r){var o;switch(e){case"===":"object"==typeof t&&(t=t.version),"object"==typeof n&&(n=n.version),o=t===n;break;case"!==":"object"==typeof t&&(t=t.version),"object"==typeof n&&(n=n.version),o=t!==n;break;case"":case"=":case"==":o=l(t,n,r);break;case"!=":o=c(t,n,r);break;case">":o=s(t,n,r);break;case">=":o=u(t,n,r);break;case"<":o=a(t,n,r);break;case"<=":o=h(t,n,r);break;default:throw new TypeError("Invalid operator: "+e)}return o}function d(t,e){if(t instanceof d){if(t.loose===e)return t;t=t.value}if(!(this instanceof d))return new d(t,e);v("comparator",t,e),this.loose=e,this.parse(t),this.semver===ut?this.value="":this.value=this.operator+this.semver.version,v("comp",this)}function f(t,e){if(t instanceof f)return t.loose===e?t:new f(t.raw,e);if(t instanceof d)return new f(t.value,e);if(!(this instanceof f))return new f(t,e);if(this.loose=e,this.raw=t,this.set=t.split(/\s*\|\|\s*/).map(function(t){return this.parseRange(t.trim())},this).filter(function(t){return t.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+t);this.format()}function m(t,e){return v("comp",t),t=function(t,e){return t.trim().split(/\s+/).map(function(t){return function(t,e){v("caret",t,e);var n=e?k[et]:k[tt];return t.replace(n,function(e,n,r,o,i){v("caret",t,e,n,r,o,i);var s;return g(n)?s="":g(r)?s=">="+n+".0.0 <"+(+n+1)+".0.0":g(o)?s="0"===n?">="+n+"."+r+".0 <"+n+"."+(+r+1)+".0":">="+n+"."+r+".0 <"+(+n+1)+".0.0":i?(v("replaceCaret pr",i),"-"!==i.charAt(0)&&(i="-"+i),s="0"===n?"0"===r?">="+n+"."+r+"."+o+i+" <"+n+"."+r+"."+(+o+1):">="+n+"."+r+"."+o+i+" <"+n+"."+(+r+1)+".0":">="+n+"."+r+"."+o+i+" <"+(+n+1)+".0.0"):(v("no pr"),s="0"===n?"0"===r?">="+n+"."+r+"."+o+" <"+n+"."+r+"."+(+o+1):">="+n+"."+r+"."+o+" <"+n+"."+(+r+1)+".0":">="+n+"."+r+"."+o+" <"+(+n+1)+".0.0"),v("caret return",s),s})}(t,e)}).join(" ")}(t,e),v("caret",t),t=function(t,e){return t.trim().split(/\s+/).map(function(t){return function(t,e){var n=e?k[Z]:k[Y];return t.replace(n,function(e,n,r,o,i){v("tilde",t,e,n,r,o,i);var s;return g(n)?s="":g(r)?s=">="+n+".0.0 <"+(+n+1)+".0.0":g(o)?s=">="+n+"."+r+".0 <"+n+"."+(+r+1)+".0":i?(v("replaceTilde pr",i),"-"!==i.charAt(0)&&(i="-"+i),s=">="+n+"."+r+"."+o+i+" <"+n+"."+(+r+1)+".0"):s=">="+n+"."+r+"."+o+" <"+n+"."+(+r+1)+".0",v("tilde return",s),s})}(t,e)}).join(" ")}(t,e),v("tildes",t),t=function(t,e){return v("replaceXRanges",t,e),t.split(/\s+/).map(function(t){return function(t,e){t=t.trim();var n=e?k[V]:k[G];return t.replace(n,function(e,n,r,o,i,s){v("xRange",t,e,n,r,o,i,s);var a=g(r),l=a||g(o),c=l||g(i),u=c;return"="===n&&u&&(n=""),a?e=">"===n||"<"===n?"<0.0.0":"*":n&&u?(l&&(o=0),c&&(i=0),">"===n?(n=">=",l?(r=+r+1,o=0,i=0):c&&(o=+o+1,i=0)):"<="===n&&(n="<",l?r=+r+1:o=+o+1),e=n+r+"."+o+"."+i):l?e=">="+r+".0.0 <"+(+r+1)+".0.0":c&&(e=">="+r+"."+o+".0 <"+r+"."+(+o+1)+".0"),v("xRange return",e),e})}(t,e)}).join(" ")}(t,e),v("xrange",t),t=function(t,e){return v("replaceStars",t,e),t.trim().replace(k[at],"")}(t,e),v("stars",t),t}function g(t){return!t||"x"===t.toLowerCase()||"*"===t}function y(t,e,n,r,o,i,s,a,l,c,u,h,p){return e=g(n)?"":g(r)?">="+n+".0.0":g(o)?">="+n+"."+r+".0":">="+e,a=g(l)?"":g(c)?"<"+(+l+1)+".0.0":g(u)?"<"+l+"."+(+c+1)+".0":h?"<="+l+"."+c+"."+u+"-"+h:"<="+a,(e+" "+a).trim()}function w(t,e,n){try{e=new f(e,n)}catch(t){return!1}return e.test(t)}function b(t,e,n,o){t=new r(t,o),e=new f(e,o);var i,l,c,p,m;switch(n){case">":i=s,l=h,c=a,p=">",m=">=";break;case"<":i=a,l=u,c=s,p="<",m="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(w(t,e,o))return!1;for(var g=0;g<e.set.length;++g){var y=null,b=null;if(e.set[g].forEach(function(t){t.semver===ut&&(t=new d(">=0.0.0")),y=y||t,b=b||t,i(t.semver,y.semver,o)?y=t:c(t.semver,b.semver,o)&&(b=t)}),y.operator===p||y.operator===m)return!1;if((!b.operator||b.operator===p)&&l(t,b.semver))return!1;if(b.operator===m&&c(t,b.semver))return!1}return!0}e=t.exports=r;var v;v="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var t=Array.prototype.slice.call(arguments,0);t.unshift("SEMVER"),console.log.apply(console,t)}:function(){},e.SEMVER_SPEC_VERSION="2.0.0";var _=256,x=Number.MAX_SAFE_INTEGER||9007199254740991,k=e.re=[],$=e.src=[],E=0,S=E++;$[S]="0|[1-9]\\d*";var T=E++;$[T]="[0-9]+";var A=E++;$[A]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var C=E++;$[C]="("+$[S]+")\\.("+$[S]+")\\.("+$[S]+")";var O=E++;$[O]="("+$[T]+")\\.("+$[T]+")\\.("+$[T]+")";var B=E++;$[B]="(?:"+$[S]+"|"+$[A]+")";var j=E++;$[j]="(?:"+$[T]+"|"+$[A]+")";var R=E++;$[R]="(?:-("+$[B]+"(?:\\."+$[B]+")*))";var I=E++;$[I]="(?:-?("+$[j]+"(?:\\."+$[j]+")*))";var P=E++;$[P]="[0-9A-Za-z-]+";var N=E++;$[N]="(?:\\+("+$[P]+"(?:\\."+$[P]+")*))";var M=E++,q="v?"+$[C]+$[R]+"?"+$[N]+"?";$[M]="^"+q+"$";var D="[v=\\s]*"+$[O]+$[I]+"?"+$[N]+"?",U=E++;$[U]="^"+D+"$";var L=E++;$[L]="((?:<|>)?=?)";var H=E++;$[H]=$[T]+"|x|X|\\*";var F=E++;$[F]=$[S]+"|x|X|\\*";var W=E++;$[W]="[v=\\s]*("+$[F]+")(?:\\.("+$[F]+")(?:\\.("+$[F]+")(?:"+$[R]+")?"+$[N]+"?)?)?";var z=E++;$[z]="[v=\\s]*("+$[H]+")(?:\\.("+$[H]+")(?:\\.("+$[H]+")(?:"+$[I]+")?"+$[N]+"?)?)?";var G=E++;$[G]="^"+$[L]+"\\s*"+$[W]+"$";var V=E++;$[V]="^"+$[L]+"\\s*"+$[z]+"$";var K=E++;$[K]="(?:~>?)";var X=E++;$[X]="(\\s*)"+$[K]+"\\s+",k[X]=new RegExp($[X],"g");var Y=E++;$[Y]="^"+$[K]+$[W]+"$";var Z=E++;$[Z]="^"+$[K]+$[z]+"$";var J=E++;$[J]="(?:\\^)";var Q=E++;$[Q]="(\\s*)"+$[J]+"\\s+",k[Q]=new RegExp($[Q],"g");var tt=E++;$[tt]="^"+$[J]+$[W]+"$";var et=E++;$[et]="^"+$[J]+$[z]+"$";var nt=E++;$[nt]="^"+$[L]+"\\s*("+D+")$|^$";var rt=E++;$[rt]="^"+$[L]+"\\s*("+q+")$|^$";var ot=E++;$[ot]="(\\s*)"+$[L]+"\\s*("+D+"|"+$[W]+")",k[ot]=new RegExp($[ot],"g");var it=E++;$[it]="^\\s*("+$[W]+")\\s+-\\s+("+$[W]+")\\s*$";var st=E++;$[st]="^\\s*("+$[z]+")\\s+-\\s+("+$[z]+")\\s*$";var at=E++;$[at]="(<|>)?=?\\s*\\*";for(var lt=0;lt<E;lt++)v(lt,$[lt]),k[lt]||(k[lt]=new RegExp($[lt]));e.parse=n,e.valid=function(t,e){var r=n(t,e);return r?r.version:null},e.clean=function(t,e){var r=n(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null},e.SemVer=r,r.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},r.prototype.toString=function(){return this.version},r.prototype.compare=function(t){return v("SemVer.compare",this.version,this.loose,t),t instanceof r||(t=new r(t,this.loose)),this.compareMain(t)||this.comparePre(t)},r.prototype.compareMain=function(t){return t instanceof r||(t=new r(t,this.loose)),o(this.major,t.major)||o(this.minor,t.minor)||o(this.patch,t.patch)},r.prototype.comparePre=function(t){if(t instanceof r||(t=new r(t,this.loose)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;var e=0;do{var n=this.prerelease[e],i=t.prerelease[e];if(v("prerelease compare",e,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return o(n,i)}while(++e)},r.prototype.inc=function(t,e){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",e),this.inc("pre",e);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error("invalid increment argument: "+t)}return this.format(),this.raw=this.version,this},e.inc=function(t,e,n,o){"string"==typeof n&&(o=n,n=void 0);try{return new r(t,n).inc(e,o).version}catch(t){return null}},e.diff=function(t,e){if(l(t,e))return null;var r=n(t),o=n(e);if(r.prerelease.length||o.prerelease.length){for(var i in r)if(("major"===i||"minor"===i||"patch"===i)&&r[i]!==o[i])return"pre"+i;return"prerelease"}for(var i in r)if(("major"===i||"minor"===i||"patch"===i)&&r[i]!==o[i])return i},e.compareIdentifiers=o;var ct=/^[0-9]+$/;e.rcompareIdentifiers=function(t,e){return o(e,t)},e.major=function(t,e){return new r(t,e).major},e.minor=function(t,e){return new r(t,e).minor},e.patch=function(t,e){return new r(t,e).patch},e.compare=i,e.compareLoose=function(t,e){return i(t,e,!0)},e.rcompare=function(t,e,n){return i(e,t,n)},e.sort=function(t,n){return t.sort(function(t,r){return e.compare(t,r,n)})},e.rsort=function(t,n){return t.sort(function(t,r){return e.rcompare(t,r,n)})},e.gt=s,e.lt=a,e.eq=l,e.neq=c,e.gte=u,e.lte=h,e.cmp=p,e.Comparator=d;var ut={};d.prototype.parse=function(t){var e=this.loose?k[nt]:k[rt],n=t.match(e);if(!n)throw new TypeError("Invalid comparator: "+t);this.operator=n[1],"="===this.operator&&(this.operator=""),n[2]?this.semver=new r(n[2],this.loose):this.semver=ut},d.prototype.toString=function(){return this.value},d.prototype.test=function(t){return v("Comparator.test",t,this.loose),this.semver===ut||("string"==typeof t&&(t=new r(t,this.loose)),p(t,this.operator,this.semver,this.loose))},d.prototype.intersects=function(t,e){if(!(t instanceof d))throw new TypeError("a Comparator is required");var n;if(""===this.operator)return n=new f(t.value,e),w(this.value,n,e);if(""===t.operator)return n=new f(this.value,e),w(t.semver,n,e);var r=!(">="!==this.operator&&">"!==this.operator||">="!==t.operator&&">"!==t.operator),o=!("<="!==this.operator&&"<"!==this.operator||"<="!==t.operator&&"<"!==t.operator),i=this.semver.version===t.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==t.operator&&"<="!==t.operator),a=p(this.semver,"<",t.semver,e)&&(">="===this.operator||">"===this.operator)&&("<="===t.operator||"<"===t.operator),l=p(this.semver,">",t.semver,e)&&("<="===this.operator||"<"===this.operator)&&(">="===t.operator||">"===t.operator);return r||o||i&&s||a||l},e.Range=f,f.prototype.format=function(){return this.range=this.set.map(function(t){return t.join(" ").trim()}).join("||").trim(),this.range},f.prototype.toString=function(){return this.range},f.prototype.parseRange=function(t){var e=this.loose;t=t.trim(),v("range",t,e);var n=e?k[st]:k[it];t=t.replace(n,y),v("hyphen replace",t),t=t.replace(k[ot],"$1$2$3"),v("comparator trim",t,k[ot]),t=(t=(t=t.replace(k[X],"$1~")).replace(k[Q],"$1^")).split(/\s+/).join(" ");var r=e?k[nt]:k[rt],o=t.split(" ").map(function(t){return m(t,e)}).join(" ").split(/\s+/);return this.loose&&(o=o.filter(function(t){return!!t.match(r)})),o=o.map(function(t){return new d(t,e)})},f.prototype.intersects=function(t,e){if(!(t instanceof f))throw new TypeError("a Range is required");return this.set.some(function(n){return n.every(function(n){return t.set.some(function(t){return t.every(function(t){return n.intersects(t,e)})})})})},e.toComparators=function(t,e){return new f(t,e).set.map(function(t){return t.map(function(t){return t.value}).join(" ").trim().split(" ")})},f.prototype.test=function(t){if(!t)return!1;"string"==typeof t&&(t=new r(t,this.loose));for(var e=0;e<this.set.length;e++)if(function(t,e){for(var n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length){for(n=0;n<t.length;n++)if(v(t[n].semver),t[n].semver!==ut&&t[n].semver.prerelease.length>0){var r=t[n].semver;if(r.major===e.major&&r.minor===e.minor&&r.patch===e.patch)return!0}return!1}return!0}(this.set[e],t))return!0;return!1},e.satisfies=w,e.maxSatisfying=function(t,e,n){var o=null,i=null;try{var s=new f(e,n)}catch(t){return null}return t.forEach(function(t){s.test(t)&&(o&&-1!==i.compare(t)||(i=new r(o=t,n)))}),o},e.minSatisfying=function(t,e,n){var o=null,i=null;try{var s=new f(e,n)}catch(t){return null}return t.forEach(function(t){s.test(t)&&(o&&1!==i.compare(t)||(i=new r(o=t,n)))}),o},e.validRange=function(t,e){try{return new f(t,e).range||"*"}catch(t){return null}},e.ltr=function(t,e,n){return b(t,e,"<",n)},e.gtr=function(t,e,n){return b(t,e,">",n)},e.outside=b,e.prerelease=function(t,e){var r=n(t,e);return r&&r.prerelease.length?r.prerelease:null},e.intersects=function(t,e,n){return t=new f(t,n),e=new f(e,n),t.intersects(e)}},function(t,e,n){"use strict";function r(t){t=t||{};const e=new s,r=t.href||h.resolve(h.format(t),t.path),o=[],c=y.object(t.agent)?t.agent:null;let p,d,m=0,g=0;const w=t=>{if("http:"!==t.protocol&&"https:"!==t.protocol)return void e.emit("error",new i.UnsupportedProtocolError(t));let s="https:"===t.protocol?l:a;if(c){const e="https:"===t.protocol?"https":"http";t.agent=c[e]||t.agent}if(t.useElectronNet&&process.versions.electron){const t=n(2);s=t.net||t.remote.net}let v;const _=new f(s.request,t.cache)(t,n=>{clearInterval(v),e.emit("uploadProgress",{percent:1,transferred:g,total:d});const s=n.statusCode;n.url=p||r,n.requestUrl=r;const a=t.followRedirect&&"location"in n.headers,l=a&&j.has(s);if(a&&R.has(s)||l&&("GET"===t.method||"HEAD"===t.method)){if(n.resume(),303===s&&(t.method="GET"),o.length>=10)return void e.emit("error",new i.MaxRedirectsError(s,o,t),null,n);const r=O.from(n.headers.location,"binary").toString();p=h.resolve(h.format(t),r),o.push(p);const a=Object.assign({},t,h.parse(p));return e.emit("redirect",n,a),void w(a)}const c=Number(n.headers["content-length"])||null;let f=0;setImmediate(()=>{const r=new u({transform(t,n,r){f+=t.length;const o=c?f/c:0;o<1&&e.emit("downloadProgress",{percent:o,transferred:f,total:c}),r(null,t)},flush(t){e.emit("downloadProgress",{percent:1,transferred:f,total:c}),t()}});$(n,r),r.redirectUrls=o;const i=!0===t.decompress&&y.function(k)&&"HEAD"!==t.method?k(r):r;t.decompress||-1===["gzip","deflate"].indexOf(n.headers["content-encoding"])||(t.encoding=null),e.emit("response",i),e.emit("downloadProgress",{percent:0,transferred:0,total:c}),n.pipe(r)})});_.on("error",n=>{n instanceof f.RequestError?e.emit("error",new i.RequestError(n,t)):e.emit("error",new i.CacheError(n,t))}),_.once("request",n=>{n.once("error",n=>{clearInterval(v);const r=t.retries(++m,n);r?setTimeout(w,r,t):e.emit("error",new i.RequestError(n,t))}),e.once("request",t=>{e.emit("uploadProgress",{percent:0,transferred:0,total:d}),t.connection.once("connect",()=>{v=setInterval(()=>{const n=g,r=O.byteLength(t._header);g=t.connection.bytesWritten-r,d&&g>d&&(g=d),g!==n&&g!==d&&e.emit("uploadProgress",{percent:d?g/d:0,transferred:g,total:d})},150)})}),t.gotTimeout&&(clearInterval(v),b(n,t.gotTimeout)),setImmediate(()=>{e.emit("request",n)})})};return setImmediate(()=>{Promise.resolve(P(t)).then(e=>{d=e,w(t)}).catch(t=>{e.emit("error",t)})}),e}function o(t,e){if(!y.string(t)&&!y.object(t))throw new TypeError(`Parameter \`url\` must be a string or object, not ${y(t)}`);if(y.string(t)){if(t=t.replace(/^unix:/,"http://$&"),(t=v(t)).auth)throw new Error("Basic authentication must be done with the `auth` option")}else S.lenient(t)&&(t=_(t));e=Object.assign({path:"",retries:2,cache:!1,decompress:!0,useElectronNet:!1},t,{protocol:t.protocol||"http:"},e);const n=x(e.headers);for(const t of Object.keys(n))y.nullOrUndefined(n[t])&&delete n[t];e.headers=Object.assign({"user-agent":`${B.name}/${B.version} (https://github.com/sindresorhus/got)`,"accept-encoding":"gzip,deflate"},n);const r=e.query;r&&(y.string(r)||(e.query=d.stringify(r)),e.path=`${e.path.split("?")[0]}?${e.query}`,delete e.query),e.json&&y.undefined(e.headers.accept)&&(e.headers.accept="application/json");const o=e.body;if(y.nullOrUndefined(o))e.method=(e.method||"GET").toUpperCase();else{const t=e.headers;if(!(y.nodeStream(o)||y.string(o)||y.buffer(o)||e.form||e.json))throw new TypeError("The `body` option must be a stream.Readable, string, Buffer or plain Object");const n=y.plainObject(o)||y.array(o);if((e.form||e.json)&&!n)throw new TypeError("The `body` option must be a plain Object or Array when the `form` or `json` option is used");if(I(o)?t["content-type"]=t["content-type"]||`multipart/form-data; boundary=${o.getBoundary()}`:e.form&&n?(t["content-type"]=t["content-type"]||"application/x-www-form-urlencoded",e.body=d.stringify(o)):e.json&&n&&(t["content-type"]=t["content-type"]||"application/json",e.body=JSON.stringify(o)),y.undefined(t["content-length"])&&y.undefined(t["transfer-encoding"])&&!y.nodeStream(o)){const n=y.string(e.body)?O.byteLength(e.body):e.body.length;t["content-length"]=n}y.buffer(o)&&(e.body=g(o),e.body._buffer=o),e.method=(e.method||"POST").toUpperCase()}if("unix"===e.hostname){const t=/(.+?):(.+)/.exec(e.path);t&&(e.socketPath=t[1],e.path=t[2],e.host=null)}if(!y.function(e.retries)){const t=e.retries;e.retries=((e,n)=>{if(e>t||!E(n))return 0;return 1e3*(1<<e)+100*Math.random()})}return y.undefined(e.followRedirect)&&(e.followRedirect=!0),e.timeout&&(y.number(e.timeout)?e.gotTimeout={request:e.timeout}:e.gotTimeout=e.timeout,delete e.timeout),e}function i(t,e){try{return function(t){const e=new s,n=new T((n,o,s)=>{const a=r(t);let l=!1;n(()=>{l=!0}),a.on("request",e=>{if(l&&e.abort(),n(()=>{e.abort()}),y.nodeStream(t.body))return t.body.pipe(e),void(t.body=void 0);e.end(t.body)}),a.on("response",e=>{(y.null(t.encoding)?w.buffer(e):w(e,t)).catch(e=>s(new i.ReadError(e,t))).then(n=>{const r=e.statusCode,s=t.followRedirect?299:399;if(e.body=n,t.json&&e.body)try{e.body=JSON.parse(e.body)}catch(e){if(r>=200&&r<300)throw new i.ParseError(e,r,t,n)}if(304!==r&&(r<200||r>s))throw new i.HTTPError(r,e.statusMessage,e.headers,t);o(e)}).catch(t=>{Object.defineProperty(t,"response",{value:e}),s(t)})}),a.once("error",s),a.on("redirect",e.emit.bind(e,"redirect")),a.on("uploadProgress",e.emit.bind(e,"uploadProgress")),a.on("downloadProgress",e.emit.bind(e,"downloadProgress"))}),o=(e=>t.gotTimeout&&t.gotTimeout.request?A(e,t.gotTimeout.request,new i.RequestError({message:"Request timed out",code:"ETIMEDOUT"},t)):e)(n);return o.cancel=n.cancel.bind(n),o.on=((t,n)=>(e.on(t,n),o)),o}(o(t,e))}catch(t){return Promise.reject(t)}}const s=n(12),a=n(53),l=n(54),c=n(3).PassThrough,u=n(3).Transform,h=n(5),p=n(6),d=n(55),f=n(56),m=n(73),g=n(74),y=n(84),w=n(35),b=n(85),v=n(86),_=n(88),x=n(26),k=n(89),$=n(27),E=n(90),S=n(91),T=n(95),A=n(96),C=n(98),O=n(13).Buffer,B=n(99),j=new Set([300,301,302,303,304,305,307,308]),R=new Set([300,303,307,308]),I=t=>y.nodeStream(t)&&y.function(t.getBoundary),P=t=>{const e=t.body;return t.headers["content-length"]?Number(t.headers["content-length"]):e||t.stream?y.string(e)?O.byteLength(e):I(e)?C(e.getLength.bind(e))():e instanceof p.ReadStream?C(p.stat)(e.path).then(t=>t.size):y.nodeStream(e)&&y.buffer(e._buffer)?e._buffer.length:null:0};i.stream=((t,e)=>(function(t){t.stream=!0;const e=new c,n=new c,o=m(e,n);let s;if(t.gotTimeout&&t.gotTimeout.request&&(s=setTimeout(()=>{o.emit("error",new i.RequestError({message:"Request timed out",code:"ETIMEDOUT"},t))},t.gotTimeout.request)),t.json)throw new Error("Got can not be used as a stream when the `json` option is used");t.body&&(o.write=(()=>{throw new Error("Got's stream is not writable when the `body` option is used")}));const a=r(t);return a.on("request",n=>{o.emit("request",n),y.nodeStream(t.body)?t.body.pipe(n):t.body?n.end(t.body):"POST"!==t.method&&"PUT"!==t.method&&"PATCH"!==t.method?n.end():e.pipe(n)}),a.on("response",e=>{clearTimeout(s);const r=e.statusCode;e.on("error",e=>{o.emit("error",new i.ReadError(e,t))}),e.pipe(n),304!==r&&(r<200||r>299)?o.emit("error",new i.HTTPError(r,e.statusMessage,e.headers,t),null,e):o.emit("response",e)}),a.on("error",o.emit.bind(o,"error")),a.on("redirect",o.emit.bind(o,"redirect")),a.on("uploadProgress",o.emit.bind(o,"uploadProgress")),a.on("downloadProgress",o.emit.bind(o,"downloadProgress")),o})(o(t,e)));const N=["get","post","put","patch","head","delete"];for(const t of N)i[t]=((e,n)=>i(e,Object.assign({},n,{method:t}))),i.stream[t]=((e,n)=>i.stream(e,Object.assign({},n,{method:t})));class M extends Error{constructor(t,e,n){super(t),Error.captureStackTrace(this,this.constructor),this.name="StdError",y.undefined(e.code)||(this.code=e.code),Object.assign(this,{host:n.host,hostname:n.hostname,method:n.method,path:n.path,protocol:n.protocol,url:n.href})}}i.CacheError=class extends M{constructor(t,e){super(t.message,t,e),this.name="CacheError"}},i.RequestError=class extends M{constructor(t,e){super(t.message,t,e),this.name="RequestError"}},i.ReadError=class extends M{constructor(t,e){super(t.message,t,e),this.name="ReadError"}},i.ParseError=class extends M{constructor(t,e,n,r){super(`${t.message} in "${h.format(n)}": \n${r.slice(0,77)}...`,t,n),this.name="ParseError",this.statusCode=e,this.statusMessage=a.STATUS_CODES[this.statusCode]}},i.HTTPError=class extends M{constructor(t,e,n,r){super(`Response code ${t} (${e=e?e.replace(/\r?\n/g," ").trim():a.STATUS_CODES[t]})`,{},r),this.name="HTTPError",this.statusCode=t,this.statusMessage=e,this.headers=n}},i.MaxRedirectsError=class extends M{constructor(t,e,n){super("Redirected 10 times. Aborting.",{},n),this.name="MaxRedirectsError",this.statusCode=t,this.statusMessage=a.STATUS_CODES[this.statusCode],this.redirectUrls=e}},i.UnsupportedProtocolError=class extends M{constructor(t){super(`Unsupported protocol "${t.protocol}"`,{},t),this.name="UnsupportedProtocolError"}},i.CancelError=T.CancelError,t.exports=i},function(t,e){t.exports=require("http")},function(t,e){t.exports=require("https")},function(t,e){t.exports=require("querystring")},function(t,e,n){"use strict";const r=n(12),o=n(5),i=n(57),s=n(35),a=n(67),l=n(68),c=n(26),u=n(69),h=n(70);class p{constructor(t,e){if("function"!=typeof t)throw new TypeError("Parameter `request` must be a function");return this.cache=new h({uri:"string"==typeof e&&e,store:"string"!=typeof e&&e,namespace:"cacheable-request"}),this.createCacheableRequest(t)}createCacheableRequest(t){return(e,n)=>{"string"==typeof e&&(e=o.parse(e)),(e=Object.assign({headers:{},method:"GET",cache:!0,strictTtl:!1,automaticFailover:!1},e)).headers=c(e.headers);const h=new r,d=i(o.format(e)),f=`${e.method}:${d}`;let m=!1,g=!1;const y=e=>{g=!0;const r=t=>{if(m){const n=a.fromObject(m.cachePolicy).revalidatedPolicy(e,t);if(!n.modified){const e=n.policy.responseHeaders();(t=new l(t.statusCode,e,m.body,m.url)).cachePolicy=n.policy,t.fromCache=!0}}t.fromCache||(t.cachePolicy=new a(e,t),t.fromCache=!1);let r;e.cache&&t.cachePolicy.storable()?(r=u(t),s.buffer(t).then(n=>{const r={cachePolicy:t.cachePolicy.toObject(),url:t.url,statusCode:t.fromCache?m.statusCode:t.statusCode,body:n},o=e.strictTtl?t.cachePolicy.timeToLive():void 0;return this.cache.set(f,r,o)}).catch(t=>h.emit("error",new p.CacheError(t)))):e.cache&&m&&this.cache.delete(f).catch(t=>h.emit("error",new p.CacheError(t))),h.emit("response",r||t),"function"==typeof n&&n(r||t)};try{const n=t(e,r);h.emit("request",n)}catch(t){h.emit("error",new p.RequestError(t))}};return this.cache.on("error",t=>h.emit("error",new p.CacheError(t))),(t=>Promise.resolve().then(()=>t.cache?this.cache.get(f):void 0).then(e=>{if(void 0===e)return y(t);const r=a.fromObject(e.cachePolicy);if(r.satisfiesWithoutRevalidation(t)){const t=r.responseHeaders(),o=new l(e.statusCode,t,e.body,e.url);o.cachePolicy=r,o.fromCache=!0,h.emit("response",o),"function"==typeof n&&n(o)}else m=e,t.headers=r.revalidationHeaders(t),y(t)}))(e).catch(t=>{e.automaticFailover&&!g&&y(e),h.emit("error",new p.CacheError(t))}),h}}}p.RequestError=class extends Error{constructor(t){super(t.message),this.name="RequestError",Object.assign(this,t)}},p.CacheError=class extends Error{constructor(t){super(t.message),this.name="CacheError",Object.assign(this,t)}},t.exports=p},function(t,e,n){"use strict";function r(t,e){return e.some(e=>e instanceof RegExp?e.test(t):e===t)}const o=n(5),i=n(58),s=n(59),a=n(63),l=n(64),c={"http:":80,"https:":443,"ftp:":21},u={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};t.exports=((t,e)=>{if(e=Object.assign({normalizeProtocol:!0,normalizeHttps:!1,stripFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0},e),"string"!=typeof t)throw new TypeError("Expected a string");const n=t.startsWith("//");t=a(t.trim()).replace(/^\/\//,"http://");const h=o.parse(t);if(e.normalizeHttps&&"https:"===h.protocol&&(h.protocol="http:"),!h.hostname&&!h.pathname)throw new Error("Invalid URL");delete h.host,delete h.query,e.stripFragment&&delete h.hash;const p=c[h.protocol];if(Number(h.port)===p&&delete h.port,h.pathname&&(h.pathname=h.pathname.replace(/\/{2,}/g,"/")),h.pathname&&(h.pathname=decodeURI(h.pathname)),!0===e.removeDirectoryIndex&&(e.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(e.removeDirectoryIndex)&&e.removeDirectoryIndex.length>0){let t=h.pathname.split("/");r(t[t.length-1],e.removeDirectoryIndex)&&(t=t.slice(0,t.length-1),h.pathname=t.slice(1).join("/")+"/")}if(u[h.protocol]){const t=h.protocol+"//"+h.hostname,e=o.resolve(t,h.pathname);h.pathname=e.replace(t,"")}h.hostname&&(h.hostname=i.toUnicode(h.hostname).toLowerCase(),h.hostname=h.hostname.replace(/\.$/,""),e.stripWWW&&(h.hostname=h.hostname.replace(/^www\./,""))),"?"===h.search&&delete h.search;const d=s.parse(h.search);if(Array.isArray(e.removeQueryParameters))for(const t in d)r(t,e.removeQueryParameters)&&delete d[t];return e.sortQueryParameters&&(h.search=s.stringify(l(d))),h.search=decodeURIComponent(h.search),t=o.format(h),(e.removeTrailingSlash||"/"===h.pathname)&&(t=t.replace(/\/$/,"")),n&&!e.normalizeProtocol&&(t=t.replace(/^http:\/\//,"//")),t})},function(t,e){t.exports=require("punycode")},function(t,e,n){"use strict";function r(t,e){return e.encode?e.strict?i(t):encodeURIComponent(t):t}function o(t){return Array.isArray(t)?t.sort():"object"==typeof t?o(Object.keys(t)).sort(function(t,e){return Number(t)-Number(e)}).map(function(e){return t[e]}):t}var i=n(60),s=n(61),a=n(62);e.extract=function(t){var e=t.indexOf("?");return-1===e?"":t.slice(e+1)},e.parse=function(t,e){var n=function(t){var e;switch(t.arrayFormat){case"index":return function(t,n,r){e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),e?(void 0===r[t]&&(r[t]={}),r[t][e[1]]=n):r[t]=n};case"bracket":return function(t,n,r){e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e?void 0!==r[t]?r[t]=[].concat(r[t],n):r[t]=[n]:r[t]=n};default:return function(t,e,n){void 0!==n[t]?n[t]=[].concat(n[t],e):n[t]=e}}}(e=s({arrayFormat:"none"},e)),r=Object.create(null);return"string"!=typeof t?r:(t=t.trim().replace(/^[?#&]/,""))?(t.split("&").forEach(function(t){var e=t.replace(/\+/g," ").split("="),o=e.shift(),i=e.length>0?e.join("="):void 0;i=void 0===i?null:a(i),n(a(o),i,r)}),Object.keys(r).sort().reduce(function(t,e){var n=r[e];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?t[e]=o(n):t[e]=n,t},Object.create(null))):r},e.stringify=function(t,e){var n=function(t){switch(t.arrayFormat){case"index":return function(e,n,o){return null===n?[r(e,t),"[",o,"]"].join(""):[r(e,t),"[",r(o,t),"]=",r(n,t)].join("")};case"bracket":return function(e,n){return null===n?r(e,t):[r(e,t),"[]=",r(n,t)].join("")};default:return function(e,n){return null===n?r(e,t):[r(e,t),"=",r(n,t)].join("")}}}(e=s({encode:!0,strict:!0,arrayFormat:"none"},e));return t?Object.keys(t).sort().map(function(o){var i=t[o];if(void 0===i)return"";if(null===i)return r(o,e);if(Array.isArray(i)){var s=[];return i.slice().forEach(function(t){void 0!==t&&s.push(n(o,t,s.length))}),s.join("&")}return r(o,e)+"="+r(i,e)}).filter(function(t){return t.length>0}).join("&"):""}},function(t,e,n){"use strict";t.exports=function(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}},function(t,e,n){"use strict";var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,s,a=function(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),l=1;l<arguments.length;l++){n=Object(arguments[l]);for(var c in n)o.call(n,c)&&(a[c]=n[c]);if(r){s=r(n);for(var u=0;u<s.length;u++)i.call(n,s[u])&&(a[s[u]]=n[s[u]])}}return a}},function(t,e,n){"use strict";function r(t,e){try{return decodeURIComponent(t.join(""))}catch(t){}if(1===t.length)return t;e=e||1;var n=t.slice(0,e),o=t.slice(e);return Array.prototype.concat.call([],r(n),r(o))}function o(t){try{return decodeURIComponent(t)}catch(o){for(var e=t.match(i),n=1;n<e.length;n++)e=(t=r(e,n).join("")).match(i);return t}}var i=new RegExp("%[a-f0-9]{2}","gi"),s=new RegExp("(%[a-f0-9]{2})+","gi");t.exports=function(t){if("string"!=typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch(e){return function(t){for(var e={"%FE%FF":"��","%FF%FE":"��"},n=s.exec(t);n;){try{e[n[0]]=decodeURIComponent(n[0])}catch(t){var r=o(n[0]);r!==n[0]&&(e[n[0]]=r)}n=s.exec(t)}e["%C2"]="�";for(var i=Object.keys(e),a=0;a<i.length;a++){var l=i[a];t=t.replace(new RegExp(l,"g"),e[l])}return t}(t)}}},function(t,e,n){"use strict";t.exports=((t,e)=>{if("string"!=typeof t)throw new TypeError(`Expected \`url\` to be of type \`string\`, got \`${typeof t}\``);return t=t.trim(),e=Object.assign({https:!1},e),/^\.*\/|^(?!localhost)\w+:/.test(t)?t:t.replace(/^(?!(?:\w+:)?\/\/)/,e.https?"https://":"http://")})},function(t,e,n){"use strict";const r=n(65);t.exports=((t,e)=>{if(!r(t))throw new TypeError("Expected a plain object");if("function"==typeof(e=e||{}))throw new TypeError("Specify the compare function as an option instead");const n=e.deep,o=[],i=[],s=t=>{const a=o.indexOf(t);if(-1!==a)return i[a];const l={},c=Object.keys(t).sort(e.compare);o.push(t),i.push(l);for(let e=0;e<c.length;e++){const o=c[e],i=t[o];if(n&&Array.isArray(i)){const t=[];for(let e=0;e<i.length;e++)t[e]=r(i[e])?s(i[e]):i[e];l[o]=t}else l[o]=n&&r(i)?s(i):i}return l};return s(t)})},function(t,e,n){"use strict";var r=Object.prototype.toString;t.exports=function(t){var e;return"[object Object]"===r.call(t)&&(null===(e=Object.getPrototypeOf(t))||e===Object.getPrototypeOf({}))}},function(t,e,n){"use strict";const r=n(3).PassThrough;t.exports=(t=>{const e=(t=Object.assign({},t)).array;let n=t.encoding;const o="buffer"===n;let i=!1;e?i=!(n||o):n=n||"utf8",o&&(n=null);let s=0;const a=[],l=new r({objectMode:i});return n&&l.setEncoding(n),l.on("data",t=>{a.push(t),i?s=a.length:s+=t.length}),l.getBufferedValue=(()=>e?a:o?Buffer.concat(a,s):a.join("")),l.getBufferedLength=(()=>s),l})},function(t,e,n){"use strict";function r(t){var e={};if(!t)return e;var n=t.trim().split(/\s*,\s*/),r=Array.isArray(n),o=0;for(n=r?n:n[Symbol.iterator]();;){var i;if(r){if(o>=n.length)break;i=n[o++]}else{if((o=n.next()).done)break;i=o.value}var s=i.split(/\s*=\s*/,2),a=s[0],l=s[1];e[a]=void 0===l||l.replace(/^"|"$/g,"")}return e}var o=[200,203,204,206,300,301,404,405,410,414,501],i=[200,203,204,300,301,302,303,307,308,404,405,410,414,501],s={connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},a={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};t.exports=function(){function t(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=o.shared,s=o.cacheHeuristic,a=o.immutableMinTimeToLive,l=o.ignoreCargoCult,c=o._fromObject;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),c)this._fromObject(c);else{if(!n||!n.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(e),this._responseTime=this.now(),this._isShared=!1!==i,this._cacheHeuristic=void 0!==s?s:.1,this._immutableMinTtl=void 0!==a?a:864e5,this._status="status"in n?n.status:200,this._resHeaders=n.headers,this._rescc=r(n.headers["cache-control"]),this._method="method"in e?e.method:"GET",this._url=e.url,this._host=e.headers.host,this._noAuthorization=!e.headers.authorization,this._reqHeaders=n.headers.vary?e.headers:null,this._reqcc=r(e.headers["cache-control"]),l&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":function(t){var e=[];for(var n in t){var r=t[n];e.push(!0===r?n:n+"="+r)}if(e.length)return e.join(", ")}(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),!n.headers["cache-control"]&&/no-cache/.test(n.headers.pragma)&&(this._rescc["no-cache"]=!0)}}return t.prototype.now=function(){return Date.now()},t.prototype.storable=function(){return!(this._reqcc["no-store"]||!("GET"===this._method||"HEAD"===this._method||"POST"===this._method&&this._hasExplicitExpiration())||-1===i.indexOf(this._status)||this._rescc["no-store"]||this._isShared&&this._rescc.private||this._isShared&&!this._noAuthorization&&!this._allowsStoringAuthenticated()||!(this._resHeaders.expires||this._rescc.public||this._rescc["max-age"]||this._rescc["s-maxage"]||-1!==o.indexOf(this._status)))},t.prototype._hasExplicitExpiration=function(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires},t.prototype._assertRequestHasHeaders=function(t){if(!t||!t.headers)throw Error("Request headers missing")},t.prototype.satisfiesWithoutRevalidation=function(t){this._assertRequestHasHeaders(t);var e=r(t.headers["cache-control"]);if(e["no-cache"]||/no-cache/.test(t.headers.pragma))return!1;if(e["max-age"]&&this.age()>e["max-age"])return!1;if(e["min-fresh"]&&this.timeToLive()<1e3*e["min-fresh"])return!1;if(this.stale()){if(!(e["max-stale"]&&!this._rescc["must-revalidate"]&&(!0===e["max-stale"]||e["max-stale"]>this.age()-this.maxAge())))return!1}return this._requestMatches(t,!1)},t.prototype._requestMatches=function(t,e){return(!this._url||this._url===t.url)&&this._host===t.headers.host&&(!t.method||this._method===t.method||e&&"HEAD"===t.method)&&this._varyMatches(t)},t.prototype._allowsStoringAuthenticated=function(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]},t.prototype._varyMatches=function(t){if(!this._resHeaders.vary)return!0;if("*"===this._resHeaders.vary)return!1;var e=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/),n=Array.isArray(e),r=0;for(e=n?e:e[Symbol.iterator]();;){var o;if(n){if(r>=e.length)break;o=e[r++]}else{if((r=e.next()).done)break;o=r.value}var i=o;if(t.headers[i]!==this._reqHeaders[i])return!1}return!0},t.prototype._copyWithoutHopByHopHeaders=function(t){var e={};for(var n in t)s[n]||(e[n]=t[n]);if(t.connection){var r=t.connection.trim().split(/\s*,\s*/),o=Array.isArray(r),i=0;for(r=o?r:r[Symbol.iterator]();;){var a;if(o){if(i>=r.length)break;a=r[i++]}else{if((i=r.next()).done)break;a=i.value}delete e[a]}}if(e.warning){var l=e.warning.split(/,/).filter(function(t){return!/^\s*1[0-9][0-9]/.test(t)});l.length?e.warning=l.join(",").trim():delete e.warning}return e},t.prototype.responseHeaders=function(){var t=this._copyWithoutHopByHopHeaders(this._resHeaders),e=this.age();return e>86400&&!this._hasExplicitExpiration()&&this.maxAge()>86400&&(t.warning=(t.warning?`${t.warning}, `:"")+'113 - "rfc7234 5.5.4"'),t.age=`${Math.round(e)}`,t},t.prototype.date=function(){var t=Date.parse(this._resHeaders.date);return Number.isNaN(t)||t<this._responseTime-288e5||t>this._responseTime+288e5?this._responseTime:t},t.prototype.age=function(){var t=Math.max(0,(this._responseTime-this.date())/1e3);if(this._resHeaders.age){var e=this._ageValue();e>t&&(t=e)}return t+(this.now()-this._responseTime)/1e3},t.prototype._ageValue=function(){var t=parseInt(this._resHeaders.age);return isFinite(t)?t:0},t.prototype.maxAge=function(){if(!this.storable()||this._rescc["no-cache"])return 0;if(this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable)return 0;if("*"===this._resHeaders.vary)return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return parseInt(this._rescc["s-maxage"],10)}if(this._rescc["max-age"])return parseInt(this._rescc["max-age"],10);var t=this._rescc.immutable?this._immutableMinTtl:0,e=this.date();if(this._resHeaders.expires){var n=Date.parse(this._resHeaders.expires);return Number.isNaN(n)||n<e?0:Math.max(t,(n-e)/1e3)}if(this._resHeaders["last-modified"]){var r=Date.parse(this._resHeaders["last-modified"]);if(isFinite(r)&&e>r)return Math.max(t,(e-r)/1e3*this._cacheHeuristic)}return t},t.prototype.timeToLive=function(){return 1e3*Math.max(0,this.maxAge()-this.age())},t.prototype.stale=function(){return this.maxAge()<=this.age()},t.fromObject=function(t){return new this(void 0,void 0,{_fromObject:t})},t.prototype._fromObject=function(t){if(this._responseTime)throw Error("Reinitialized");if(!t||1!==t.v)throw Error("Invalid serialization");this._responseTime=t.t,this._isShared=t.sh,this._cacheHeuristic=t.ch,this._immutableMinTtl=void 0!==t.imm?t.imm:864e5,this._status=t.st,this._resHeaders=t.resh,this._rescc=t.rescc,this._method=t.m,this._url=t.u,this._host=t.h,this._noAuthorization=t.a,this._reqHeaders=t.reqh,this._reqcc=t.reqcc},t.prototype.toObject=function(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}},t.prototype.revalidationHeaders=function(t){this._assertRequestHasHeaders(t);var e=this._copyWithoutHopByHopHeaders(t.headers);if(delete e["if-range"],!this._requestMatches(t,!0)||!this.storable())return delete e["if-none-match"],delete e["if-modified-since"],e;this._resHeaders.etag&&(e["if-none-match"]=e["if-none-match"]?`${e["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag);if(e["accept-ranges"]||e["if-match"]||e["if-unmodified-since"]||this._method&&"GET"!=this._method){if(delete e["if-modified-since"],e["if-none-match"]){var n=e["if-none-match"].split(/,/).filter(function(t){return!/^\s*W\//.test(t)});n.length?e["if-none-match"]=n.join(",").trim():delete e["if-none-match"]}}else this._resHeaders["last-modified"]&&!e["if-modified-since"]&&(e["if-modified-since"]=this._resHeaders["last-modified"]);return e},t.prototype.revalidatedPolicy=function(t,e){if(this._assertRequestHasHeaders(t),!e||!e.headers)throw Error("Response headers missing");var n=!1;if(void 0!==e.status&&304!=e.status?n=!1:e.headers.etag&&!/^\s*W\//.test(e.headers.etag)?n=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===e.headers.etag:this._resHeaders.etag&&e.headers.etag?n=this._resHeaders.etag.replace(/^\s*W\//,"")===e.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?n=this._resHeaders["last-modified"]===e.headers["last-modified"]:this._resHeaders.etag||this._resHeaders["last-modified"]||e.headers.etag||e.headers["last-modified"]||(n=!0),!n)return{policy:new this.constructor(t,e),modified:!0};var r={};for(var o in this._resHeaders)r[o]=o in e.headers&&!a[o]?e.headers[o]:this._resHeaders[o];var i=Object.assign({},e,{status:this._status,method:this._method,headers:r});return{policy:new this.constructor(t,i),modified:!1}},t}()},function(t,e,n){"use strict";const r=n(3).Readable,o=n(26);t.exports=class extends r{constructor(t,e,n,r){if("number"!=typeof t)throw new TypeError("Argument `statusCode` should be a number");if("object"!=typeof e)throw new TypeError("Argument `headers` should be an object");if(!(n instanceof Buffer))throw new TypeError("Argument `body` should be a buffer");if("string"!=typeof r)throw new TypeError("Argument `url` should be a string");super(),this.statusCode=t,this.headers=o(e),this.body=n,this.url=r}_read(){this.push(this.body),this.push(null)}}},function(t,e,n){"use strict";const r=n(3).PassThrough,o=n(27);t.exports=(t=>{if(!t||!t.pipe)throw new TypeError("Parameter `response` must be a response stream.");const e=new r;return o(t,e),t.pipe(e)})},function(t,e,n){"use strict";const r=n(12),o=n(71),i=t=>{if(t.adapter||t.uri){t.adapter||/^[^:]*/.exec(t.uri)[0];return new(!function(){var t=new Error('Cannot find module "."');throw t.code="MODULE_NOT_FOUND",t}())(t)}return new Map};t.exports=class extends r{constructor(t,e){if(super(),this.opts=Object.assign({namespace:"keyv"},"string"==typeof t?{uri:t}:t,e),!this.opts.store){const t=Object.assign({},this.opts);this.opts.store=i(t)}"function"==typeof this.opts.store.on&&this.opts.store.on("error",t=>this.emit("error",t)),this.opts.store.namespace=this.opts.namespace}_getKeyPrefix(t){return`${this.opts.namespace}:${t}`}get(t){t=this._getKeyPrefix(t);const e=this.opts.store;return Promise.resolve().then(()=>e.get(t)).then(e=>{if(void 0!==(e="string"==typeof e?o.parse(e):e)){if(!("number"==typeof e.expires&&Date.now()>e.expires))return e.value;this.delete(t)}})}set(t,e,n){t=this._getKeyPrefix(t),void 0===n&&(n=this.opts.ttl),0===n&&(n=void 0);const r=this.opts.store;return Promise.resolve().then(()=>{const i="number"==typeof n?Date.now()+n:null;return e={value:e,expires:i},r.set(t,o.stringify(e),n)}).then(()=>!0)}delete(t){t=this._getKeyPrefix(t);const e=this.opts.store;return Promise.resolve().then(()=>e.delete(t))}clear(){const t=this.opts.store;return Promise.resolve().then(()=>t.clear())}}},function(t,e){e.stringify=function t(e){if(void 0===e)return e;if(e&&Buffer.isBuffer(e))return JSON.stringify(":base64:"+e.toString("base64"));if(e&&e.toJSON&&(e=e.toJSON()),e&&"object"==typeof e){var n="",r=Array.isArray(e);n=r?"[":"{";var o=!0;for(var i in e){var s="function"==typeof e[i]||!r&&void 0===e[i];Object.hasOwnProperty.call(e,i)&&!s&&(o||(n+=","),o=!1,r?void 0==e[i]?n+="null":n+=t(e[i]):void 0!==e[i]&&(n+=t(i)+":"+t(e[i])))}return n+=r?"]":"}"}return"string"==typeof e?JSON.stringify(/^:/.test(e)?":"+e:e):void 0===e?"null":JSON.stringify(e)},e.parse=function(t){return JSON.parse(t,function(t,e){return"string"==typeof e?/^:base64:/.test(e)?new Buffer(e.substring(8),"base64"):/^:/.test(e)?e.substring(1):e:e})}},function(t,e){function n(t){throw new Error("Cannot find module '"+t+"'.")}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=72},function(t,e,n){"use strict";function r(t,e,n){void 0===n&&(n=e,e=t,t=null),o.Duplex.call(this,t),"function"!=typeof n.read&&(n=new o.Readable(t).wrap(n)),this._writable=e,this._readable=n,this._waiting=!1;var r=this;e.once("finish",function(){r.end()}),this.once("finish",function(){e.end()}),n.on("readable",function(){r._waiting&&(r._waiting=!1,r._read())}),n.once("end",function(){r.push(null)}),t&&void 0!==t.bubbleErrors&&!t.bubbleErrors||(e.on("error",function(t){r.emit("error",t)}),n.on("error",function(t){r.emit("error",t)}))}var o=n(3);(r.prototype=Object.create(o.Duplex.prototype,{constructor:{value:r}}))._write=function(t,e,n){this._writable.write(t,e,n)},r.prototype._read=function(){for(var t,e=0;null!==(t=this._readable.read());)this.push(t),e++;0===e&&(this._waiting=!0)},t.exports=function(t,e,n){return new r(t,e,n)},t.exports.DuplexWrapper=r},function(t,e,n){"use strict";const r=n(75),o=n(83);t.exports=(t=>{function e(e){const r=!(n=o(t=e)?t:null)&&t[Symbol.iterator]&&"string"!=typeof t&&!Buffer.isBuffer(t);i=r?t[Symbol.iterator]():null}Array.isArray(t)&&(t=t.slice());let n,i;return e(t),r(function r(o,s){if(n)return void n.then(e).then(()=>r.call(this,o,s),s);if(i){const t=i.next();return void setImmediate(s,null,t.done?null:t.value)}if(0===t.length)return void setImmediate(s,null,null);const a=t.slice(0,o);t=t.slice(o),setImmediate(s,null,a)})}),t.exports.obj=(t=>{function e(e){n=o(t=e)?t:null,i=!n&&t[Symbol.iterator]?t[Symbol.iterator]():null}Array.isArray(t)&&(t=t.slice());let n,i;return e(t),r.obj(function r(o,s){if(n)n.then(e).then(()=>r.call(this,o,s),s);else if(i){const t=i.next();setImmediate(s,null,t.done?null:t.value)}else this.push(t),setImmediate(s,null,null)})})},function(t,e,n){function r(t,e){("object"!=typeof t||Array.isArray(t))&&(e=t,t={});var n=new c(t);return n._from=Array.isArray(e)?function(t){return t=t.slice(),function(e,n){var r=null,o=t.length?t.shift():null;o instanceof Error&&(r=o,o=null),n(r,o)}}(e):e||i,n}function o(t,e){function n(e){if(!(this instanceof n))return new n(e);this._reading=!1,this._callback=function(t,e){if(!r.destroyed){if(t)return r.destroy(t);if(null===e)return r.push(null);r._reading=!1,r.push(e)&&r._read(o)}},this.destroyed=!1,a.call(this,e||t);var r=this,o=this._readableState.highWaterMark}return"function"==typeof t&&(e=t,t={}),t=s(t),l(n,a),n.prototype._from=e||i,n.prototype._read=function(t){this._reading||this.destroyed||(this._reading=!0,this._from(t,this._callback))},n.prototype.destroy=function(t){if(!this.destroyed){this.destroyed=!0;var e=this;process.nextTick(function(){t&&e.emit("error",t),e.emit("close")})}},n}function i(){}function s(t){return t=t||{}}var a=n(76).Readable,l=n(9);t.exports=r,r.ctor=o,r.obj=function(t,e){return("function"==typeof t||Array.isArray(t))&&(e=t,t={}),t=s(t),t.objectMode=!0,t.highWaterMark=16,r(t,e)};var c=o()},function(t,e,n){var r=n(3);"disable"===process.env.READABLE_STREAM&&r?(t.exports=r,(e=t.exports=r.Readable).Readable=r.Readable,e.Writable=r.Writable,e.Duplex=r.Duplex,e.Transform=r.Transform,e.PassThrough=r.PassThrough,e.Stream=r):((e=t.exports=n(36)).Stream=r||e,e.Readable=e,e.Writable=n(39),e.Duplex=n(10),e.Transform=n(41),e.PassThrough=n(82))},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e){t.exports=require("buffer")},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){"use strict";function r(t,e,n){t.copy(e,n)}var o=n(13).Buffer;t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},t.prototype.concat=function(t){if(0===this.length)return o.alloc(0);if(1===this.length)return this.head.data;for(var e=o.allocUnsafe(t>>>0),n=this.head,i=0;n;)r(n.data,e,i),i+=n.data.length,n=n.next;return e},t}()},function(t,e,n){t.exports=n(20).deprecate},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);o.call(this,t)}t.exports=r;var o=n(41),i=n(14);i.inherits=n(9),i.inherits(r,o),r.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){"use strict";t.exports=(t=>t instanceof Promise||null!==t&&"object"==typeof t&&"function"==typeof t.then&&"function"==typeof t.catch)},function(t,e,n){"use strict";function r(t){if(null===t)return"null";if(!0===t||!1===t)return"boolean";const e=typeof t;if("undefined"===e)return"undefined";if("string"===e)return"string";if("number"===e)return"number";if("symbol"===e)return"symbol";if(r.function_(t))return"Function";if(Array.isArray(t))return"Array";if(Buffer.isBuffer(t))return"Buffer";const n=a(t);if(n)return n;if(t instanceof String||t instanceof Boolean||t instanceof Number)throw new TypeError("Please don't use object wrappers for primitive types");return"Object"}Object.defineProperty(e,"__esModule",{value:!0});const o=n(20),i=Object.prototype.toString,s=t=>e=>typeof e===t,a=t=>{const e=i.call(t).slice(8,-1);return e||null},l=t=>e=>a(e)===t;!function(t){const e=t=>"object"==typeof t;t.undefined=s("undefined"),t.string=s("string"),t.number=s("number"),t.function_=s("function"),t.null_=(t=>null===t),t.class_=(e=>t.function_(e)&&e.toString().startsWith("class ")),t.boolean=(t=>!0===t||!1===t),t.symbol=s("symbol"),t.array=Array.isArray,t.buffer=Buffer.isBuffer,t.nullOrUndefined=(e=>t.null_(e)||t.undefined(e)),t.object=(n=>!t.nullOrUndefined(n)&&(t.function_(n)||e(n))),t.iterable=(e=>!t.nullOrUndefined(e)&&t.function_(e[Symbol.iterator])),t.generator=(e=>t.iterable(e)&&t.function_(e.next)&&t.function_(e.throw)),t.nativePromise=l("Promise");t.promise=(n=>t.nativePromise(n)||(n=>!t.null_(n)&&e(n)&&t.function_(n.then)&&t.function_(n.catch))(n));const n=e=>n=>t.function_(n)&&t.function_(n.constructor)&&n.constructor.name===e;t.generatorFunction=n("GeneratorFunction"),t.asyncFunction=n("AsyncFunction"),t.boundFunction=(e=>t.function_(e)&&!e.hasOwnProperty("prototype")),t.regExp=l("RegExp"),t.date=l("Date"),t.error=l("Error"),t.map=l("Map"),t.set=l("Set"),t.weakMap=l("WeakMap"),t.weakSet=l("WeakSet"),t.int8Array=l("Int8Array"),t.uint8Array=l("Uint8Array"),t.uint8ClampedArray=l("Uint8ClampedArray"),t.int16Array=l("Int16Array"),t.uint16Array=l("Uint16Array"),t.int32Array=l("Int32Array"),t.uint32Array=l("Uint32Array"),t.float32Array=l("Float32Array"),t.float64Array=l("Float64Array"),t.arrayBuffer=l("ArrayBuffer"),t.sharedArrayBuffer=l("SharedArrayBuffer"),t.truthy=(t=>Boolean(t)),t.falsy=(t=>!t),t.nan=(t=>Number.isNaN(t));const r=new Set(["undefined","string","number","boolean","symbol"]);t.primitive=(e=>t.null_(e)||r.has(typeof e)),t.integer=(t=>Number.isInteger(t)),t.safeInteger=(t=>Number.isSafeInteger(t)),t.plainObject=(t=>{let e;return"Object"===a(t)&&(null===(e=Object.getPrototypeOf(t))||e===Object.getPrototypeOf({}))});const i=new Set(["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"]);t.typedArray=(t=>{const e=a(t);return null!==e&&i.has(e)});t.arrayLike=(e=>!t.nullOrUndefined(e)&&!t.function_(e)&&(e=>t.safeInteger(e)&&e>-1)(e.length)),t.inRange=((e,n)=>{if(t.number(n))return e>=Math.min(0,n)&&e<=Math.max(n,0);if(t.array(n)&&2===n.length)return e>=Math.min.apply(null,n)&&e<=Math.max.apply(null,n);throw new TypeError(`Invalid range: ${o.inspect(n)}`)});const c=["innerHTML","ownerDocument","style","attributes","nodeValue"];t.domElement=(e=>t.object(e)&&1===e.nodeType&&t.string(e.nodeName)&&!t.plainObject(e)&&c.every(t=>t in e)),t.nodeStream=(n=>!t.nullOrUndefined(n)&&e(n)&&t.function_(n.pipe)),t.infinite=(t=>t===1/0||t===-1/0);const u=e=>n=>t.integer(n)&&Math.abs(n%2)===e;t.even=u(0),t.odd=u(1);t.empty=(e=>t.falsy(e)||(e=>(t.string(e)||t.array(e))&&0===e.length)(e)||(e=>!t.map(e)&&!t.set(e)&&t.object(e)&&0===Object.keys(e).length)(e)||(e=>(t.map(e)||t.set(e))&&0===e.size)(e)),t.emptyOrWhitespace=(e=>t.empty(e)||(e=>t.string(e)&&!1===/\S/.test(e))(e));const h=(e,n,r)=>{const i=Array.prototype.slice.call(r,1);if(!1===t.function_(n))throw new TypeError(`Invalid predicate: ${o.inspect(n)}`);if(0===i.length)throw new TypeError("Invalid number of values");return e.call(i,n)};t.any=function(t){return h(Array.prototype.some,t,arguments)},t.all=function(t){return h(Array.prototype.every,t,arguments)}}(r||(r={})),Object.defineProperties(r,{class:{value:r.class_},function:{value:r.function_},null:{value:r.null_}}),e.default=r,t.exports=r,t.exports.default=r},function(t,e,n){"use strict";t.exports=function(t,e){function n(){t.timeoutTimer&&(clearTimeout(t.timeoutTimer),t.timeoutTimer=null)}function r(){n(),void 0!==o.socket&&t.setTimeout(o.socket,function(){t.abort();var e=new Error("Socket timed out on request"+i);e.code="ESOCKETTIMEDOUT",t.emit("error",e)})}if(t.timeoutTimer)return t;var o=isNaN(e)?e:{socket:e,connect:e},i=t._headers?" to "+t._headers.host:"";return void 0!==o.connect&&(t.timeoutTimer=setTimeout(function(){t.abort();var e=new Error("Connection timed out on request"+i);e.code="ETIMEDOUT",t.emit("error",e)},o.connect)),t.on("socket",function(t){t.connecting||t._connecting?t.once("connect",r):r()}),t.on("error",n)}},function(t,e,n){"use strict";const r=n(5),o=n(87);t.exports=((t,e)=>{if("string"!=typeof t)throw new TypeError(`Expected \`url\` to be of type \`string\`, got \`${typeof t}\` instead.`);const n=o(t,Object.assign({https:!0},e));return r.parse(n)})},function(t,e,n){"use strict";t.exports=((t,e)=>{if("string"!=typeof t)throw new TypeError(`Expected \`url\` to be of type \`string\`, got \`${typeof t}\``);return t=t.trim(),e=Object.assign({https:!1},e),/^\.*\/|^(?!localhost)\w+:/.test(t)?t:t.replace(/^(?!(?:\w+:)?\/\/)/,e.https?"https://":"http://")})},function(t,e,n){"use strict";t.exports=function(t){var e={protocol:t.protocol,hostname:t.hostname,hash:t.hash,search:t.search,pathname:t.pathname,path:`${t.pathname}${t.search}`,href:t.href};return""!==t.port&&(e.port=Number(t.port)),(t.username||t.password)&&(e.auth=`${t.username}:${t.password}`),e}},function(t,e,n){"use strict";const r=n(3).PassThrough,o=n(24),i=n(27);t.exports=(t=>{if(-1===["gzip","deflate"].indexOf(t.headers["content-encoding"]))return t;const e=o.createUnzip(),n=new r;return i(t,n),e.on("error",t=>{"Z_BUF_ERROR"!==t.code?n.emit("error",t):n.end()}),t.pipe(e).pipe(n),n})},function(t,e,n){"use strict";var r=["ETIMEDOUT","ECONNRESET","EADDRINUSE","ESOCKETTIMEDOUT","ECONNREFUSED","EPIPE"],o=["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED"];t.exports=function(t){return!t||!t.code||(-1!==r.indexOf(t.code)||-1===o.indexOf(t.code))}},function(t,e,n){"use strict";const r=n(92),o=n(94),i=Object.prototype.toString,s=(t,e)=>!!o(t)&&(!r&&"[object URL]"===i.call(t)||"href"in t&&("protocol"in t&&("username"in t&&("password"in t&&("hostname"in t&&("port"in t&&("host"in t&&("pathname"in t&&("search"in t&&("hash"in t&&!(!0!==e&&!o(t.searchParams))))))))))));s.lenient=(t=>s(t,!0)),t.exports=s},function(t,e,n){"use strict";t.exports=n(93)&&"symbol"==typeof Symbol.toStringTag},function(t,e,n){"use strict";t.exports="function"==typeof Symbol&&"symbol"==typeof Symbol("")},function(t,e,n){"use strict";t.exports=function(t){return"object"==typeof t&&null!==t}},function(t,e,n){"use strict";class r extends Error{constructor(){super("Promise was canceled"),this.name="CancelError"}}class o{static fn(t){return function(){const e=[].slice.apply(arguments);return new o((n,r,o)=>{e.unshift(n),t.apply(null,e).then(r,o)})}}constructor(t){this._pending=!0,this._canceled=!1,this._promise=new Promise((e,n)=>(this._reject=n,t(t=>{this._cancel=t},t=>{this._pending=!1,e(t)},t=>{this._pending=!1,n(t)})))}then(){return this._promise.then.apply(this._promise,arguments)}catch(){return this._promise.catch.apply(this._promise,arguments)}cancel(){if(this._pending&&!this._canceled){if("function"==typeof this._cancel)try{this._cancel()}catch(t){this._reject(t)}this._canceled=!0,this._reject(new r)}}get canceled(){return this._canceled}}Object.setPrototypeOf(o.prototype,Promise.prototype),t.exports=o,t.exports.CancelError=r},function(t,e,n){"use strict";const r=n(97);class o extends Error{constructor(t){super(t),this.name="TimeoutError"}}t.exports=((t,e,n)=>new Promise((i,s)=>{if("number"!=typeof e||e<0)throw new TypeError("Expected `ms` to be a positive number");const a=setTimeout(()=>{if("function"==typeof n){try{i(n())}catch(a){s(a)}return}const r="string"==typeof n?n:`Promise timed out after ${e} milliseconds`,a=n instanceof Error?n:new o(r);"function"==typeof t.cancel&&t.cancel(),s(a)},e);r(t.then(i,s),()=>{clearTimeout(a)})})),t.exports.TimeoutError=o},function(t,e,n){"use strict";t.exports=((t,e)=>(e=e||(()=>{}),t.then(t=>new Promise(t=>{t(e())}).then(()=>t),t=>new Promise(t=>{t(e())}).then(()=>{throw t}))))},function(t,e,n){"use strict";const r=(t,e)=>(function(){const n=e.promiseModule,r=new Array(arguments.length);for(let t=0;t<arguments.length;t++)r[t]=arguments[t];return new n((n,o)=>{e.errorFirst?r.push(function(t,r){if(e.multiArgs){const e=new Array(arguments.length-1);for(let t=1;t<arguments.length;t++)e[t-1]=arguments[t];t?(e.unshift(t),o(e)):n(e)}else t?o(t):n(r)}):r.push(function(t){if(e.multiArgs){const t=new Array(arguments.length-1);for(let e=0;e<arguments.length;e++)t[e]=arguments[e];n(t)}else n(t)}),t.apply(this,r)})});t.exports=((t,e)=>{e=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},e);const n=t=>{const n=e=>"string"==typeof e?t===e:e.test(t);return e.include?e.include.some(n):!e.exclude.some(n)};let o;o="function"==typeof t?function(){return e.excludeMain?t.apply(this,arguments):r(t,e).apply(this,arguments)}:Object.create(Object.getPrototypeOf(t));for(const i in t){const s=t[i];o[i]="function"==typeof s&&n(i)?r(s,e):s}return o})},function(t,e){t.exports={_from:"got",_id:"got@8.0.1",_inBundle:!1,_integrity:"sha1-bX+Ls+uZ5a+RLv4moQRHZEHgjn8=",_location:"/got",_phantomChildren:{},_requested:{type:"tag",registry:!0,raw:"got",name:"got",escapedName:"got",rawSpec:"",saveSpec:null,fetchSpec:"latest"},_requiredBy:["#USER","/"],_resolved:"https://registry.npmjs.org/got/-/got-8.0.1.tgz",_shasum:"6d7f8bb3eb99e5af912efe26a104476441e08e7f",_spec:"got",_where:"C:\\Users\\pakru\\Desktop\\backuptest",ava:{concurrency:4},browser:{"decompress-response":!1,electron:!1},bugs:{url:"https://github.com/sindresorhus/got/issues"},bundleDependencies:!1,dependencies:{"@sindresorhus/is":"^0.6.0","cacheable-request":"^2.1.1","decompress-response":"^3.3.0",duplexer3:"^0.1.4","get-stream":"^3.0.0","into-stream":"^3.1.0","is-retry-allowed":"^1.1.0",isurl:"^1.0.0-alpha5","lowercase-keys":"^1.0.0","mimic-response":"^1.0.0","p-cancelable":"^0.3.0","p-timeout":"^2.0.1",pify:"^3.0.0","safe-buffer":"^5.1.1","timed-out":"^4.0.1","url-parse-lax":"^3.0.0","url-to-options":"^1.0.1"},deprecated:!1,description:"Simplified HTTP requests",devDependencies:{ava:"^0.23.0",coveralls:"^3.0.0","form-data":"^2.1.1","get-port":"^3.0.0",nyc:"^11.0.2","p-event":"^1.3.0",pem:"^1.4.4",sinon:"^4.0.0","slow-stream":"0.0.4",tempfile:"^2.0.0",tempy:"^0.2.1","universal-url":"1.0.0-alpha",xo:"^0.18.0"},engines:{node:">=4"},files:["index.js"],homepage:"https://github.com/sindresorhus/got#readme",keywords:["http","https","get","got","url","uri","request","util","utility","simple","curl","wget","fetch","net","network","electron"],license:"MIT",maintainers:[{name:"Sindre Sorhus",email:"sindresorhus@gmail.com",url:"sindresorhus.com"},{name:"Vsevolod Strukchinsky",email:"floatdrop@gmail.com",url:"github.com/floatdrop"},{name:"Alexander Tesfamichael",email:"alex.tesfamichael@gmail.com",url:"alextes.me"}],name:"got",repository:{type:"git",url:"git+https://github.com/sindresorhus/got.git"},scripts:{coveralls:"nyc report --reporter=text-lcov | coveralls",test:"xo && nyc ava"},version:"8.0.1"}},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);this.options=new o(t),this.path=this.options.path,this.file=this.options.file,this.windowOptions=this.options.window,this.window=null}function o(t){if(!(this instanceof o))return new o(t);this.window={width:300,height:300,maximizable:!1,resizable:!1,webPreferences:{devTools:!0,nodeIntegrationInWorker:!1}},this.path=null,this.file=null,this.fromOptions(t)}const i=n(1),s=n(0),a=n(5),{app:l,BrowserWindow:c}=n(2);r.prototype.start=function(){let t=this;l.on("ready",function(){t.window=new c(t.windowOptions),t.window.loadURL(a.format({pathname:s.join(__dirname,t.file),protocol:"file:",slashes:!0})),t.window.openDevTools(),t.window.on("closed",function(){t.window=null})}),l.on("window-all-closed",function(){"darwin"!==process.platform&&l.quit()}),l.on("activate",function(){null===t.window&&this.start()})},r.prototype.setPath=function(t){this.path=t},r.prototype.setFile=function(t){this.file=t},o.prototype.fromOptions=function(t){return i(t,"Options are required."),null!=t.window&&Object.assign(this.window,t.window),null!=t.path&&(i("string"==typeof t.path),this.path=t.path),null!=t.file&&(i("string"==typeof t.file),this.file=t.file),this},t.exports=r},function(t,e,n){"use strict";e.Auth=n(28),e.HSM=n(18),e.OTP=n(29)},function(t,e,n){"use strict";e.Config=n(30),e.FullNode=n(43),e.Logger=n(21),e.Node=n(31),e.SpvNode=n(46)},function(t,e){t.exports={update:{major:{version:"v2.0.0-beta.1",info:["Add WMCC Exchange","Add Built-in &amp; Standalone CLI","Add HTTP-RPC Requests","Add Receive Payment via URI","Add Languages Template","Add Restore/Backup Wallet on Cloud"]},minor:{version:"v1.1.0-beta.1",info:["Add Manage Address","Add Configuration Page","Add Notification","Update Search Transaction by Date","Update Sort Transaction by Type"]}}}},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);this.fromNode(t),this.hook=null,this.events=[],this.init()}n(1),Core.utils.Lock;const o=Core.wmcc.Amount;r.prototype.fromNode=function(t){this.chain=t.chain,this.mempool=t.mempool,this.walletdb=t.walletdb,this.miner=t.miner,this.info=t.info},r.prototype.init=function(){const t=this,e=(e,n)=>{let r=t.events.mempool;for(let o in r)t.emit(r[o].event,"mempool",r[o].el,{tx:e,view:n})};this.mempool.listeners("tx").filter(t=>t.toString()===e.toString()).length&&this.mempool.removeAllListeners("tx",e),this.mempool.on("tx",e);const n=()=>{let e=t.events.chain;for(let n in e)t.emit(e[n].event,"chain",e[n].el)};this.chain.listeners("block").filter(t=>t.toString()===n.toString()).length&&this.chain.removeAllListeners("block",n),this.chain.on("block",n);const r=()=>{let e=t.events.balance;for(let n in e)t.emit(e[n].event,"balance",e[n].el)};this.walletdb.listeners("hook balance").filter(t=>t.toString()===r.toString()).length&&this.walletdb.removeAllListeners("hook balance",r),this.walletdb.on("hook balance",r);const o=e=>{let n=t.events.miner;for(let r in n)t.emit(n[r].event,"miner",n[r].el,{attempt:e})};this.miner.listeners("miner block").filter(t=>t.toString()===o.toString()).length&&this.miner.removeAllListeners("miner block",o),this.miner.on("miner block",o);const i=(e,n)=>{let r=t.events.notification;for(let o in r)t.emit(r[o].event,"notification",r[o].el,{block:e,entry:n,prepend:!0})};this.miner.listeners("miner found").filter(t=>t.toString()===i.toString()).length&&this.miner.removeAllListeners("miner found",i),this.miner.on("miner found",i)},r.prototype.on=async function(t,e,n,r){this.events[e]||(this.events[e]=[]);const o={event:t,el:n};return this.events[e].filter((e,r)=>e.event===t||e.el===n).length||this.events[e].push(o),this.events[e]=this.events[e].map(t=>Object.assign(t,[o].find(e=>e&&t.event===e.event))),await this.emit(t,e,n,r)},r.prototype.add=async function(t,e,n,r){return await this.on(t,e,n,r)},r.prototype.emit=async function(t,e,n,r){try{let o;return o=r&&Object.keys(r).length?await this[t](...Object.values(r)):await this[t](),void(r&&r.append?n.append(o):r&&r.prepend?n.prepend(o):n.html(o))}catch(n){if("TypeError"!==n.name)throw n;console.log(`Unable to hook 'on' event for ${e}::${t}`)}},r.prototype.getBalance=async function(){return await this.info.wallet.getBalanceDetails(this.info.getAccountName())},r.prototype.getTotal=async function(t){const e=t||await this.getBalance();return o.text(e.total)},r.prototype.getAvailable=async function(t){const e=t||await this.getBalance();return o.text(e.available)},r.prototype.getPending=async function(t){const e=t||await this.getBalance();return o.text(e.pending)},r.prototype.getImmature=async function(t){const e=t||await this.getBalance();return o.text(e.immature)},r.prototype.getRecentTransactions=async function(){let t,e="";try{t=await this.info.wallet.getLast(this.info.wallet.account.name,5)}catch(t){return`<h2>${t}</h2>`}for(let n of t){n=await this.info.wallet.toDetails(n);const t=new Date(1e3*n.mtime).format("d-m-Y");let r=0,i=null;for(let t of n.inputs)t.path&&(r+=t.value,i="out"),0===n.time&&(i="out sending");if(r){r=0;for(let t of n.outputs)t.path||(r+=t.value,i="out")}else{for(let t of n.outputs)t.path&&(r+=t.value,i="in");0===n.time&&(i="in receiving"),n.tx.isCoinbase()&&(i="rig")}e+=`<holder><i class="glyph-icon flaticon-${i}"></i><span>`,e+=`<label>${t}</label><label>${o.wmcc(r,!0)} wmcc</label>`,e+=`<a><label class='r_goToExp' value="${n.hash}">Show Details</label></a></span></holder>`}return e||"<holder><h2>No recent transaction found.</h2></holder>"},r.prototype.getUnconfirmTxCount=function(){return this.mempool.getCount()},r.prototype.getUnconfirmTxSize=function(){return function(t){return t<1048576?(t/1024).toFixed(3):t<1073741824?(t/1024).toFixed(0):void 0}(this.mempool.getSize())},r.prototype.getLatestTxs=function(t,e){let n="";if(t){const e=[t.hash("hex"),t.getOutputValue()];if(!this._latesttxs.indexOf(e))return;this._latesttxs.push(e)}else this._latesttxs=[],this.mempool.map.forEach((t,e)=>{this._latesttxs.push([e,t.value])});const r=this._latesttxs.length,i=this._latesttxs.slice(Math.max(0,r-5),r);if(i.length){n+="<table>";for(let t=i.length-1;t>=0;t--)n+=`<tr><td><a title='${i[t][0]}' class='r_goToExp'>${i[t][0]}<a></td>`,n+=`<td>${o.wmcc(i[t][1],!0)}</td></tr>`;n+="</table>"}else n="<h2>No transaction in mempool.</h2>";return n},r.prototype.getCurrentBlock=async function(){let t="";const e=this.chain.height,n=this.chain.tip.rhash(),r=await this.chain.getEntry(e),i=await this.chain.getBlock(r.hash);return t+="<table>",t+=`<tr><td>Tip</td><td colspan='3'><a title='${n}'>${n}</a></td></tr>`,t+=`<tr><td>Hash</td><td colspan='3'><a title='${r.rhash()}' class='r_goToExp'>${r.rhash()}</a></td></tr>`,t+=`<tr><td>Height</td><td>${e}</td>`,t+=`<td>Age</td><td>${function(t,e){let n=e?t:Math.abs(Date.now()/1e3-t),r="",o={},i=0;const s={year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60,second:1};return Object.keys(s).forEach(function(t){o[t]=Math.floor(n/s[t]),n-=o[t]*s[t],o[t]&&i<1&&(i++,r+=` ${o[t]} ${t}${o[t]>1?"s":""}`)}),`${r}${e?"":" ago"}`}(r.time)}</td></tr>`,t+=`<tr><td>Txns<a></td><td>${i.txs.length}</td>`,t+=`<td>Outputs</td><td>${o.wmcc(i.getClaimed())} wmcc</td></tr>`,t+=`<tr><td>Size</td><td>${i.getVirtualSize()/1e3} kb</td>`,t+=`<td>Weight</td><td>${i.getWeight()/1e3} kwu</td></tr>`},r.prototype.destroy=async function(){},r.prototype.getMinerInfo=function(t){this._getMinerInfo&&!t&&(t=this._getMinerInfo);let e="<table>";return t?(this._getMinerInfo=t,e+=`<tr><td>Address</td><td colspan="3"><a title='${t.address}' class='r_goToExp'>${t.address}</a></td></tr>`,e+=`<tr><td>Height</td><td>${t.height}</td><td>Fees</td><td>${o.wmcc(t.fees)} wmcc</td></tr>`,e+=`<tr><td>Transactions</td><td>${t.items.length+1}</td><td>Difficulty</td><td>${function(t){let e=t>>>24&255,n=65535/(16777215&t);for(;e<29;)n*=256,e++;for(;e>29;)n/=256,e--;return n}(t.bits)}</td></tr>`):e+=`<tr><td colspan="2" class="ellipse">Address: ${this.info.getAddress()}</td></tr>`,e+="<table>"},r.prototype.minerFoundBlock=function(t,e){if("object"!=typeof t)return;let n="";return n+='<table class=\'minerfound\'><tr><th rowspan="3"><i class="glyph-icon flaticon-remove"></i><i class="glyph-icon flaticon-rig"></i></th>',n+='<th colspan="2">Found New Block!</th></tr>',n+=`<tr><td>Block height</td><td>: ${e.height}</td></tr>`,n+=`<tr><td>Block reward</td><td>: ${o.wmcc(t.txs[0].outputs[0].value)} wmcc</td></tr></table>`},t.exports=r},function(t,e,n){"use strict";e.Language=n(4)},function(t,e,n){"use strict";e.Updater=n(25),e.Installer=n(7)},function(t,e,n){"use strict";e.Zlib=n(23)}]);